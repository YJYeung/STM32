ARM GAS  /tmp/ccahK8IF.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"ip4_frag.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.ip_reass_dequeue_datagram,"ax",%progbits
  17              		.align	1
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu fpv5-d16
  23              	ip_reass_dequeue_datagram:
  24              	.LFB162:
  25              		.file 1 "Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c"
   1:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * This is the IPv4 packet segmentation and reassembly implementation.
   4:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
   6:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
   7:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /*
   8:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  11:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  14:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *    and/or other materials provided with the distribution.
  19:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  22:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  33:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * This file is part of the lwIP TCP/IP stack.
ARM GAS  /tmp/ccahK8IF.s 			page 2


  34:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  35:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Author: Jani Monoses <jani@iv.ro>
  36:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *         Simon Goldschmidt
  37:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * original reassembly code by Adam Dunkels <adam@sics.se>
  38:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  39:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
  40:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  41:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/opt.h"
  42:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  43:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if LWIP_IPV4
  44:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  45:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/ip4_frag.h"
  46:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/def.h"
  47:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/inet_chksum.h"
  48:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/netif.h"
  49:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/stats.h"
  50:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include "lwip/icmp.h"
  51:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  52:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #include <string.h>
  53:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  54:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASSEMBLY
  55:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
  56:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * The IP reassembly code currently has the following limitations:
  57:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * - IP header options are not supported
  58:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * - fragments must not overlap (e.g. due to different routes),
  59:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *   currently, overlapping or duplicate fragments are thrown away
  60:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *   if IP_REASS_CHECK_OVERLAP=1 (the default)!
  61:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
  62:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @todo: work with IP header options
  63:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
  64:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  65:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /** Setting this to 0, you can turn off checking the fragments for overlapping
  66:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * regions. The code gets a little smaller. Only use this if you know that
  67:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * overlapping won't occur on your network! */
  68:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #ifndef IP_REASS_CHECK_OVERLAP
  69:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_REASS_CHECK_OVERLAP 1
  70:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
  71:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  72:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /** Set to 0 to prevent freeing the oldest datagram when the reassembly buffer is
  73:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * full (IP_REASS_MAX_PBUFS pbufs are enqueued). The code gets a little smaller.
  74:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Datagrams will be freed by timeout only. Especially useful when MEMP_NUM_REASSDATA
  75:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * is set to 1, so one datagram can be reassembled at a time, only. */
  76:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #ifndef IP_REASS_FREE_OLDEST
  77:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_REASS_FREE_OLDEST 1
  78:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
  79:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  80:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_REASS_FLAG_LASTFRAG 0x01
  81:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  82:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_REASS_VALIDATE_TELEGRAM_FINISHED  1
  83:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_REASS_VALIDATE_PBUF_QUEUED        0
  84:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_REASS_VALIDATE_PBUF_DROPPED       -1
  85:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
  86:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /** This is a helper struct which holds the starting
  87:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * offset and the ending offset of this fragment to
  88:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * easily chain the fragments.
  89:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * It has the same packing requirements as the IP header, since it replaces
  90:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * the IP header in memory in incoming fragments (after copying it) to keep
ARM GAS  /tmp/ccahK8IF.s 			page 3


  91:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * track of the various fragments. (-> If the IP header doesn't need packing,
  92:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * this struct doesn't need packing, too.)
  93:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
  94:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #ifdef PACK_STRUCT_USE_INCLUDES
  95:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #  include "arch/bpstruct.h"
  96:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif
  97:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** PACK_STRUCT_BEGIN
  98:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** struct ip_reass_helper {
  99:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   PACK_STRUCT_FIELD(struct pbuf *next_pbuf);
 100:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   PACK_STRUCT_FIELD(u16_t start);
 101:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   PACK_STRUCT_FIELD(u16_t end);
 102:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** } PACK_STRUCT_STRUCT;
 103:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** PACK_STRUCT_END
 104:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #ifdef PACK_STRUCT_USE_INCLUDES
 105:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #  include "arch/epstruct.h"
 106:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif
 107:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 108:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #define IP_ADDRESSES_AND_ID_MATCH(iphdrA, iphdrB)  \
 109:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   (ip4_addr_cmp(&(iphdrA)->src, &(iphdrB)->src) && \
 110:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    ip4_addr_cmp(&(iphdrA)->dest, &(iphdrB)->dest) && \
 111:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    IPH_ID(iphdrA) == IPH_ID(iphdrB)) ? 1 : 0
 112:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 113:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /* global variables */
 114:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static struct ip_reassdata *reassdatagrams;
 115:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static u16_t ip_reass_pbufcount;
 116:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 117:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /* function prototypes */
 118:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static void ip_reass_dequeue_datagram(struct ip_reassdata *ipr, struct ip_reassdata *prev);
 119:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static int ip_reass_free_complete_datagram(struct ip_reassdata *ipr, struct ip_reassdata *prev);
 120:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 121:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 122:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Reassembly timer base function
 123:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * for both NO_SYS == 0 and 1 (!).
 124:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 125:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Should be called every 1000 msec (defined by IP_TMR_INTERVAL).
 126:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 127:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** void
 128:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_reass_tmr(void)
 129:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 130:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reassdata *r, *prev = NULL;
 131:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 132:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   r = reassdatagrams;
 133:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   while (r != NULL) {
 134:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Decrement the timer. Once it reaches 0,
 135:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * clean up the incomplete fragment assembly */
 136:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (r->timer > 0) {
 137:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r->timer--;
 138:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip_reass_tmr: timer dec %"U16_F"\n", (u16_t)r->timer));
 139:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       prev = r;
 140:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r = r->next;
 141:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else {
 142:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* reassembly timed out */
 143:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       struct ip_reassdata *tmp;
 144:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip_reass_tmr: timer timed out\n"));
 145:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       tmp = r;
 146:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* get the next pointer before freeing */
 147:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r = r->next;
ARM GAS  /tmp/ccahK8IF.s 			page 4


 148:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* free the helper struct and all enqueued pbufs */
 149:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       ip_reass_free_complete_datagram(tmp, prev);
 150:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 151:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 152:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 153:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 154:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 155:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Free a datagram (struct ip_reassdata) and all its pbufs.
 156:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Updates the total count of enqueued pbufs (ip_reass_pbufcount),
 157:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * SNMP counters and sends an ICMP time exceeded packet.
 158:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 159:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param ipr datagram to free
 160:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param prev the previous datagram in the linked list
 161:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @return the number of pbufs freed
 162:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 163:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static int
 164:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_reass_free_complete_datagram(struct ip_reassdata *ipr, struct ip_reassdata *prev)
 165:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 166:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t pbufs_freed = 0;
 167:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t clen;
 168:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *p;
 169:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reass_helper *iprh;
 170:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 171:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("prev != ipr", prev != ipr);
 172:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (prev != NULL) {
 173:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("prev->next == ipr", prev->next == ipr);
 174:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 175:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 176:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   MIB2_STATS_INC(mib2.ipreasmfails);
 177:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if LWIP_ICMP
 178:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh = (struct ip_reass_helper *)ipr->p->payload;
 179:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (iprh->start == 0) {
 180:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* The first fragment was received, send ICMP time exceeded. */
 181:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* First, de-queue the first pbuf from r->p. */
 182:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     p = ipr->p;
 183:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ipr->p = iprh->next_pbuf;
 184:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Then, copy the original header into it. */
 185:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     SMEMCPY(p->payload, &ipr->iphdr, IP_HLEN);
 186:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     icmp_time_exceeded(p, ICMP_TE_FRAG);
 187:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     clen = pbuf_clen(p);
 188:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("pbufs_freed + clen <= 0xffff", pbufs_freed + clen <= 0xffff);
 189:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbufs_freed = (u16_t)(pbufs_freed + clen);
 190:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbuf_free(p);
 191:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 192:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* LWIP_ICMP */
 193:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 194:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* First, free all received pbufs.  The individual pbufs need to be released
 195:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      separately as they have not yet been chained */
 196:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   p = ipr->p;
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   while (p != NULL) {
 198:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     struct pbuf *pcur;
 199:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh = (struct ip_reass_helper *)p->payload;
 200:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pcur = p;
 201:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* get the next pointer before freeing */
 202:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     p = iprh->next_pbuf;
 203:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     clen = pbuf_clen(pcur);
 204:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("pbufs_freed + clen <= 0xffff", pbufs_freed + clen <= 0xffff);
ARM GAS  /tmp/ccahK8IF.s 			page 5


 205:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbufs_freed = (u16_t)(pbufs_freed + clen);
 206:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbuf_free(pcur);
 207:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 208:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Then, unchain the struct ip_reassdata from the list and free it. */
 209:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ip_reass_dequeue_datagram(ipr, prev);
 210:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("ip_reass_pbufcount >= pbufs_freed", ip_reass_pbufcount >= pbufs_freed);
 211:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount - pbufs_freed);
 212:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 213:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return pbufs_freed;
 214:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 215:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 216:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_FREE_OLDEST
 217:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 218:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Free the oldest datagram to make room for enqueueing new fragments.
 219:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * The datagram 'fraghdr' belongs to is not freed!
 220:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 221:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param fraghdr IP header of the current fragment
 222:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param pbufs_needed number of pbufs needed to enqueue
 223:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *        (used for freeing other datagrams if not enough space)
 224:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @return the number of pbufs freed
 225:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 226:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static int
 227:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_reass_remove_oldest_datagram(struct ip_hdr *fraghdr, int pbufs_needed)
 228:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 229:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* @todo Can't we simply remove the last datagram in the
 230:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    *       linked list behind reassdatagrams?
 231:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    */
 232:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reassdata *r, *oldest, *prev, *oldest_prev;
 233:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int pbufs_freed = 0, pbufs_freed_current;
 234:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int other_datagrams;
 235:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 236:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Free datagrams until being allowed to enqueue 'pbufs_needed' pbufs,
 237:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    * but don't free the datagram that 'fraghdr' belongs to! */
 238:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   do {
 239:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     oldest = NULL;
 240:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     prev = NULL;
 241:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     oldest_prev = NULL;
 242:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     other_datagrams = 0;
 243:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     r = reassdatagrams;
 244:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     while (r != NULL) {
 245:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (!IP_ADDRESSES_AND_ID_MATCH(&r->iphdr, fraghdr)) {
 246:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* Not the same datagram as fraghdr */
 247:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         other_datagrams++;
 248:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (oldest == NULL) {
 249:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest = r;
 250:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest_prev = prev;
 251:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         } else if (r->timer <= oldest->timer) {
 252:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* older than the previous oldest */
 253:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest = r;
 254:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest_prev = prev;
 255:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 256:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 257:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (r->next != NULL) {
 258:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         prev = r;
 259:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 260:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r = r->next;
 261:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
ARM GAS  /tmp/ccahK8IF.s 			page 6


 262:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (oldest != NULL) {
 263:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbufs_freed_current = ip_reass_free_complete_datagram(oldest, oldest_prev);
 264:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbufs_freed += pbufs_freed_current;
 265:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 266:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   } while ((pbufs_freed < pbufs_needed) && (other_datagrams > 1));
 267:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return pbufs_freed;
 268:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 269:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
 270:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 271:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 272:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Enqueues a new fragment into the fragment queue
 273:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param fraghdr points to the new fragments IP hdr
 274:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param clen number of pbufs needed to enqueue (used for freeing other datagrams if not enough sp
 275:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @return A pointer to the queue location into which the fragment was enqueued
 276:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 277:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static struct ip_reassdata *
 278:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_reass_enqueue_new_datagram(struct ip_hdr *fraghdr, int clen)
 279:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 280:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reassdata *ipr;
 281:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if ! IP_REASS_FREE_OLDEST
 282:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_UNUSED_ARG(clen);
 283:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif
 284:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 285:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* No matching previous fragment found, allocate a new reassdata struct */
 286:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ipr = (struct ip_reassdata *)memp_malloc(MEMP_REASSDATA);
 287:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (ipr == NULL) {
 288:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_FREE_OLDEST
 289:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (ip_reass_remove_oldest_datagram(fraghdr, clen) >= clen) {
 290:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       ipr = (struct ip_reassdata *)memp_malloc(MEMP_REASSDATA);
 291:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 292:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (ipr == NULL)
 293:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
 294:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     {
 295:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       IPFRAG_STATS_INC(ip_frag.memerr);
 296:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("Failed to alloc reassdata struct\n"));
 297:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       return NULL;
 298:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 299:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 300:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   memset(ipr, 0, sizeof(struct ip_reassdata));
 301:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ipr->timer = IP_REASS_MAXAGE;
 302:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 303:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* enqueue the new structure to the front of the list */
 304:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ipr->next = reassdatagrams;
 305:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   reassdatagrams = ipr;
 306:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* copy the ip header for later tests and input */
 307:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* @todo: no ip options supported? */
 308:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   SMEMCPY(&(ipr->iphdr), fraghdr, IP_HLEN);
 309:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return ipr;
 310:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 311:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 312:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 313:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Dequeues a datagram from the datagram queue. Doesn't deallocate the pbufs.
 314:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param ipr points to the queue entry to dequeue
 315:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 316:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static void
 317:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_reass_dequeue_datagram(struct ip_reassdata *ipr, struct ip_reassdata *prev)
 318:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
ARM GAS  /tmp/ccahK8IF.s 			page 7


  26              		.loc 1 318 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 38B5     		push	{r3, r4, r5, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34              		.cfi_offset 3, -16
  35              		.cfi_offset 4, -12
  36              		.cfi_offset 5, -8
  37              		.cfi_offset 14, -4
  38 0002 0446     		mov	r4, r0
 319:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* dequeue the reass struct  */
 320:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (reassdatagrams == ipr) {
  39              		.loc 1 320 0
  40 0004 0C4B     		ldr	r3, .L8
  41 0006 1B68     		ldr	r3, [r3]
  42 0008 8342     		cmp	r3, r0
  43 000a 08D0     		beq	.L6
  44 000c 0D46     		mov	r5, r1
 321:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* it was the first in the list */
 322:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     reassdatagrams = ipr->next;
 323:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   } else {
 324:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* it wasn't the first, so it must have a valid 'prev' */
 325:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("sanity check linked list", prev != NULL);
  45              		.loc 1 325 0
  46 000e 51B1     		cbz	r1, .L7
  47              	.LVL1:
  48              	.L4:
 326:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     prev->next = ipr->next;
  49              		.loc 1 326 0
  50 0010 2368     		ldr	r3, [r4]
  51 0012 2B60     		str	r3, [r5]
  52              	.LVL2:
  53              	.L3:
 327:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 328:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 329:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* now we can free the ip_reassdata struct */
 330:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   memp_free(MEMP_REASSDATA, ipr);
  54              		.loc 1 330 0
  55 0014 2146     		mov	r1, r4
  56 0016 0420     		movs	r0, #4
  57 0018 FFF7FEFF 		bl	memp_free
  58              	.LVL3:
  59 001c 38BD     		pop	{r3, r4, r5, pc}
  60              	.LVL4:
  61              	.L6:
 322:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   } else {
  62              		.loc 1 322 0
  63 001e 0268     		ldr	r2, [r0]
  64 0020 054B     		ldr	r3, .L8
  65 0022 1A60     		str	r2, [r3]
  66 0024 F6E7     		b	.L3
  67              	.L7:
 325:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     prev->next = ipr->next;
  68              		.loc 1 325 0 discriminator 1
ARM GAS  /tmp/ccahK8IF.s 			page 8


  69 0026 054B     		ldr	r3, .L8+4
  70 0028 40F24512 		movw	r2, #325
  71 002c 0449     		ldr	r1, .L8+8
  72              	.LVL5:
  73 002e 0548     		ldr	r0, .L8+12
  74              	.LVL6:
  75 0030 FFF7FEFF 		bl	printf
  76              	.LVL7:
  77 0034 ECE7     		b	.L4
  78              	.L9:
  79 0036 00BF     		.align	2
  80              	.L8:
  81 0038 00000000 		.word	.LANCHOR0
  82 003c 00000000 		.word	.LC0
  83 0040 38000000 		.word	.LC1
  84 0044 54000000 		.word	.LC2
  85              		.cfi_endproc
  86              	.LFE162:
  88              		.section	.text.ip_reass_free_complete_datagram,"ax",%progbits
  89              		.align	1
  90              		.syntax unified
  91              		.thumb
  92              		.thumb_func
  93              		.fpu fpv5-d16
  95              	ip_reass_free_complete_datagram:
  96              	.LFB159:
 165:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t pbufs_freed = 0;
  97              		.loc 1 165 0
  98              		.cfi_startproc
  99              		@ args = 0, pretend = 0, frame = 0
 100              		@ frame_needed = 0, uses_anonymous_args = 0
 101              	.LVL8:
 102 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 103              	.LCFI1:
 104              		.cfi_def_cfa_offset 32
 105              		.cfi_offset 3, -32
 106              		.cfi_offset 4, -28
 107              		.cfi_offset 5, -24
 108              		.cfi_offset 6, -20
 109              		.cfi_offset 7, -16
 110              		.cfi_offset 8, -12
 111              		.cfi_offset 9, -8
 112              		.cfi_offset 14, -4
 113 0004 8046     		mov	r8, r0
 114 0006 8946     		mov	r9, r1
 115              	.LVL9:
 171:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (prev != NULL) {
 116              		.loc 1 171 0
 117 0008 8142     		cmp	r1, r0
 118 000a 15D0     		beq	.L21
 119              	.LVL10:
 120              	.L11:
 172:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("prev->next == ipr", prev->next == ipr);
 121              		.loc 1 172 0
 122 000c B9F1000F 		cmp	r9, #0
 123 0010 09D0     		beq	.L12
 173:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
ARM GAS  /tmp/ccahK8IF.s 			page 9


 124              		.loc 1 173 0
 125 0012 D9F80030 		ldr	r3, [r9]
 126 0016 9845     		cmp	r8, r3
 127 0018 05D0     		beq	.L12
 173:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 128              		.loc 1 173 0 is_stmt 0 discriminator 1
 129 001a 354B     		ldr	r3, .L26
 130 001c AD22     		movs	r2, #173
 131 001e 3549     		ldr	r1, .L26+4
 132 0020 3548     		ldr	r0, .L26+8
 133 0022 FFF7FEFF 		bl	printf
 134              	.LVL11:
 135              	.L12:
 178:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (iprh->start == 0) {
 136              		.loc 1 178 0 is_stmt 1
 137 0026 D8F80440 		ldr	r4, [r8, #4]
 138 002a 6368     		ldr	r3, [r4, #4]
 139              	.LVL12:
 179:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* The first fragment was received, send ICMP time exceeded. */
 140              		.loc 1 179 0
 141 002c 9A88     		ldrh	r2, [r3, #4]	@ unaligned
 142 002e 52B1     		cbz	r2, .L22
 166:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t clen;
 143              		.loc 1 166 0
 144 0030 0026     		movs	r6, #0
 145              	.LVL13:
 146              	.L13:
 196:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   while (p != NULL) {
 147              		.loc 1 196 0
 148 0032 D8F80440 		ldr	r4, [r8, #4]
 149              	.LVL14:
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     struct pbuf *pcur;
 150              		.loc 1 197 0
 151 0036 32E0     		b	.L15
 152              	.LVL15:
 153              	.L21:
 171:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (prev != NULL) {
 154              		.loc 1 171 0 discriminator 1
 155 0038 2D4B     		ldr	r3, .L26
 156 003a AB22     		movs	r2, #171
 157 003c 2F49     		ldr	r1, .L26+12
 158              	.LVL16:
 159 003e 2E48     		ldr	r0, .L26+8
 160              	.LVL17:
 161 0040 FFF7FEFF 		bl	printf
 162              	.LVL18:
 163 0044 E2E7     		b	.L11
 164              	.LVL19:
 165              	.L22:
 183:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Then, copy the original header into it. */
 166              		.loc 1 183 0
 167 0046 1B68     		ldr	r3, [r3]	@ unaligned
 168              	.LVL20:
 169 0048 C8F80430 		str	r3, [r8, #4]
 170              	.LVL21:
 185:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     icmp_time_exceeded(p, ICMP_TE_FRAG);
 171              		.loc 1 185 0
ARM GAS  /tmp/ccahK8IF.s 			page 10


 172 004c 4346     		mov	r3, r8
 173 004e 6268     		ldr	r2, [r4, #4]
 174 0050 53F8081F 		ldr	r1, [r3, #8]!	@ unaligned
 175 0054 5E68     		ldr	r6, [r3, #4]	@ unaligned
 176 0056 9D68     		ldr	r5, [r3, #8]	@ unaligned
 177 0058 D868     		ldr	r0, [r3, #12]	@ unaligned
 178 005a 1160     		str	r1, [r2]	@ unaligned
 179 005c 5660     		str	r6, [r2, #4]	@ unaligned
 180 005e 9560     		str	r5, [r2, #8]	@ unaligned
 181 0060 D060     		str	r0, [r2, #12]	@ unaligned
 182 0062 1969     		ldr	r1, [r3, #16]	@ unaligned
 183 0064 1161     		str	r1, [r2, #16]	@ unaligned
 186:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     clen = pbuf_clen(p);
 184              		.loc 1 186 0
 185 0066 0121     		movs	r1, #1
 186 0068 2046     		mov	r0, r4
 187 006a FFF7FEFF 		bl	icmp_time_exceeded
 188              	.LVL22:
 187:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("pbufs_freed + clen <= 0xffff", pbufs_freed + clen <= 0xffff);
 189              		.loc 1 187 0
 190 006e 2046     		mov	r0, r4
 191 0070 FFF7FEFF 		bl	pbuf_clen
 192              	.LVL23:
 193 0074 0646     		mov	r6, r0
 194              	.LVL24:
 188:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbufs_freed = (u16_t)(pbufs_freed + clen);
 195              		.loc 1 188 0
 196 0076 B0F5803F 		cmp	r0, #65536
 197 007a 03DA     		bge	.L23
 198              	.LVL25:
 199              	.L14:
 190:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 200              		.loc 1 190 0
 201 007c 2046     		mov	r0, r4
 202 007e FFF7FEFF 		bl	pbuf_free
 203              	.LVL26:
 204 0082 D6E7     		b	.L13
 205              	.LVL27:
 206              	.L23:
 188:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbufs_freed = (u16_t)(pbufs_freed + clen);
 207              		.loc 1 188 0 discriminator 1
 208 0084 1A4B     		ldr	r3, .L26
 209 0086 BC22     		movs	r2, #188
 210 0088 1D49     		ldr	r1, .L26+16
 211 008a 1B48     		ldr	r0, .L26+8
 212              	.LVL28:
 213 008c FFF7FEFF 		bl	printf
 214              	.LVL29:
 215 0090 F4E7     		b	.L14
 216              	.LVL30:
 217              	.L16:
 218              	.LBB2:
 205:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbuf_free(pcur);
 219              		.loc 1 205 0
 220 0092 3544     		add	r5, r5, r6
 221 0094 AEB2     		uxth	r6, r5
 222              	.LVL31:
ARM GAS  /tmp/ccahK8IF.s 			page 11


 206:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 223              		.loc 1 206 0
 224 0096 2046     		mov	r0, r4
 225 0098 FFF7FEFF 		bl	pbuf_free
 226              	.LVL32:
 202:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     clen = pbuf_clen(pcur);
 227              		.loc 1 202 0
 228 009c 3C46     		mov	r4, r7
 229              	.LVL33:
 230              	.L15:
 231              	.LBE2:
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     struct pbuf *pcur;
 232              		.loc 1 197 0
 233 009e 84B1     		cbz	r4, .L24
 234              	.LBB3:
 199:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pcur = p;
 235              		.loc 1 199 0
 236 00a0 6368     		ldr	r3, [r4, #4]
 237              	.LVL34:
 202:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     clen = pbuf_clen(pcur);
 238              		.loc 1 202 0
 239 00a2 1F68     		ldr	r7, [r3]	@ unaligned
 240              	.LVL35:
 203:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("pbufs_freed + clen <= 0xffff", pbufs_freed + clen <= 0xffff);
 241              		.loc 1 203 0
 242 00a4 2046     		mov	r0, r4
 243 00a6 FFF7FEFF 		bl	pbuf_clen
 244              	.LVL36:
 245 00aa 0546     		mov	r5, r0
 246              	.LVL37:
 204:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbufs_freed = (u16_t)(pbufs_freed + clen);
 247              		.loc 1 204 0
 248 00ac 3318     		adds	r3, r6, r0
 249 00ae B3F5803F 		cmp	r3, #65536
 250 00b2 EEDB     		blt	.L16
 204:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbufs_freed = (u16_t)(pbufs_freed + clen);
 251              		.loc 1 204 0 is_stmt 0 discriminator 1
 252 00b4 0E4B     		ldr	r3, .L26
 253 00b6 CC22     		movs	r2, #204
 254 00b8 1149     		ldr	r1, .L26+16
 255 00ba 0F48     		ldr	r0, .L26+8
 256              	.LVL38:
 257 00bc FFF7FEFF 		bl	printf
 258              	.LVL39:
 259 00c0 E7E7     		b	.L16
 260              	.LVL40:
 261              	.L24:
 262              	.LBE3:
 209:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("ip_reass_pbufcount >= pbufs_freed", ip_reass_pbufcount >= pbufs_freed);
 263              		.loc 1 209 0 is_stmt 1
 264 00c2 4946     		mov	r1, r9
 265 00c4 4046     		mov	r0, r8
 266 00c6 FFF7FEFF 		bl	ip_reass_dequeue_datagram
 267              	.LVL41:
 210:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount - pbufs_freed);
 268              		.loc 1 210 0
 269 00ca 0E4B     		ldr	r3, .L26+20
ARM GAS  /tmp/ccahK8IF.s 			page 12


 270 00cc 1B88     		ldrh	r3, [r3]
 271 00ce 9E42     		cmp	r6, r3
 272 00d0 06D8     		bhi	.L25
 273              	.L18:
 211:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 274              		.loc 1 211 0
 275 00d2 0C4A     		ldr	r2, .L26+20
 276 00d4 1388     		ldrh	r3, [r2]
 277 00d6 9B1B     		subs	r3, r3, r6
 278 00d8 1380     		strh	r3, [r2]	@ movhi
 214:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 279              		.loc 1 214 0
 280 00da 3046     		mov	r0, r6
 281 00dc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 282              	.LVL42:
 283              	.L25:
 210:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount - pbufs_freed);
 284              		.loc 1 210 0 discriminator 1
 285 00e0 034B     		ldr	r3, .L26
 286 00e2 D222     		movs	r2, #210
 287 00e4 0849     		ldr	r1, .L26+24
 288 00e6 0448     		ldr	r0, .L26+8
 289 00e8 FFF7FEFF 		bl	printf
 290              	.LVL43:
 291 00ec F1E7     		b	.L18
 292              	.L27:
 293 00ee 00BF     		.align	2
 294              	.L26:
 295 00f0 00000000 		.word	.LC0
 296 00f4 0C000000 		.word	.LC4
 297 00f8 54000000 		.word	.LC2
 298 00fc 00000000 		.word	.LC3
 299 0100 20000000 		.word	.LC5
 300 0104 00000000 		.word	.LANCHOR1
 301 0108 40000000 		.word	.LC6
 302              		.cfi_endproc
 303              	.LFE159:
 305              		.section	.text.ip_reass_remove_oldest_datagram,"ax",%progbits
 306              		.align	1
 307              		.syntax unified
 308              		.thumb
 309              		.thumb_func
 310              		.fpu fpv5-d16
 312              	ip_reass_remove_oldest_datagram:
 313              	.LFB160:
 228:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* @todo Can't we simply remove the last datagram in the
 314              		.loc 1 228 0
 315              		.cfi_startproc
 316              		@ args = 0, pretend = 0, frame = 0
 317              		@ frame_needed = 0, uses_anonymous_args = 0
 318              	.LVL44:
 319 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 320              	.LCFI2:
 321              		.cfi_def_cfa_offset 24
 322              		.cfi_offset 4, -24
 323              		.cfi_offset 5, -20
 324              		.cfi_offset 6, -16
ARM GAS  /tmp/ccahK8IF.s 			page 13


 325              		.cfi_offset 7, -12
 326              		.cfi_offset 8, -8
 327              		.cfi_offset 14, -4
 328 0004 0546     		mov	r5, r0
 329 0006 8846     		mov	r8, r1
 330              	.LVL45:
 233:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int other_datagrams;
 331              		.loc 1 233 0
 332 0008 0026     		movs	r6, #0
 333 000a 2EE0     		b	.L35
 334              	.LVL46:
 335              	.L41:
 245:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* Not the same datagram as fraghdr */
 336              		.loc 1 245 0 discriminator 1
 337 000c 9A69     		ldr	r2, [r3, #24]
 338 000e D5F810C0 		ldr	ip, [r5, #16]	@ unaligned
 339 0012 6245     		cmp	r2, ip
 340 0014 10D1     		bne	.L30
 245:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* Not the same datagram as fraghdr */
 341              		.loc 1 245 0 is_stmt 0 discriminator 2
 342 0016 B3F80CC0 		ldrh	ip, [r3, #12]
 343 001a AA88     		ldrh	r2, [r5, #4]	@ unaligned
 344 001c 9445     		cmp	ip, r2
 345 001e 0BD1     		bne	.L30
 346 0020 01E0     		b	.L31
 347              	.L36:
 250:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         } else if (r->timer <= oldest->timer) {
 348              		.loc 1 250 0 is_stmt 1
 349 0022 7146     		mov	r1, lr
 350              	.LVL47:
 249:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest_prev = prev;
 351              		.loc 1 249 0
 352 0024 1846     		mov	r0, r3
 353              	.LVL48:
 354              	.L31:
 257:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         prev = r;
 355              		.loc 1 257 0
 356 0026 1A68     		ldr	r2, [r3]
 357 0028 8AB1     		cbz	r2, .L39
 358              	.LVL49:
 359              	.L32:
 360 002a 9E46     		mov	lr, r3
 361              	.LVL50:
 362 002c 1346     		mov	r3, r2
 363              	.LVL51:
 364              	.L29:
 244:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (!IP_ADDRESSES_AND_ID_MATCH(&r->iphdr, fraghdr)) {
 365              		.loc 1 244 0
 366 002e 83B1     		cbz	r3, .L40
 245:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* Not the same datagram as fraghdr */
 367              		.loc 1 245 0
 368 0030 EA68     		ldr	r2, [r5, #12]	@ unaligned
 369 0032 5F69     		ldr	r7, [r3, #20]
 370 0034 9742     		cmp	r7, r2
 371 0036 E9D0     		beq	.L41
 372              	.L30:
 247:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (oldest == NULL) {
ARM GAS  /tmp/ccahK8IF.s 			page 14


 373              		.loc 1 247 0
 374 0038 0134     		adds	r4, r4, #1
 375              	.LVL52:
 248:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest = r;
 376              		.loc 1 248 0
 377 003a 0028     		cmp	r0, #0
 378 003c F1D0     		beq	.L36
 251:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* older than the previous oldest */
 379              		.loc 1 251 0
 380 003e 93F81FC0 		ldrb	ip, [r3, #31]	@ zero_extendqisi2
 381 0042 C27F     		ldrb	r2, [r0, #31]	@ zero_extendqisi2
 382 0044 9445     		cmp	ip, r2
 383 0046 EED8     		bhi	.L31
 254:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 384              		.loc 1 254 0
 385 0048 7146     		mov	r1, lr
 386              	.LVL53:
 253:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           oldest_prev = prev;
 387              		.loc 1 253 0
 388 004a 1846     		mov	r0, r3
 389              	.LVL54:
 390 004c EBE7     		b	.L31
 391              	.LVL55:
 392              	.L39:
 257:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         prev = r;
 393              		.loc 1 257 0
 394 004e 7346     		mov	r3, lr
 395              	.LVL56:
 396 0050 EBE7     		b	.L32
 397              	.LVL57:
 398              	.L40:
 262:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbufs_freed_current = ip_reass_free_complete_datagram(oldest, oldest_prev);
 399              		.loc 1 262 0
 400 0052 10B1     		cbz	r0, .L34
 263:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbufs_freed += pbufs_freed_current;
 401              		.loc 1 263 0
 402 0054 FFF7FEFF 		bl	ip_reass_free_complete_datagram
 403              	.LVL58:
 264:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 404              		.loc 1 264 0
 405 0058 0644     		add	r6, r6, r0
 406              	.LVL59:
 407              	.L34:
 266:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return pbufs_freed;
 408              		.loc 1 266 0
 409 005a 4645     		cmp	r6, r8
 410 005c ACBF     		ite	ge
 411 005e 0023     		movge	r3, #0
 412 0060 0123     		movlt	r3, #1
 413 0062 012C     		cmp	r4, #1
 414 0064 D8BF     		it	le
 415 0066 0023     		movle	r3, #0
 416 0068 33B1     		cbz	r3, .L42
 417              	.LVL60:
 418              	.L35:
 243:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     while (r != NULL) {
 419              		.loc 1 243 0
ARM GAS  /tmp/ccahK8IF.s 			page 15


 420 006a 054B     		ldr	r3, .L43
 421 006c 1B68     		ldr	r3, [r3]
 422              	.LVL61:
 242:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     r = reassdatagrams;
 423              		.loc 1 242 0
 424 006e 0024     		movs	r4, #0
 241:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     other_datagrams = 0;
 425              		.loc 1 241 0
 426 0070 2146     		mov	r1, r4
 240:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     oldest_prev = NULL;
 427              		.loc 1 240 0
 428 0072 A646     		mov	lr, r4
 239:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     prev = NULL;
 429              		.loc 1 239 0
 430 0074 2046     		mov	r0, r4
 244:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (!IP_ADDRESSES_AND_ID_MATCH(&r->iphdr, fraghdr)) {
 431              		.loc 1 244 0
 432 0076 DAE7     		b	.L29
 433              	.LVL62:
 434              	.L42:
 268:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
 435              		.loc 1 268 0
 436 0078 3046     		mov	r0, r6
 437 007a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 438              	.LVL63:
 439              	.L44:
 440 007e 00BF     		.align	2
 441              	.L43:
 442 0080 00000000 		.word	.LANCHOR0
 443              		.cfi_endproc
 444              	.LFE160:
 446              		.section	.text.ip_frag_free_pbuf_custom_ref,"ax",%progbits
 447              		.align	1
 448              		.syntax unified
 449              		.thumb
 450              		.thumb_func
 451              		.fpu fpv5-d16
 453              	ip_frag_free_pbuf_custom_ref:
 454              	.LFB166:
 331:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 332:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 333:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 334:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Chain a new pbuf into the pbuf list that composes the datagram.  The pbuf list
 335:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * will grow over time as  new pbufs are rx.
 336:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Also checks that the datagram passes basic continuity checks (if the last
 337:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * fragment was received at least once).
 338:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param ipr points to the reassembly state
 339:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param new_p points to the pbuf for the current fragment
 340:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param is_last is 1 if this pbuf has MF==0 (ipr->flags not updated yet)
 341:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @return see IP_REASS_VALIDATE_* defines
 342:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 343:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static int
 344:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_reass_chain_frag_into_datagram_and_validate(struct ip_reassdata *ipr, struct pbuf *new_p, int is
 345:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 346:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reass_helper *iprh, *iprh_tmp, *iprh_prev = NULL;
 347:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *q;
 348:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t offset, len;
ARM GAS  /tmp/ccahK8IF.s 			page 16


 349:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u8_t hlen;
 350:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_hdr *fraghdr;
 351:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int valid = 1;
 352:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 353:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Extract length and fragment offset from current fragment */
 354:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   fraghdr = (struct ip_hdr *)new_p->payload;
 355:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   len = lwip_ntohs(IPH_LEN(fraghdr));
 356:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   hlen = IPH_HL_BYTES(fraghdr);
 357:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (hlen > len) {
 358:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* invalid datagram */
 359:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     return IP_REASS_VALIDATE_PBUF_DROPPED;
 360:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 361:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   len = (u16_t)(len - hlen);
 362:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   offset = IPH_OFFSET_BYTES(fraghdr);
 363:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 364:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* overwrite the fragment's ip header from the pbuf with our helper struct,
 365:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    * and setup the embedded helper structure. */
 366:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* make sure the struct ip_reass_helper fits into the IP header */
 367:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("sizeof(struct ip_reass_helper) <= IP_HLEN",
 368:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****               sizeof(struct ip_reass_helper) <= IP_HLEN);
 369:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh = (struct ip_reass_helper *)new_p->payload;
 370:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh->next_pbuf = NULL;
 371:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh->start = offset;
 372:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh->end = (u16_t)(offset + len);
 373:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (iprh->end < offset) {
 374:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* u16_t overflow, cannot handle this */
 375:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     return IP_REASS_VALIDATE_PBUF_DROPPED;
 376:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 377:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 378:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Iterate through until we either get to the end of the list (append),
 379:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    * or we find one with a larger offset (insert). */
 380:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   for (q = ipr->p; q != NULL;) {
 381:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh_tmp = (struct ip_reass_helper *)q->payload;
 382:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (iprh->start < iprh_tmp->start) {
 383:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* the new pbuf should be inserted before this */
 384:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       iprh->next_pbuf = q;
 385:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (iprh_prev != NULL) {
 386:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* not the fragment with the lowest offset */
 387:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_CHECK_OVERLAP
 388:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if ((iprh->start < iprh_prev->end) || (iprh->end > iprh_tmp->start)) {
 389:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* fragment overlaps with previous or following, throw away */
 390:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           return IP_REASS_VALIDATE_PBUF_DROPPED;
 391:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 392:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 393:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         iprh_prev->next_pbuf = new_p;
 394:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (iprh_prev->end != iprh->start) {
 395:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* There is a fragment missing between the current
 396:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****            * and the previous fragment */
 397:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           valid = 0;
 398:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 399:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       } else {
 400:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_CHECK_OVERLAP
 401:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (iprh->end > iprh_tmp->start) {
 402:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* fragment overlaps with following, throw away */
 403:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           return IP_REASS_VALIDATE_PBUF_DROPPED;
 404:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 405:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
ARM GAS  /tmp/ccahK8IF.s 			page 17


 406:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* fragment with the lowest offset */
 407:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ipr->p = new_p;
 408:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 409:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       break;
 410:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else if (iprh->start == iprh_tmp->start) {
 411:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* received the same datagram twice: no need to keep the datagram */
 412:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       return IP_REASS_VALIDATE_PBUF_DROPPED;
 413:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_CHECK_OVERLAP
 414:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else if (iprh->start < iprh_tmp->end) {
 415:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* overlap: no need to keep the new datagram */
 416:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       return IP_REASS_VALIDATE_PBUF_DROPPED;
 417:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 418:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else {
 419:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* Check if the fragments received so far have no holes. */
 420:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (iprh_prev != NULL) {
 421:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (iprh_prev->end != iprh_tmp->start) {
 422:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* There is a fragment missing between the current
 423:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****            * and the previous fragment */
 424:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           valid = 0;
 425:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 426:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 427:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 428:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     q = iprh_tmp->next_pbuf;
 429:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh_prev = iprh_tmp;
 430:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 431:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 432:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* If q is NULL, then we made it to the end of the list. Determine what to do now */
 433:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (q == NULL) {
 434:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (iprh_prev != NULL) {
 435:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* this is (for now), the fragment with the highest offset:
 436:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        * chain it to the last fragment */
 437:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_CHECK_OVERLAP
 438:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_ASSERT("check fragments don't overlap", iprh_prev->end <= iprh->start);
 439:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 440:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       iprh_prev->next_pbuf = new_p;
 441:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (iprh_prev->end != iprh->start) {
 442:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         valid = 0;
 443:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 444:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else {
 445:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_CHECK_OVERLAP
 446:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_ASSERT("no previous fragment, this must be the first fragment!",
 447:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                   ipr->p == NULL);
 448:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 449:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* this is the first fragment we ever received for this ip datagram */
 450:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       ipr->p = new_p;
 451:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 452:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 453:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 454:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* At this point, the validation part begins: */
 455:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* If we already received the last fragment */
 456:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (is_last || ((ipr->flags & IP_REASS_FLAG_LASTFRAG) != 0)) {
 457:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* and had no holes so far */
 458:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (valid) {
 459:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* then check if the rest of the fragments is here */
 460:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* Check if the queue starts with the first datagram */
 461:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if ((ipr->p == NULL) || (((struct ip_reass_helper *)ipr->p->payload)->start != 0)) {
 462:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         valid = 0;
ARM GAS  /tmp/ccahK8IF.s 			page 18


 463:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       } else {
 464:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* and check that there are no holes after this datagram */
 465:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         iprh_prev = iprh;
 466:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         q = iprh->next_pbuf;
 467:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         while (q != NULL) {
 468:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           iprh = (struct ip_reass_helper *)q->payload;
 469:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           if (iprh_prev->end != iprh->start) {
 470:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****             valid = 0;
 471:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****             break;
 472:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           }
 473:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           iprh_prev = iprh;
 474:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           q = iprh->next_pbuf;
 475:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 476:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* if still valid, all fragments are received
 477:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****          * (because to the MF==0 already arrived */
 478:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (valid) {
 479:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           LWIP_ASSERT("sanity check", ipr->p != NULL);
 480:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           LWIP_ASSERT("sanity check",
 481:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                       ((struct ip_reass_helper *)ipr->p->payload) != iprh);
 482:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           LWIP_ASSERT("validate_datagram:next_pbuf!=NULL",
 483:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                       iprh->next_pbuf == NULL);
 484:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 485:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 486:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 487:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* If valid is 0 here, there are some fragments missing in the middle
 488:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * (since MF == 0 has already arrived). Such datagrams simply time out if
 489:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * no more fragments are received... */
 490:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     return valid ? IP_REASS_VALIDATE_TELEGRAM_FINISHED : IP_REASS_VALIDATE_PBUF_QUEUED;
 491:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 492:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* If we come here, not all fragments were received, yet! */
 493:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return IP_REASS_VALIDATE_PBUF_QUEUED; /* not yet valid! */
 494:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 495:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 496:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 497:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Reassembles incoming IP fragments into an IP datagram.
 498:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 499:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param p points to a pbuf chain of the fragment
 500:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @return NULL if reassembly is incomplete, ? otherwise
 501:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 502:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** struct pbuf *
 503:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip4_reass(struct pbuf *p)
 504:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 505:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *r;
 506:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_hdr *fraghdr;
 507:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reassdata *ipr;
 508:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reass_helper *iprh;
 509:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t offset, len, clen;
 510:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u8_t hlen;
 511:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int valid;
 512:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int is_last;
 513:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 514:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   IPFRAG_STATS_INC(ip_frag.recv);
 515:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   MIB2_STATS_INC(mib2.ipreasmreqds);
 516:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 517:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   fraghdr = (struct ip_hdr *)p->payload;
 518:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 519:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (IPH_HL_BYTES(fraghdr) != IP_HLEN) {
ARM GAS  /tmp/ccahK8IF.s 			page 19


 520:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: IP options currently not supported!\n"));
 521:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPFRAG_STATS_INC(ip_frag.err);
 522:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     goto nullreturn;
 523:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 524:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 525:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   offset = IPH_OFFSET_BYTES(fraghdr);
 526:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   len = lwip_ntohs(IPH_LEN(fraghdr));
 527:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   hlen = IPH_HL_BYTES(fraghdr);
 528:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (hlen > len) {
 529:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* invalid datagram */
 530:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     goto nullreturn;
 531:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 532:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   len = (u16_t)(len - hlen);
 533:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 534:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Check if we are allowed to enqueue more datagrams. */
 535:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   clen = pbuf_clen(p);
 536:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if ((ip_reass_pbufcount + clen) > IP_REASS_MAX_PBUFS) {
 537:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_FREE_OLDEST
 538:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (!ip_reass_remove_oldest_datagram(fraghdr, clen) ||
 539:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ((ip_reass_pbufcount + clen) > IP_REASS_MAX_PBUFS))
 540:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
 541:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     {
 542:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* No datagram could be freed and still too many pbufs enqueued */
 543:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: Overflow condition: pbufct=%d, clen=%d, MAX=%d\n",
 544:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                                    ip_reass_pbufcount, clen, IP_REASS_MAX_PBUFS));
 545:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       IPFRAG_STATS_INC(ip_frag.memerr);
 546:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* @todo: send ICMP time exceeded here? */
 547:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* drop this pbuf */
 548:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto nullreturn;
 549:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 550:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 551:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 552:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Look for the datagram the fragment belongs to in the current datagram queue,
 553:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    * remembering the previous in the queue for later dequeueing. */
 554:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   for (ipr = reassdatagrams; ipr != NULL; ipr = ipr->next) {
 555:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Check if the incoming fragment matches the one currently present
 556:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        in the reassembly buffer. If so, we proceed with copying the
 557:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        fragment into the buffer. */
 558:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (IP_ADDRESSES_AND_ID_MATCH(&ipr->iphdr, fraghdr)) {
 559:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: matching previous fragment ID=%"X16_F"\n",
 560:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                                    lwip_ntohs(IPH_ID(fraghdr))));
 561:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       IPFRAG_STATS_INC(ip_frag.cachehit);
 562:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       break;
 563:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 564:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 565:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 566:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (ipr == NULL) {
 567:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Enqueue a new datagram into the datagram queue */
 568:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ipr = ip_reass_enqueue_new_datagram(fraghdr, clen);
 569:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Bail if unable to enqueue */
 570:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (ipr == NULL) {
 571:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto nullreturn;
 572:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 573:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   } else {
 574:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (((lwip_ntohs(IPH_OFFSET(fraghdr)) & IP_OFFMASK) == 0) &&
 575:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ((lwip_ntohs(IPH_OFFSET(&ipr->iphdr)) & IP_OFFMASK) != 0)) {
 576:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* ipr->iphdr is not the header from the first fragment, but fraghdr is
ARM GAS  /tmp/ccahK8IF.s 			page 20


 577:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        * -> copy fraghdr into ipr->iphdr since we want to have the header
 578:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        * of the first fragment (for ICMP time exceeded and later, for copying
 579:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        * all options, if supported)*/
 580:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       SMEMCPY(&ipr->iphdr, fraghdr, IP_HLEN);
 581:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 582:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 583:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 584:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* At this point, we have either created a new entry or pointing
 585:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****    * to an existing one */
 586:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 587:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* check for 'no more fragments', and update queue entry*/
 588:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   is_last = (IPH_OFFSET(fraghdr) & PP_NTOHS(IP_MF)) == 0;
 589:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (is_last) {
 590:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     u16_t datagram_len = (u16_t)(offset + len);
 591:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if ((datagram_len < offset) || (datagram_len > (0xFFFF - IP_HLEN))) {
 592:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* u16_t overflow, cannot handle this */
 593:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto nullreturn_ipr;
 594:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 595:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 596:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* find the right place to insert this pbuf */
 597:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* @todo: trim pbufs if fragments are overlapping */
 598:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   valid = ip_reass_chain_frag_into_datagram_and_validate(ipr, p, is_last);
 599:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (valid == IP_REASS_VALIDATE_PBUF_DROPPED) {
 600:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     goto nullreturn_ipr;
 601:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 602:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* if we come here, the pbuf has been enqueued */
 603:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 604:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Track the current number of pbufs current 'in-flight', in order to limit
 605:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      the number of fragments that may be enqueued at any one time
 606:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      (overflow checked by testing against IP_REASS_MAX_PBUFS) */
 607:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount + clen);
 608:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (is_last) {
 609:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     u16_t datagram_len = (u16_t)(offset + len);
 610:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ipr->datagram_len = datagram_len;
 611:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ipr->flags |= IP_REASS_FLAG_LASTFRAG;
 612:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_DEBUGF(IP_REASS_DEBUG,
 613:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                 ("ip4_reass: last fragment seen, total len %"S16_F"\n",
 614:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                  ipr->datagram_len));
 615:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 616:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 617:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (valid == IP_REASS_VALIDATE_TELEGRAM_FINISHED) {
 618:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     struct ip_reassdata *ipr_prev;
 619:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* the totally last fragment (flag more fragments = 0) was received at least
 620:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * once AND all fragments are received */
 621:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     u16_t datagram_len = (u16_t)(ipr->datagram_len + IP_HLEN);
 622:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 623:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* save the second pbuf before copying the header over the pointer */
 624:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     r = ((struct ip_reass_helper *)ipr->p->payload)->next_pbuf;
 625:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 626:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* copy the original ip header back to the first pbuf */
 627:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     fraghdr = (struct ip_hdr *)(ipr->p->payload);
 628:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     SMEMCPY(fraghdr, &ipr->iphdr, IP_HLEN);
 629:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_LEN_SET(fraghdr, lwip_htons(datagram_len));
 630:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_OFFSET_SET(fraghdr, 0);
 631:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_CHKSUM_SET(fraghdr, 0);
 632:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* @todo: do we need to set/calculate the correct checksum? */
 633:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if CHECKSUM_GEN_IP
ARM GAS  /tmp/ccahK8IF.s 			page 21


 634:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IF__NETIF_CHECKSUM_ENABLED(ip_current_input_netif(), NETIF_CHECKSUM_GEN_IP) {
 635:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       IPH_CHKSUM_SET(fraghdr, inet_chksum(fraghdr, IP_HLEN));
 636:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 637:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* CHECKSUM_GEN_IP */
 638:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 639:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     p = ipr->p;
 640:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 641:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* chain together the pbufs contained within the reass_data list. */
 642:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     while (r != NULL) {
 643:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       iprh = (struct ip_reass_helper *)r->payload;
 644:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 645:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* hide the ip header for every succeeding fragment */
 646:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbuf_remove_header(r, IP_HLEN);
 647:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbuf_cat(p, r);
 648:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r = iprh->next_pbuf;
 649:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 650:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 651:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* find the previous entry in the linked list */
 652:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (ipr == reassdatagrams) {
 653:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       ipr_prev = NULL;
 654:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else {
 655:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       for (ipr_prev = reassdatagrams; ipr_prev != NULL; ipr_prev = ipr_prev->next) {
 656:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (ipr_prev->next == ipr) {
 657:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           break;
 658:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 659:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 660:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 661:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 662:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* release the sources allocate for the fragment queue entry */
 663:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_dequeue_datagram(ipr, ipr_prev);
 664:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 665:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* and adjust the number of pbufs currently queued for reassembly. */
 666:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     clen = pbuf_clen(p);
 667:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("ip_reass_pbufcount >= clen", ip_reass_pbufcount >= clen);
 668:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount - clen);
 669:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 670:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     MIB2_STATS_INC(mib2.ipreasmoks);
 671:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 672:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Return the pbuf chain */
 673:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     return p;
 674:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 675:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* the datagram is not (yet?) reassembled completely */
 676:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_DEBUGF(IP_REASS_DEBUG, ("ip_reass_pbufcount: %d out\n", ip_reass_pbufcount));
 677:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return NULL;
 678:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 679:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** nullreturn_ipr:
 680:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("ipr != NULL", ipr != NULL);
 681:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (ipr->p == NULL) {
 682:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* dropped pbuf after creating a new datagram entry: remove the entry, too */
 683:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("not firstalthough just enqueued", ipr == reassdatagrams);
 684:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_dequeue_datagram(ipr, NULL);
 685:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 686:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 687:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** nullreturn:
 688:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: nullreturn\n"));
 689:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   IPFRAG_STATS_INC(ip_frag.drop);
 690:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   pbuf_free(p);
ARM GAS  /tmp/ccahK8IF.s 			page 22


 691:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return NULL;
 692:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 693:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASSEMBLY */
 694:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 695:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_FRAG
 696:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if !LWIP_NETIF_TX_SINGLE_PBUF
 697:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /** Allocate a new struct pbuf_custom_ref */
 698:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static struct pbuf_custom_ref *
 699:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_frag_alloc_pbuf_custom_ref(void)
 700:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 701:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return (struct pbuf_custom_ref *)memp_malloc(MEMP_FRAG_PBUF);
 702:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 703:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 704:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /** Free a struct pbuf_custom_ref */
 705:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static void
 706:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip_frag_free_pbuf_custom_ref(struct pbuf_custom_ref *p)
 707:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 455              		.loc 1 707 0
 456              		.cfi_startproc
 457              		@ args = 0, pretend = 0, frame = 0
 458              		@ frame_needed = 0, uses_anonymous_args = 0
 459              	.LVL64:
 460 0000 10B5     		push	{r4, lr}
 461              	.LCFI3:
 462              		.cfi_def_cfa_offset 8
 463              		.cfi_offset 4, -8
 464              		.cfi_offset 14, -4
 708:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("p != NULL", p != NULL);
 465              		.loc 1 708 0
 466 0002 0446     		mov	r4, r0
 467 0004 20B1     		cbz	r0, .L48
 468              	.LVL65:
 469              	.L46:
 709:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   memp_free(MEMP_FRAG_PBUF, p);
 470              		.loc 1 709 0
 471 0006 2146     		mov	r1, r4
 472 0008 0520     		movs	r0, #5
 473 000a FFF7FEFF 		bl	memp_free
 474              	.LVL66:
 475 000e 10BD     		pop	{r4, pc}
 476              	.LVL67:
 477              	.L48:
 708:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("p != NULL", p != NULL);
 478              		.loc 1 708 0 discriminator 1
 479 0010 034B     		ldr	r3, .L49
 480 0012 4FF43172 		mov	r2, #708
 481 0016 0349     		ldr	r1, .L49+4
 482 0018 0348     		ldr	r0, .L49+8
 483              	.LVL68:
 484 001a FFF7FEFF 		bl	printf
 485              	.LVL69:
 486 001e F2E7     		b	.L46
 487              	.L50:
 488              		.align	2
 489              	.L49:
 490 0020 00000000 		.word	.LC0
 491 0024 00000000 		.word	.LC7
ARM GAS  /tmp/ccahK8IF.s 			page 23


 492 0028 54000000 		.word	.LC2
 493              		.cfi_endproc
 494              	.LFE166:
 496              		.section	.text.ipfrag_free_pbuf_custom,"ax",%progbits
 497              		.align	1
 498              		.syntax unified
 499              		.thumb
 500              		.thumb_func
 501              		.fpu fpv5-d16
 503              	ipfrag_free_pbuf_custom:
 504              	.LFB167:
 710:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 711:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 712:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /** Free-callback function to free a 'struct pbuf_custom_ref', called by
 713:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * pbuf_free. */
 714:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** static void
 715:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ipfrag_free_pbuf_custom(struct pbuf *p)
 716:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 505              		.loc 1 716 0
 506              		.cfi_startproc
 507              		@ args = 0, pretend = 0, frame = 0
 508              		@ frame_needed = 0, uses_anonymous_args = 0
 509              	.LVL70:
 510 0000 10B5     		push	{r4, lr}
 511              	.LCFI4:
 512              		.cfi_def_cfa_offset 8
 513              		.cfi_offset 4, -8
 514              		.cfi_offset 14, -4
 515              	.LVL71:
 717:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf_custom_ref *pcr = (struct pbuf_custom_ref *)p;
 718:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("pcr != NULL", pcr != NULL);
 516              		.loc 1 718 0
 517 0002 0446     		mov	r4, r0
 518 0004 38B1     		cbz	r0, .L55
 519              	.LVL72:
 520              	.L52:
 719:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("pcr == p", (void *)pcr == (void *)p);
 720:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (pcr->original != NULL) {
 521              		.loc 1 720 0
 522 0006 6069     		ldr	r0, [r4, #20]
 523 0008 08B1     		cbz	r0, .L53
 721:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbuf_free(pcr->original);
 524              		.loc 1 721 0
 525 000a FFF7FEFF 		bl	pbuf_free
 526              	.LVL73:
 527              	.L53:
 722:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 723:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ip_frag_free_pbuf_custom_ref(pcr);
 528              		.loc 1 723 0
 529 000e 2046     		mov	r0, r4
 530 0010 FFF7FEFF 		bl	ip_frag_free_pbuf_custom_ref
 531              	.LVL74:
 532 0014 10BD     		pop	{r4, pc}
 533              	.LVL75:
 534              	.L55:
 718:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ASSERT("pcr == p", (void *)pcr == (void *)p);
 535              		.loc 1 718 0 discriminator 1
ARM GAS  /tmp/ccahK8IF.s 			page 24


 536 0016 044B     		ldr	r3, .L56
 537 0018 40F2CE22 		movw	r2, #718
 538 001c 0349     		ldr	r1, .L56+4
 539 001e 0448     		ldr	r0, .L56+8
 540              	.LVL76:
 541 0020 FFF7FEFF 		bl	printf
 542              	.LVL77:
 543 0024 EFE7     		b	.L52
 544              	.L57:
 545 0026 00BF     		.align	2
 546              	.L56:
 547 0028 00000000 		.word	.LC0
 548 002c 00000000 		.word	.LC8
 549 0030 54000000 		.word	.LC2
 550              		.cfi_endproc
 551              	.LFE167:
 553              		.section	.text.ip_reass_chain_frag_into_datagram_and_validate,"ax",%progbits
 554              		.align	1
 555              		.syntax unified
 556              		.thumb
 557              		.thumb_func
 558              		.fpu fpv5-d16
 560              	ip_reass_chain_frag_into_datagram_and_validate:
 561              	.LFB163:
 345:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reass_helper *iprh, *iprh_tmp, *iprh_prev = NULL;
 562              		.loc 1 345 0
 563              		.cfi_startproc
 564              		@ args = 0, pretend = 0, frame = 0
 565              		@ frame_needed = 0, uses_anonymous_args = 0
 566              	.LVL78:
 567 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 568              	.LCFI5:
 569              		.cfi_def_cfa_offset 32
 570              		.cfi_offset 3, -32
 571              		.cfi_offset 4, -28
 572              		.cfi_offset 5, -24
 573              		.cfi_offset 6, -20
 574              		.cfi_offset 7, -16
 575              		.cfi_offset 8, -12
 576              		.cfi_offset 9, -8
 577              		.cfi_offset 14, -4
 578 0004 8046     		mov	r8, r0
 579 0006 0F46     		mov	r7, r1
 580 0008 9146     		mov	r9, r2
 581              	.LVL79:
 354:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   len = lwip_ntohs(IPH_LEN(fraghdr));
 582              		.loc 1 354 0
 583 000a 4C68     		ldr	r4, [r1, #4]
 584              	.LVL80:
 355:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   hlen = IPH_HL_BYTES(fraghdr);
 585              		.loc 1 355 0
 586 000c 6088     		ldrh	r0, [r4, #2]	@ unaligned
 587              	.LVL81:
 588 000e FFF7FEFF 		bl	lwip_htons
 589              	.LVL82:
 356:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (hlen > len) {
 590              		.loc 1 356 0
ARM GAS  /tmp/ccahK8IF.s 			page 25


 591 0012 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 592 0014 03F00F03 		and	r3, r3, #15
 593              	.LVL83:
 357:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* invalid datagram */
 594              		.loc 1 357 0
 595 0018 9B00     		lsls	r3, r3, #2
 596              	.LVL84:
 597 001a 9842     		cmp	r0, r3
 598 001c C0F0A480 		bcc	.L76
 361:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   offset = IPH_OFFSET_BYTES(fraghdr);
 599              		.loc 1 361 0
 600 0020 C01A     		subs	r0, r0, r3
 601              	.LVL85:
 602 0022 85B2     		uxth	r5, r0
 603              	.LVL86:
 362:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 604              		.loc 1 362 0
 605 0024 E088     		ldrh	r0, [r4, #6]	@ unaligned
 606 0026 FFF7FEFF 		bl	lwip_htons
 607              	.LVL87:
 608 002a C0F30C00 		ubfx	r0, r0, #0, #13
 609 002e C000     		lsls	r0, r0, #3
 610              	.LVL88:
 369:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh->next_pbuf = NULL;
 611              		.loc 1 369 0
 612 0030 7E68     		ldr	r6, [r7, #4]
 613              	.LVL89:
 370:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh->start = offset;
 614              		.loc 1 370 0
 615 0032 0023     		movs	r3, #0
 616 0034 3370     		strb	r3, [r6]
 617 0036 7370     		strb	r3, [r6, #1]
 618 0038 B370     		strb	r3, [r6, #2]
 619 003a F370     		strb	r3, [r6, #3]
 371:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iprh->end = (u16_t)(offset + len);
 620              		.loc 1 371 0
 621 003c B080     		strh	r0, [r6, #4]	@ unaligned
 372:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (iprh->end < offset) {
 622              		.loc 1 372 0
 623 003e 05EB000E 		add	lr, r5, r0
 624 0042 1FFA8EFE 		uxth	lr, lr
 625 0046 A6F806E0 		strh	lr, [r6, #6]	@ unaligned
 373:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* u16_t overflow, cannot handle this */
 626              		.loc 1 373 0
 627 004a 7045     		cmp	r0, lr
 628 004c 00F29080 		bhi	.L77
 380:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh_tmp = (struct ip_reass_helper *)q->payload;
 629              		.loc 1 380 0
 630 0050 D8F80410 		ldr	r1, [r8, #4]
 631              	.LVL90:
 351:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 632              		.loc 1 351 0
 633 0054 0125     		movs	r5, #1
 634              	.LVL91:
 346:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *q;
 635              		.loc 1 346 0
 636 0056 1C46     		mov	r4, r3
ARM GAS  /tmp/ccahK8IF.s 			page 26


 637              	.LVL92:
 380:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh_tmp = (struct ip_reass_helper *)q->payload;
 638              		.loc 1 380 0
 639 0058 36E0     		b	.L60
 640              	.LVL93:
 641              	.L92:
 384:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (iprh_prev != NULL) {
 642              		.loc 1 384 0
 643 005a 3160     		str	r1, [r6]	@ unaligned
 385:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         /* not the fragment with the lowest offset */
 644              		.loc 1 385 0
 645 005c 64B3     		cbz	r4, .L62
 388:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* fragment overlaps with previous or following, throw away */
 646              		.loc 1 388 0
 647 005e E288     		ldrh	r2, [r4, #6]	@ unaligned
 648 0060 9042     		cmp	r0, r2
 649 0062 C0F08980 		bcc	.L78
 388:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* fragment overlaps with previous or following, throw away */
 650              		.loc 1 388 0 is_stmt 0 discriminator 1
 651 0066 9B88     		ldrh	r3, [r3, #4]	@ unaligned
 652              	.LVL94:
 653 0068 9E45     		cmp	lr, r3
 654 006a 00F28980 		bhi	.L79
 393:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (iprh_prev->end != iprh->start) {
 655              		.loc 1 393 0 is_stmt 1
 656 006e 2760     		str	r7, [r4]	@ unaligned
 394:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* There is a fragment missing between the current
 657              		.loc 1 394 0
 658 0070 B388     		ldrh	r3, [r6, #4]	@ unaligned
 659 0072 9A42     		cmp	r2, r3
 660 0074 00D0     		beq	.L63
 397:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 661              		.loc 1 397 0
 662 0076 0025     		movs	r5, #0
 663              	.LVL95:
 664              	.L63:
 433:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (iprh_prev != NULL) {
 665              		.loc 1 433 0
 666 0078 0029     		cmp	r1, #0
 667 007a 37D0     		beq	.L91
 668              	.LVL96:
 669              	.L66:
 456:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* and had no holes so far */
 670              		.loc 1 456 0
 671 007c B9F1000F 		cmp	r9, #0
 672 0080 05D1     		bne	.L70
 456:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* and had no holes so far */
 673              		.loc 1 456 0 is_stmt 0 discriminator 1
 674 0082 98F81E30 		ldrb	r3, [r8, #30]	@ zero_extendqisi2
 675 0086 13F0010F 		tst	r3, #1
 676 008a 00F08980 		beq	.L86
 677              	.L70:
 458:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* then check if the rest of the fragments is here */
 678              		.loc 1 458 0 is_stmt 1
 679 008e 002D     		cmp	r5, #0
 680 0090 67D0     		beq	.L71
 461:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         valid = 0;
ARM GAS  /tmp/ccahK8IF.s 			page 27


 681              		.loc 1 461 0
 682 0092 D8F80430 		ldr	r3, [r8, #4]
 683 0096 002B     		cmp	r3, #0
 684 0098 60D0     		beq	.L87
 461:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         valid = 0;
 685              		.loc 1 461 0 is_stmt 0 discriminator 1
 686 009a 5868     		ldr	r0, [r3, #4]
 687 009c 8388     		ldrh	r3, [r0, #4]	@ unaligned
 688 009e 002B     		cmp	r3, #0
 689 00a0 5ED1     		bne	.L88
 690              	.LVL97:
 466:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         while (q != NULL) {
 691              		.loc 1 466 0 is_stmt 1
 692 00a2 3268     		ldr	r2, [r6]	@ unaligned
 693              	.LVL98:
 694              	.L72:
 467:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           iprh = (struct ip_reass_helper *)q->payload;
 695              		.loc 1 467 0
 696 00a4 002A     		cmp	r2, #0
 697 00a6 44D0     		beq	.L73
 468:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           if (iprh_prev->end != iprh->start) {
 698              		.loc 1 468 0
 699 00a8 5368     		ldr	r3, [r2, #4]
 700              	.LVL99:
 469:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****             valid = 0;
 701              		.loc 1 469 0
 702 00aa F188     		ldrh	r1, [r6, #6]	@ unaligned
 703 00ac 9A88     		ldrh	r2, [r3, #4]	@ unaligned
 704              	.LVL100:
 705 00ae 9142     		cmp	r1, r2
 706 00b0 3DD1     		bne	.L89
 707              	.LVL101:
 474:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 708              		.loc 1 474 0
 709 00b2 1A68     		ldr	r2, [r3]	@ unaligned
 710              	.LVL102:
 468:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           if (iprh_prev->end != iprh->start) {
 711              		.loc 1 468 0
 712 00b4 1E46     		mov	r6, r3
 713 00b6 F5E7     		b	.L72
 714              	.LVL103:
 715              	.L62:
 401:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* fragment overlaps with following, throw away */
 716              		.loc 1 401 0
 717 00b8 9B88     		ldrh	r3, [r3, #4]	@ unaligned
 718              	.LVL104:
 719 00ba 9E45     		cmp	lr, r3
 720 00bc 64D8     		bhi	.L81
 407:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 721              		.loc 1 407 0
 722 00be C8F80470 		str	r7, [r8, #4]
 723 00c2 D9E7     		b	.L63
 724              	.LVL105:
 725              	.L64:
 428:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh_prev = iprh_tmp;
 726              		.loc 1 428 0
 727 00c4 1968     		ldr	r1, [r3]	@ unaligned
ARM GAS  /tmp/ccahK8IF.s 			page 28


 728              	.LVL106:
 429:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 729              		.loc 1 429 0
 730 00c6 1C46     		mov	r4, r3
 731              	.LVL107:
 732              	.L60:
 380:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iprh_tmp = (struct ip_reass_helper *)q->payload;
 733              		.loc 1 380 0 discriminator 1
 734 00c8 0029     		cmp	r1, #0
 735 00ca D5D0     		beq	.L63
 381:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (iprh->start < iprh_tmp->start) {
 736              		.loc 1 381 0
 737 00cc 4B68     		ldr	r3, [r1, #4]
 738              	.LVL108:
 382:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* the new pbuf should be inserted before this */
 739              		.loc 1 382 0
 740 00ce 9A88     		ldrh	r2, [r3, #4]	@ unaligned
 741 00d0 9042     		cmp	r0, r2
 742 00d2 C2D3     		bcc	.L92
 410:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* received the same datagram twice: no need to keep the datagram */
 743              		.loc 1 410 0
 744 00d4 9042     		cmp	r0, r2
 745 00d6 5BD0     		beq	.L82
 414:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* overlap: no need to keep the new datagram */
 746              		.loc 1 414 0
 747 00d8 D988     		ldrh	r1, [r3, #6]	@ unaligned
 748              	.LVL109:
 749 00da 8842     		cmp	r0, r1
 750 00dc 5CD3     		bcc	.L83
 420:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (iprh_prev->end != iprh_tmp->start) {
 751              		.loc 1 420 0
 752 00de 002C     		cmp	r4, #0
 753 00e0 F0D0     		beq	.L64
 421:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           /* There is a fragment missing between the current
 754              		.loc 1 421 0
 755 00e2 E188     		ldrh	r1, [r4, #6]	@ unaligned
 756 00e4 8A42     		cmp	r2, r1
 757 00e6 EDD0     		beq	.L64
 424:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 758              		.loc 1 424 0
 759 00e8 0025     		movs	r5, #0
 760              	.LVL110:
 761 00ea EBE7     		b	.L64
 762              	.LVL111:
 763              	.L91:
 434:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* this is (for now), the fragment with the highest offset:
 764              		.loc 1 434 0
 765 00ec 94B1     		cbz	r4, .L67
 438:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 766              		.loc 1 438 0
 767 00ee E288     		ldrh	r2, [r4, #6]	@ unaligned
 768 00f0 B388     		ldrh	r3, [r6, #4]	@ unaligned
 769 00f2 9A42     		cmp	r2, r3
 770 00f4 06D8     		bhi	.L93
 771              	.LVL112:
 772              	.L68:
 440:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (iprh_prev->end != iprh->start) {
ARM GAS  /tmp/ccahK8IF.s 			page 29


 773              		.loc 1 440 0
 774 00f6 2760     		str	r7, [r4]	@ unaligned
 441:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         valid = 0;
 775              		.loc 1 441 0
 776 00f8 E288     		ldrh	r2, [r4, #6]	@ unaligned
 777 00fa B388     		ldrh	r3, [r6, #4]	@ unaligned
 778 00fc 9A42     		cmp	r2, r3
 779 00fe BDD0     		beq	.L66
 442:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 780              		.loc 1 442 0
 781 0100 0025     		movs	r5, #0
 782              	.LVL113:
 783 0102 BBE7     		b	.L66
 784              	.LVL114:
 785              	.L93:
 438:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 786              		.loc 1 438 0 discriminator 1
 787 0104 284B     		ldr	r3, .L95
 788 0106 4FF4DB72 		mov	r2, #438
 789 010a 2849     		ldr	r1, .L95+4
 790              	.LVL115:
 791 010c 2848     		ldr	r0, .L95+8
 792              	.LVL116:
 793 010e FFF7FEFF 		bl	printf
 794              	.LVL117:
 795 0112 F0E7     		b	.L68
 796              	.LVL118:
 797              	.L67:
 446:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                   ipr->p == NULL);
 798              		.loc 1 446 0
 799 0114 D8F80430 		ldr	r3, [r8, #4]
 800 0118 33B1     		cbz	r3, .L69
 446:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                   ipr->p == NULL);
 801              		.loc 1 446 0 is_stmt 0 discriminator 1
 802 011a 234B     		ldr	r3, .L95
 803 011c 40F2BF12 		movw	r2, #447
 804 0120 2449     		ldr	r1, .L95+12
 805              	.LVL119:
 806 0122 2348     		ldr	r0, .L95+8
 807              	.LVL120:
 808 0124 FFF7FEFF 		bl	printf
 809              	.LVL121:
 810              	.L69:
 450:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 811              		.loc 1 450 0 is_stmt 1
 812 0128 C8F80470 		str	r7, [r8, #4]
 813 012c A6E7     		b	.L66
 814              	.LVL122:
 815              	.L89:
 468:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           if (iprh_prev->end != iprh->start) {
 816              		.loc 1 468 0
 817 012e 1E46     		mov	r6, r3
 818              	.LVL123:
 470:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****             break;
 819              		.loc 1 470 0
 820 0130 0025     		movs	r5, #0
 821              	.LVL124:
ARM GAS  /tmp/ccahK8IF.s 			page 30


 822              	.L73:
 478:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           LWIP_ASSERT("sanity check", ipr->p != NULL);
 823              		.loc 1 478 0
 824 0132 B5B1     		cbz	r5, .L71
 480:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                       ((struct ip_reass_helper *)ipr->p->payload) != iprh);
 825              		.loc 1 480 0
 826 0134 8642     		cmp	r6, r0
 827 0136 09D0     		beq	.L94
 828              	.L75:
 482:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                       iprh->next_pbuf == NULL);
 829              		.loc 1 482 0
 830 0138 3368     		ldr	r3, [r6]	@ unaligned
 831 013a 93B1     		cbz	r3, .L71
 482:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                       iprh->next_pbuf == NULL);
 832              		.loc 1 482 0 is_stmt 0 discriminator 1
 833 013c 1A4B     		ldr	r3, .L95
 834 013e 40F2E312 		movw	r2, #483
 835 0142 1D49     		ldr	r1, .L95+16
 836 0144 1A48     		ldr	r0, .L95+8
 837 0146 FFF7FEFF 		bl	printf
 838              	.LVL125:
 839 014a 0AE0     		b	.L71
 840              	.L94:
 480:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                       ((struct ip_reass_helper *)ipr->p->payload) != iprh);
 841              		.loc 1 480 0 is_stmt 1 discriminator 1
 842 014c 164B     		ldr	r3, .L95
 843 014e 40F2E112 		movw	r2, #481
 844 0152 1A49     		ldr	r1, .L95+20
 845 0154 1648     		ldr	r0, .L95+8
 846 0156 FFF7FEFF 		bl	printf
 847              	.LVL126:
 848 015a EDE7     		b	.L75
 849              	.LVL127:
 850              	.L87:
 462:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       } else {
 851              		.loc 1 462 0
 852 015c 0025     		movs	r5, #0
 853              	.LVL128:
 854 015e 00E0     		b	.L71
 855              	.LVL129:
 856              	.L88:
 857 0160 0025     		movs	r5, #0
 858              	.LVL130:
 859              	.L71:
 490:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 860              		.loc 1 490 0
 861 0162 2846     		mov	r0, r5
 862 0164 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 863              	.LVL131:
 864              	.L76:
 359:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 865              		.loc 1 359 0
 866 0168 4FF0FF30 		mov	r0, #-1
 867              	.LVL132:
 868 016c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 869              	.LVL133:
 870              	.L77:
ARM GAS  /tmp/ccahK8IF.s 			page 31


 375:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 871              		.loc 1 375 0
 872 0170 4FF0FF30 		mov	r0, #-1
 873              	.LVL134:
 874 0174 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 875              	.LVL135:
 876              	.L78:
 390:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 877              		.loc 1 390 0
 878 0178 4FF0FF30 		mov	r0, #-1
 879              	.LVL136:
 880 017c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 881              	.LVL137:
 882              	.L79:
 883 0180 4FF0FF30 		mov	r0, #-1
 884              	.LVL138:
 885 0184 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 886              	.LVL139:
 887              	.L81:
 403:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         }
 888              		.loc 1 403 0
 889 0188 4FF0FF30 		mov	r0, #-1
 890              	.LVL140:
 891 018c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 892              	.LVL141:
 893              	.L82:
 412:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_CHECK_OVERLAP
 894              		.loc 1 412 0
 895 0190 4FF0FF30 		mov	r0, #-1
 896              	.LVL142:
 897 0194 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 898              	.LVL143:
 899              	.L83:
 416:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_CHECK_OVERLAP */
 900              		.loc 1 416 0
 901 0198 4FF0FF30 		mov	r0, #-1
 902              	.LVL144:
 903 019c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 904              	.LVL145:
 905              	.L86:
 493:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 906              		.loc 1 493 0
 907 01a0 4846     		mov	r0, r9
 494:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 908              		.loc 1 494 0
 909 01a2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 910              	.LVL146:
 911              	.L96:
 912 01a6 00BF     		.align	2
 913              	.L95:
 914 01a8 00000000 		.word	.LC0
 915 01ac 00000000 		.word	.LC9
 916 01b0 54000000 		.word	.LC2
 917 01b4 20000000 		.word	.LC10
 918 01b8 68000000 		.word	.LC12
 919 01bc 58000000 		.word	.LC11
 920              		.cfi_endproc
ARM GAS  /tmp/ccahK8IF.s 			page 32


 921              	.LFE163:
 923              		.section	.text.ip_frag_alloc_pbuf_custom_ref,"ax",%progbits
 924              		.align	1
 925              		.syntax unified
 926              		.thumb
 927              		.thumb_func
 928              		.fpu fpv5-d16
 930              	ip_frag_alloc_pbuf_custom_ref:
 931              	.LFB165:
 700:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return (struct pbuf_custom_ref *)memp_malloc(MEMP_FRAG_PBUF);
 932              		.loc 1 700 0
 933              		.cfi_startproc
 934              		@ args = 0, pretend = 0, frame = 0
 935              		@ frame_needed = 0, uses_anonymous_args = 0
 936 0000 08B5     		push	{r3, lr}
 937              	.LCFI6:
 938              		.cfi_def_cfa_offset 8
 939              		.cfi_offset 3, -8
 940              		.cfi_offset 14, -4
 701:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 941              		.loc 1 701 0
 942 0002 0520     		movs	r0, #5
 943 0004 FFF7FEFF 		bl	memp_malloc
 944              	.LVL147:
 702:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 945              		.loc 1 702 0
 946 0008 08BD     		pop	{r3, pc}
 947              		.cfi_endproc
 948              	.LFE165:
 950              		.section	.text.ip_reass_enqueue_new_datagram,"ax",%progbits
 951              		.align	1
 952              		.syntax unified
 953              		.thumb
 954              		.thumb_func
 955              		.fpu fpv5-d16
 957              	ip_reass_enqueue_new_datagram:
 958              	.LFB161:
 279:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reassdata *ipr;
 959              		.loc 1 279 0
 960              		.cfi_startproc
 961              		@ args = 0, pretend = 0, frame = 0
 962              		@ frame_needed = 0, uses_anonymous_args = 0
 963              	.LVL148:
 964 0000 70B5     		push	{r4, r5, r6, lr}
 965              	.LCFI7:
 966              		.cfi_def_cfa_offset 16
 967              		.cfi_offset 4, -16
 968              		.cfi_offset 5, -12
 969              		.cfi_offset 6, -8
 970              		.cfi_offset 14, -4
 971 0002 0546     		mov	r5, r0
 972 0004 0E46     		mov	r6, r1
 286:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (ipr == NULL) {
 973              		.loc 1 286 0
 974 0006 0420     		movs	r0, #4
 975              	.LVL149:
 976 0008 FFF7FEFF 		bl	memp_malloc
ARM GAS  /tmp/ccahK8IF.s 			page 33


 977              	.LVL150:
 287:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_FREE_OLDEST
 978              		.loc 1 287 0
 979 000c 0446     		mov	r4, r0
 980 000e B0B1     		cbz	r0, .L104
 981              	.LVL151:
 982              	.L100:
 300:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ipr->timer = IP_REASS_MAXAGE;
 983              		.loc 1 300 0
 984 0010 2022     		movs	r2, #32
 985 0012 0021     		movs	r1, #0
 986 0014 2046     		mov	r0, r4
 987 0016 FFF7FEFF 		bl	memset
 988              	.LVL152:
 301:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 989              		.loc 1 301 0
 990 001a 0F23     		movs	r3, #15
 991 001c E377     		strb	r3, [r4, #31]
 304:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   reassdatagrams = ipr;
 992              		.loc 1 304 0
 993 001e 0F4B     		ldr	r3, .L106
 994 0020 1A68     		ldr	r2, [r3]
 995 0022 2260     		str	r2, [r4]
 305:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* copy the ip header for later tests and input */
 996              		.loc 1 305 0
 997 0024 1C60     		str	r4, [r3]
 308:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return ipr;
 998              		.loc 1 308 0
 999 0026 2A68     		ldr	r2, [r5]	@ unaligned
 1000 0028 6E68     		ldr	r6, [r5, #4]	@ unaligned
 1001              	.LVL153:
 1002 002a A868     		ldr	r0, [r5, #8]	@ unaligned
 1003 002c E968     		ldr	r1, [r5, #12]	@ unaligned
 1004 002e A260     		str	r2, [r4, #8]	@ unaligned
 1005 0030 E660     		str	r6, [r4, #12]	@ unaligned
 1006 0032 2061     		str	r0, [r4, #16]	@ unaligned
 1007 0034 6161     		str	r1, [r4, #20]	@ unaligned
 1008 0036 2A69     		ldr	r2, [r5, #16]	@ unaligned
 1009 0038 A261     		str	r2, [r4, #24]	@ unaligned
 1010              	.L99:
 310:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1011              		.loc 1 310 0
 1012 003a 2046     		mov	r0, r4
 1013 003c 70BD     		pop	{r4, r5, r6, pc}
 1014              	.LVL154:
 1015              	.L104:
 289:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       ipr = (struct ip_reassdata *)memp_malloc(MEMP_REASSDATA);
 1016              		.loc 1 289 0
 1017 003e 3146     		mov	r1, r6
 1018 0040 2846     		mov	r0, r5
 1019              	.LVL155:
 1020 0042 FFF7FEFF 		bl	ip_reass_remove_oldest_datagram
 1021              	.LVL156:
 1022 0046 8642     		cmp	r6, r0
 1023 0048 02DD     		ble	.L105
 1024              	.L101:
 292:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
ARM GAS  /tmp/ccahK8IF.s 			page 34


 1025              		.loc 1 292 0
 1026 004a 002C     		cmp	r4, #0
 1027 004c E0D1     		bne	.L100
 1028 004e F4E7     		b	.L99
 1029              	.L105:
 290:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 1030              		.loc 1 290 0
 1031 0050 0420     		movs	r0, #4
 1032 0052 FFF7FEFF 		bl	memp_malloc
 1033              	.LVL157:
 1034 0056 0446     		mov	r4, r0
 1035              	.LVL158:
 1036 0058 F7E7     		b	.L101
 1037              	.L107:
 1038 005a 00BF     		.align	2
 1039              	.L106:
 1040 005c 00000000 		.word	.LANCHOR0
 1041              		.cfi_endproc
 1042              	.LFE161:
 1044              		.section	.text.ip_reass_tmr,"ax",%progbits
 1045              		.align	1
 1046              		.global	ip_reass_tmr
 1047              		.syntax unified
 1048              		.thumb
 1049              		.thumb_func
 1050              		.fpu fpv5-d16
 1052              	ip_reass_tmr:
 1053              	.LFB158:
 129:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_reassdata *r, *prev = NULL;
 1054              		.loc 1 129 0
 1055              		.cfi_startproc
 1056              		@ args = 0, pretend = 0, frame = 0
 1057              		@ frame_needed = 0, uses_anonymous_args = 0
 1058 0000 38B5     		push	{r3, r4, r5, lr}
 1059              	.LCFI8:
 1060              		.cfi_def_cfa_offset 16
 1061              		.cfi_offset 3, -16
 1062              		.cfi_offset 4, -12
 1063              		.cfi_offset 5, -8
 1064              		.cfi_offset 14, -4
 1065              	.LVL159:
 132:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   while (r != NULL) {
 1066              		.loc 1 132 0
 1067 0002 094B     		ldr	r3, .L115
 1068 0004 1868     		ldr	r0, [r3]
 1069              	.LVL160:
 130:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1070              		.loc 1 130 0
 1071 0006 0024     		movs	r4, #0
 133:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Decrement the timer. Once it reaches 0,
 1072              		.loc 1 133 0
 1073 0008 04E0     		b	.L109
 1074              	.LVL161:
 1075              	.L110:
 1076              	.LBB4:
 147:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* free the helper struct and all enqueued pbufs */
 1077              		.loc 1 147 0
ARM GAS  /tmp/ccahK8IF.s 			page 35


 1078 000a 0568     		ldr	r5, [r0]
 1079              	.LVL162:
 149:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 1080              		.loc 1 149 0
 1081 000c 2146     		mov	r1, r4
 1082 000e FFF7FEFF 		bl	ip_reass_free_complete_datagram
 1083              	.LVL163:
 147:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* free the helper struct and all enqueued pbufs */
 1084              		.loc 1 147 0
 1085 0012 2846     		mov	r0, r5
 1086              	.LVL164:
 1087              	.L109:
 1088              	.LBE4:
 133:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Decrement the timer. Once it reaches 0,
 1089              		.loc 1 133 0
 1090 0014 38B1     		cbz	r0, .L114
 136:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r->timer--;
 1091              		.loc 1 136 0
 1092 0016 C37F     		ldrb	r3, [r0, #31]	@ zero_extendqisi2
 1093 0018 002B     		cmp	r3, #0
 1094 001a F6D0     		beq	.L110
 137:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip_reass_tmr: timer dec %"U16_F"\n", (u16_t)r->timer));
 1095              		.loc 1 137 0
 1096 001c 013B     		subs	r3, r3, #1
 1097 001e C377     		strb	r3, [r0, #31]
 1098              	.LVL165:
 139:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r = r->next;
 1099              		.loc 1 139 0
 1100 0020 0446     		mov	r4, r0
 140:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else {
 1101              		.loc 1 140 0
 1102 0022 0068     		ldr	r0, [r0]
 1103              	.LVL166:
 1104 0024 F6E7     		b	.L109
 1105              	.L114:
 152:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1106              		.loc 1 152 0
 1107 0026 38BD     		pop	{r3, r4, r5, pc}
 1108              	.LVL167:
 1109              	.L116:
 1110              		.align	2
 1111              	.L115:
 1112 0028 00000000 		.word	.LANCHOR0
 1113              		.cfi_endproc
 1114              	.LFE158:
 1116              		.section	.text.ip4_reass,"ax",%progbits
 1117              		.align	1
 1118              		.global	ip4_reass
 1119              		.syntax unified
 1120              		.thumb
 1121              		.thumb_func
 1122              		.fpu fpv5-d16
 1124              	ip4_reass:
 1125              	.LFB164:
 504:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *r;
 1126              		.loc 1 504 0
 1127              		.cfi_startproc
ARM GAS  /tmp/ccahK8IF.s 			page 36


 1128              		@ args = 0, pretend = 0, frame = 0
 1129              		@ frame_needed = 0, uses_anonymous_args = 0
 1130              	.LVL168:
 1131 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1132              	.LCFI9:
 1133              		.cfi_def_cfa_offset 32
 1134              		.cfi_offset 3, -32
 1135              		.cfi_offset 4, -28
 1136              		.cfi_offset 5, -24
 1137              		.cfi_offset 6, -20
 1138              		.cfi_offset 7, -16
 1139              		.cfi_offset 8, -12
 1140              		.cfi_offset 9, -8
 1141              		.cfi_offset 14, -4
 1142 0004 8046     		mov	r8, r0
 517:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1143              		.loc 1 517 0
 1144 0006 4568     		ldr	r5, [r0, #4]
 1145              	.LVL169:
 519:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: IP options currently not supported!\n"));
 1146              		.loc 1 519 0
 1147 0008 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 1148 000a 03F00F03 		and	r3, r3, #15
 1149 000e 052B     		cmp	r3, #5
 1150 0010 40F0D480 		bne	.L118
 525:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   len = lwip_ntohs(IPH_LEN(fraghdr));
 1151              		.loc 1 525 0
 1152 0014 E888     		ldrh	r0, [r5, #6]	@ unaligned
 1153              	.LVL170:
 1154 0016 FFF7FEFF 		bl	lwip_htons
 1155              	.LVL171:
 1156 001a C0F30C00 		ubfx	r0, r0, #0, #13
 1157 001e C700     		lsls	r7, r0, #3
 1158              	.LVL172:
 526:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   hlen = IPH_HL_BYTES(fraghdr);
 1159              		.loc 1 526 0
 1160 0020 6888     		ldrh	r0, [r5, #2]	@ unaligned
 1161 0022 FFF7FEFF 		bl	lwip_htons
 1162              	.LVL173:
 527:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (hlen > len) {
 1163              		.loc 1 527 0
 1164 0026 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 1165 0028 03F00F03 		and	r3, r3, #15
 1166              	.LVL174:
 528:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* invalid datagram */
 1167              		.loc 1 528 0
 1168 002c 9B00     		lsls	r3, r3, #2
 1169              	.LVL175:
 1170 002e 9842     		cmp	r0, r3
 1171 0030 C0F0C480 		bcc	.L118
 532:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1172              		.loc 1 532 0
 1173 0034 C61A     		subs	r6, r0, r3
 1174 0036 B6B2     		uxth	r6, r6
 1175              	.LVL176:
 535:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if ((ip_reass_pbufcount + clen) > IP_REASS_MAX_PBUFS) {
 1176              		.loc 1 535 0
ARM GAS  /tmp/ccahK8IF.s 			page 37


 1177 0038 4046     		mov	r0, r8
 1178 003a FFF7FEFF 		bl	pbuf_clen
 1179              	.LVL177:
 1180 003e 8146     		mov	r9, r0
 1181              	.LVL178:
 536:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if IP_REASS_FREE_OLDEST
 1182              		.loc 1 536 0
 1183 0040 6F4B     		ldr	r3, .L148
 1184 0042 1B88     		ldrh	r3, [r3]
 1185 0044 0344     		add	r3, r3, r0
 1186 0046 0A2B     		cmp	r3, #10
 1187 0048 02DC     		bgt	.L141
 1188              	.LVL179:
 1189              	.L119:
 554:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Check if the incoming fragment matches the one currently present
 1190              		.loc 1 554 0
 1191 004a 6E4B     		ldr	r3, .L148+4
 1192 004c 1C68     		ldr	r4, [r3]
 1193              	.LVL180:
 1194 004e 0DE0     		b	.L120
 1195              	.LVL181:
 1196              	.L141:
 538:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ((ip_reass_pbufcount + clen) > IP_REASS_MAX_PBUFS))
 1197              		.loc 1 538 0
 1198 0050 0146     		mov	r1, r0
 1199 0052 2846     		mov	r0, r5
 1200              	.LVL182:
 1201 0054 FFF7FEFF 		bl	ip_reass_remove_oldest_datagram
 1202              	.LVL183:
 1203 0058 0028     		cmp	r0, #0
 1204 005a 00F0AF80 		beq	.L118
 539:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASS_FREE_OLDEST */
 1205              		.loc 1 539 0 discriminator 1
 1206 005e 684B     		ldr	r3, .L148
 1207 0060 1B88     		ldrh	r3, [r3]
 1208 0062 4B44     		add	r3, r3, r9
 538:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ((ip_reass_pbufcount + clen) > IP_REASS_MAX_PBUFS))
 1209              		.loc 1 538 0 discriminator 1
 1210 0064 0A2B     		cmp	r3, #10
 1211 0066 F0DD     		ble	.L119
 1212 0068 A8E0     		b	.L118
 1213              	.LVL184:
 1214              	.L121:
 554:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Check if the incoming fragment matches the one currently present
 1215              		.loc 1 554 0 discriminator 2
 1216 006a 2468     		ldr	r4, [r4]
 1217              	.LVL185:
 1218              	.L120:
 554:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Check if the incoming fragment matches the one currently present
 1219              		.loc 1 554 0 is_stmt 0 discriminator 1
 1220 006c 5CB1     		cbz	r4, .L122
 558:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: matching previous fragment ID=%"X16_F"\n",
 1221              		.loc 1 558 0 is_stmt 1
 1222 006e 6269     		ldr	r2, [r4, #20]
 1223 0070 EB68     		ldr	r3, [r5, #12]	@ unaligned
 1224 0072 9A42     		cmp	r2, r3
 1225 0074 F9D1     		bne	.L121
ARM GAS  /tmp/ccahK8IF.s 			page 38


 558:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: matching previous fragment ID=%"X16_F"\n",
 1226              		.loc 1 558 0 is_stmt 0 discriminator 1
 1227 0076 A269     		ldr	r2, [r4, #24]
 1228 0078 2B69     		ldr	r3, [r5, #16]	@ unaligned
 1229 007a 9A42     		cmp	r2, r3
 1230 007c F5D1     		bne	.L121
 558:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_DEBUGF(IP_REASS_DEBUG, ("ip4_reass: matching previous fragment ID=%"X16_F"\n",
 1231              		.loc 1 558 0 discriminator 2
 1232 007e A289     		ldrh	r2, [r4, #12]
 1233 0080 AB88     		ldrh	r3, [r5, #4]	@ unaligned
 1234 0082 9A42     		cmp	r2, r3
 1235 0084 F1D1     		bne	.L121
 1236              	.L122:
 566:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Enqueue a new datagram into the datagram queue */
 1237              		.loc 1 566 0 is_stmt 1
 1238 0086 002C     		cmp	r4, #0
 1239 0088 4AD0     		beq	.L142
 574:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ((lwip_ntohs(IPH_OFFSET(&ipr->iphdr)) & IP_OFFMASK) != 0)) {
 1240              		.loc 1 574 0
 1241 008a E888     		ldrh	r0, [r5, #6]	@ unaligned
 1242 008c FFF7FEFF 		bl	lwip_htons
 1243              	.LVL186:
 1244 0090 C0F30C00 		ubfx	r0, r0, #0, #13
 1245 0094 0028     		cmp	r0, #0
 1246 0096 4BD0     		beq	.L143
 1247              	.L125:
 588:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (is_last) {
 1248              		.loc 1 588 0
 1249 0098 ED88     		ldrh	r5, [r5, #6]	@ unaligned
 1250              	.LVL187:
 1251 009a 05F02005 		and	r5, r5, #32
 1252 009e 002D     		cmp	r5, #0
 1253 00a0 0CBF     		ite	eq
 1254 00a2 0122     		moveq	r2, #1
 1255 00a4 0022     		movne	r2, #0
 1256              	.LVL188:
 589:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     u16_t datagram_len = (u16_t)(offset + len);
 1257              		.loc 1 589 0
 1258 00a6 07D1     		bne	.L126
 1259              	.LBB5:
 590:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if ((datagram_len < offset) || (datagram_len > (0xFFFF - IP_HLEN))) {
 1260              		.loc 1 590 0
 1261 00a8 BB19     		adds	r3, r7, r6
 1262 00aa 9BB2     		uxth	r3, r3
 1263              	.LVL189:
 591:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* u16_t overflow, cannot handle this */
 1264              		.loc 1 591 0
 1265 00ac 4FF6EB71 		movw	r1, #65515
 1266 00b0 8B42     		cmp	r3, r1
 1267 00b2 98BF     		it	ls
 1268 00b4 9F42     		cmpls	r7, r3
 1269 00b6 7ED8     		bhi	.L127
 1270              	.LVL190:
 1271              	.L126:
 1272              	.LBE5:
 598:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (valid == IP_REASS_VALIDATE_PBUF_DROPPED) {
 1273              		.loc 1 598 0
ARM GAS  /tmp/ccahK8IF.s 			page 39


 1274 00b8 4146     		mov	r1, r8
 1275 00ba 2046     		mov	r0, r4
 1276 00bc FFF7FEFF 		bl	ip_reass_chain_frag_into_datagram_and_validate
 1277              	.LVL191:
 599:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     goto nullreturn_ipr;
 1278              		.loc 1 599 0
 1279 00c0 B0F1FF3F 		cmp	r0, #-1
 1280 00c4 77D0     		beq	.L127
 607:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (is_last) {
 1281              		.loc 1 607 0
 1282 00c6 4E4B     		ldr	r3, .L148
 1283 00c8 1A88     		ldrh	r2, [r3]
 1284 00ca 9144     		add	r9, r9, r2
 1285 00cc A3F80090 		strh	r9, [r3]	@ movhi
 608:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     u16_t datagram_len = (u16_t)(offset + len);
 1286              		.loc 1 608 0
 1287 00d0 2DB9     		cbnz	r5, .L128
 1288              	.LBB6:
 609:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ipr->datagram_len = datagram_len;
 1289              		.loc 1 609 0
 1290 00d2 3E44     		add	r6, r6, r7
 1291              	.LVL192:
 610:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ipr->flags |= IP_REASS_FLAG_LASTFRAG;
 1292              		.loc 1 610 0
 1293 00d4 A683     		strh	r6, [r4, #28]	@ movhi
 611:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_DEBUGF(IP_REASS_DEBUG,
 1294              		.loc 1 611 0
 1295 00d6 A37F     		ldrb	r3, [r4, #30]	@ zero_extendqisi2
 1296 00d8 43F00103 		orr	r3, r3, #1
 1297 00dc A377     		strb	r3, [r4, #30]
 1298              	.LVL193:
 1299              	.L128:
 1300              	.LBE6:
 617:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     struct ip_reassdata *ipr_prev;
 1301              		.loc 1 617 0
 1302 00de 0128     		cmp	r0, #1
 1303 00e0 40F08B80 		bne	.L138
 1304              	.LBB7:
 621:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1305              		.loc 1 621 0
 1306 00e4 A08B     		ldrh	r0, [r4, #28]
 1307              	.LVL194:
 1308 00e6 1430     		adds	r0, r0, #20
 1309              	.LVL195:
 624:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1310              		.loc 1 624 0
 1311 00e8 6368     		ldr	r3, [r4, #4]
 1312 00ea 5E68     		ldr	r6, [r3, #4]
 1313 00ec 3568     		ldr	r5, [r6]	@ unaligned
 1314              	.LVL196:
 628:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_LEN_SET(fraghdr, lwip_htons(datagram_len));
 1315              		.loc 1 628 0
 1316 00ee 2346     		mov	r3, r4
 1317 00f0 53F8082F 		ldr	r2, [r3, #8]!	@ unaligned
 1318 00f4 D3F804E0 		ldr	lr, [r3, #4]	@ unaligned
 1319 00f8 9F68     		ldr	r7, [r3, #8]	@ unaligned
 1320              	.LVL197:
ARM GAS  /tmp/ccahK8IF.s 			page 40


 1321 00fa D968     		ldr	r1, [r3, #12]	@ unaligned
 1322 00fc 3260     		str	r2, [r6]	@ unaligned
 1323 00fe C6F804E0 		str	lr, [r6, #4]	@ unaligned
 1324 0102 B760     		str	r7, [r6, #8]	@ unaligned
 1325 0104 F160     		str	r1, [r6, #12]	@ unaligned
 1326 0106 1A69     		ldr	r2, [r3, #16]	@ unaligned
 1327 0108 3261     		str	r2, [r6, #16]	@ unaligned
 629:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_OFFSET_SET(fraghdr, 0);
 1328              		.loc 1 629 0
 1329 010a 80B2     		uxth	r0, r0
 1330 010c FFF7FEFF 		bl	lwip_htons
 1331              	.LVL198:
 1332 0110 7080     		strh	r0, [r6, #2]	@ unaligned
 630:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_CHKSUM_SET(fraghdr, 0);
 1333              		.loc 1 630 0
 1334 0112 0023     		movs	r3, #0
 1335 0114 B371     		strb	r3, [r6, #6]
 1336 0116 F371     		strb	r3, [r6, #7]
 631:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* @todo: do we need to set/calculate the correct checksum? */
 1337              		.loc 1 631 0
 1338 0118 B372     		strb	r3, [r6, #10]
 1339 011a F372     		strb	r3, [r6, #11]
 639:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1340              		.loc 1 639 0
 1341 011c 6768     		ldr	r7, [r4, #4]
 1342              	.LVL199:
 642:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       iprh = (struct ip_reass_helper *)r->payload;
 1343              		.loc 1 642 0
 1344 011e 25E0     		b	.L130
 1345              	.LVL200:
 1346              	.L142:
 1347              	.LBE7:
 568:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Bail if unable to enqueue */
 1348              		.loc 1 568 0
 1349 0120 4946     		mov	r1, r9
 1350 0122 2846     		mov	r0, r5
 1351 0124 FFF7FEFF 		bl	ip_reass_enqueue_new_datagram
 1352              	.LVL201:
 570:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto nullreturn;
 1353              		.loc 1 570 0
 1354 0128 0446     		mov	r4, r0
 1355 012a 0028     		cmp	r0, #0
 1356 012c B4D1     		bne	.L125
 1357 012e 45E0     		b	.L118
 1358              	.LVL202:
 1359              	.L143:
 575:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* ipr->iphdr is not the header from the first fragment, but fraghdr is
 1360              		.loc 1 575 0 discriminator 1
 1361 0130 E089     		ldrh	r0, [r4, #14]
 1362 0132 FFF7FEFF 		bl	lwip_htons
 1363              	.LVL203:
 574:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ((lwip_ntohs(IPH_OFFSET(&ipr->iphdr)) & IP_OFFMASK) != 0)) {
 1364              		.loc 1 574 0 discriminator 1
 1365 0136 C0F30C00 		ubfx	r0, r0, #0, #13
 1366 013a 0028     		cmp	r0, #0
 1367 013c ACD0     		beq	.L125
 580:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
ARM GAS  /tmp/ccahK8IF.s 			page 41


 1368              		.loc 1 580 0
 1369 013e 2A68     		ldr	r2, [r5]	@ unaligned
 1370 0140 D5F804E0 		ldr	lr, [r5, #4]	@ unaligned
 1371 0144 A868     		ldr	r0, [r5, #8]	@ unaligned
 1372 0146 E968     		ldr	r1, [r5, #12]	@ unaligned
 1373 0148 A260     		str	r2, [r4, #8]	@ unaligned
 1374 014a C4F80CE0 		str	lr, [r4, #12]	@ unaligned
 1375 014e 2061     		str	r0, [r4, #16]	@ unaligned
 1376 0150 6161     		str	r1, [r4, #20]	@ unaligned
 1377 0152 2A69     		ldr	r2, [r5, #16]	@ unaligned
 1378 0154 A261     		str	r2, [r4, #24]	@ unaligned
 1379 0156 9FE7     		b	.L125
 1380              	.LVL204:
 1381              	.L131:
 1382              	.LBB8:
 643:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1383              		.loc 1 643 0
 1384 0158 6E68     		ldr	r6, [r5, #4]
 1385              	.LVL205:
 646:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbuf_cat(p, r);
 1386              		.loc 1 646 0
 1387 015a 1421     		movs	r1, #20
 1388 015c 2846     		mov	r0, r5
 1389 015e FFF7FEFF 		bl	pbuf_remove_header
 1390              	.LVL206:
 647:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       r = iprh->next_pbuf;
 1391              		.loc 1 647 0
 1392 0162 2946     		mov	r1, r5
 1393 0164 3846     		mov	r0, r7
 1394 0166 FFF7FEFF 		bl	pbuf_cat
 1395              	.LVL207:
 648:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 1396              		.loc 1 648 0
 1397 016a 3568     		ldr	r5, [r6]	@ unaligned
 1398              	.LVL208:
 1399              	.L130:
 642:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       iprh = (struct ip_reass_helper *)r->payload;
 1400              		.loc 1 642 0
 1401 016c 002D     		cmp	r5, #0
 1402 016e F3D1     		bne	.L131
 652:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       ipr_prev = NULL;
 1403              		.loc 1 652 0
 1404 0170 244B     		ldr	r3, .L148+4
 1405 0172 1968     		ldr	r1, [r3]
 1406 0174 8C42     		cmp	r4, r1
 1407 0176 05D0     		beq	.L144
 1408              	.L133:
 1409              	.LVL209:
 655:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (ipr_prev->next == ipr) {
 1410              		.loc 1 655 0 discriminator 1
 1411 0178 29B1     		cbz	r1, .L132
 656:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****           break;
 1412              		.loc 1 656 0
 1413 017a 0B68     		ldr	r3, [r1]
 1414 017c 9C42     		cmp	r4, r3
 1415 017e 02D0     		beq	.L132
 655:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         if (ipr_prev->next == ipr) {
ARM GAS  /tmp/ccahK8IF.s 			page 42


 1416              		.loc 1 655 0
 1417 0180 1946     		mov	r1, r3
 1418              	.LVL210:
 1419 0182 F9E7     		b	.L133
 1420              	.L144:
 653:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     } else {
 1421              		.loc 1 653 0
 1422 0184 0021     		movs	r1, #0
 1423              	.L132:
 1424              	.LVL211:
 663:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1425              		.loc 1 663 0
 1426 0186 2046     		mov	r0, r4
 1427 0188 FFF7FEFF 		bl	ip_reass_dequeue_datagram
 1428              	.LVL212:
 666:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("ip_reass_pbufcount >= clen", ip_reass_pbufcount >= clen);
 1429              		.loc 1 666 0
 1430 018c 3846     		mov	r0, r7
 1431 018e FFF7FEFF 		bl	pbuf_clen
 1432              	.LVL213:
 1433 0192 0446     		mov	r4, r0
 1434              	.LVL214:
 667:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount - clen);
 1435              		.loc 1 667 0
 1436 0194 1A4B     		ldr	r3, .L148
 1437 0196 1B88     		ldrh	r3, [r3]
 1438 0198 9842     		cmp	r0, r3
 1439 019a 04D8     		bhi	.L145
 1440              	.LVL215:
 1441              	.L135:
 668:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1442              		.loc 1 668 0
 1443 019c 184B     		ldr	r3, .L148
 1444 019e 1888     		ldrh	r0, [r3]
 1445 01a0 001B     		subs	r0, r0, r4
 1446 01a2 1880     		strh	r0, [r3]	@ movhi
 673:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 1447              		.loc 1 673 0
 1448 01a4 0EE0     		b	.L117
 1449              	.LVL216:
 1450              	.L145:
 667:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_pbufcount = (u16_t)(ip_reass_pbufcount - clen);
 1451              		.loc 1 667 0 discriminator 1
 1452 01a6 184B     		ldr	r3, .L148+8
 1453 01a8 40F29B22 		movw	r2, #667
 1454 01ac 1749     		ldr	r1, .L148+12
 1455 01ae 1848     		ldr	r0, .L148+16
 1456              	.LVL217:
 1457 01b0 FFF7FEFF 		bl	printf
 1458              	.LVL218:
 1459 01b4 F2E7     		b	.L135
 1460              	.LVL219:
 1461              	.L127:
 1462              	.LBE8:
 680:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (ipr->p == NULL) {
 1463              		.loc 1 680 0
 1464 01b6 44B1     		cbz	r4, .L146
ARM GAS  /tmp/ccahK8IF.s 			page 43


 1465              	.L136:
 681:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* dropped pbuf after creating a new datagram entry: remove the entry, too */
 1466              		.loc 1 681 0
 1467 01b8 6368     		ldr	r3, [r4, #4]
 1468 01ba 73B1     		cbz	r3, .L147
 1469              	.LVL220:
 1470              	.L118:
 690:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return NULL;
 1471              		.loc 1 690 0
 1472 01bc 4046     		mov	r0, r8
 1473 01be FFF7FEFF 		bl	pbuf_free
 1474              	.LVL221:
 691:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 1475              		.loc 1 691 0
 1476 01c2 0027     		movs	r7, #0
 1477              	.LVL222:
 1478              	.L117:
 692:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* IP_REASSEMBLY */
 1479              		.loc 1 692 0
 1480 01c4 3846     		mov	r0, r7
 1481 01c6 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1482              	.LVL223:
 1483              	.L146:
 680:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (ipr->p == NULL) {
 1484              		.loc 1 680 0 discriminator 1
 1485 01ca 0F4B     		ldr	r3, .L148+8
 1486 01cc 4FF42A72 		mov	r2, #680
 1487 01d0 1049     		ldr	r1, .L148+20
 1488 01d2 0F48     		ldr	r0, .L148+16
 1489 01d4 FFF7FEFF 		bl	printf
 1490              	.LVL224:
 1491 01d8 EEE7     		b	.L136
 1492              	.L147:
 683:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_dequeue_datagram(ipr, NULL);
 1493              		.loc 1 683 0
 1494 01da 0A4B     		ldr	r3, .L148+4
 1495 01dc 1B68     		ldr	r3, [r3]
 1496 01de 9C42     		cmp	r4, r3
 1497 01e0 06D0     		beq	.L137
 683:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ip_reass_dequeue_datagram(ipr, NULL);
 1498              		.loc 1 683 0 is_stmt 0 discriminator 1
 1499 01e2 094B     		ldr	r3, .L148+8
 1500 01e4 40F2AB22 		movw	r2, #683
 1501 01e8 0B49     		ldr	r1, .L148+24
 1502 01ea 0948     		ldr	r0, .L148+16
 1503 01ec FFF7FEFF 		bl	printf
 1504              	.LVL225:
 1505              	.L137:
 684:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 1506              		.loc 1 684 0 is_stmt 1
 1507 01f0 0021     		movs	r1, #0
 1508 01f2 2046     		mov	r0, r4
 1509 01f4 FFF7FEFF 		bl	ip_reass_dequeue_datagram
 1510              	.LVL226:
 1511 01f8 E0E7     		b	.L118
 1512              	.LVL227:
 1513              	.L138:
ARM GAS  /tmp/ccahK8IF.s 			page 44


 677:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1514              		.loc 1 677 0
 1515 01fa 0027     		movs	r7, #0
 1516              	.LVL228:
 1517 01fc E2E7     		b	.L117
 1518              	.L149:
 1519 01fe 00BF     		.align	2
 1520              	.L148:
 1521 0200 00000000 		.word	.LANCHOR1
 1522 0204 00000000 		.word	.LANCHOR0
 1523 0208 00000000 		.word	.LC0
 1524 020c 00000000 		.word	.LC13
 1525 0210 54000000 		.word	.LC2
 1526 0214 1C000000 		.word	.LC14
 1527 0218 28000000 		.word	.LC15
 1528              		.cfi_endproc
 1529              	.LFE164:
 1531              		.section	.text.ip4_frag,"ax",%progbits
 1532              		.align	1
 1533              		.global	ip4_frag
 1534              		.syntax unified
 1535              		.thumb
 1536              		.thumb_func
 1537              		.fpu fpv5-d16
 1539              	ip4_frag:
 1540              	.LFB168:
 724:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 725:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* !LWIP_NETIF_TX_SINGLE_PBUF */
 726:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 727:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** /**
 728:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Fragment an IP datagram if too large for the netif.
 729:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 730:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * Chop the datagram in MTU sized chunks and send them in order
 731:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * by pointing PBUF_REFs into p.
 732:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 733:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param p ip packet to send
 734:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param netif the netif on which to send
 735:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @param dest destination ip address to which to send
 736:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  *
 737:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  * @return ERR_OK if sent successfully, err_t otherwise
 738:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****  */
 739:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** err_t
 740:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** ip4_frag(struct pbuf *p, struct netif *netif, const ip4_addr_t *dest)
 741:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** {
 1541              		.loc 1 741 0
 1542              		.cfi_startproc
 1543              		@ args = 0, pretend = 0, frame = 32
 1544              		@ frame_needed = 0, uses_anonymous_args = 0
 1545              	.LVL229:
 1546 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1547              	.LCFI10:
 1548              		.cfi_def_cfa_offset 36
 1549              		.cfi_offset 4, -36
 1550              		.cfi_offset 5, -32
 1551              		.cfi_offset 6, -28
 1552              		.cfi_offset 7, -24
 1553              		.cfi_offset 8, -20
ARM GAS  /tmp/ccahK8IF.s 			page 45


 1554              		.cfi_offset 9, -16
 1555              		.cfi_offset 10, -12
 1556              		.cfi_offset 11, -8
 1557              		.cfi_offset 14, -4
 1558 0004 8BB0     		sub	sp, sp, #44
 1559              	.LCFI11:
 1560              		.cfi_def_cfa_offset 80
 1561 0006 0546     		mov	r5, r0
 1562 0008 0691     		str	r1, [sp, #24]
 1563 000a 0892     		str	r2, [sp, #32]
 1564              	.LVL230:
 742:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *rambuf;
 743:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if !LWIP_NETIF_TX_SINGLE_PBUF
 744:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct pbuf *newpbuf;
 745:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t newpbuflen = 0;
 746:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t left_to_copy;
 747:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif
 748:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_hdr *original_iphdr;
 749:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   struct ip_hdr *iphdr;
 750:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   const u16_t nfb = (u16_t)((netif->mtu - IP_HLEN) / 8);
 1565              		.loc 1 750 0
 1566 000c 0B8D     		ldrh	r3, [r1, #40]
 1567 000e 143B     		subs	r3, r3, #20
 1568 0010 21D4     		bmi	.L168
 1569              	.L151:
 1570 0012 C3F3CF03 		ubfx	r3, r3, #3, #16
 1571 0016 0593     		str	r3, [sp, #20]
 1572              	.LVL231:
 751:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t left, fragsize;
 752:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t ofo;
 753:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int last;
 754:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t poff = IP_HLEN;
 755:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t tmp;
 756:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   int mf_set;
 757:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 758:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   original_iphdr = (struct ip_hdr *)p->payload;
 1573              		.loc 1 758 0
 1574 0018 D5F80490 		ldr	r9, [r5, #4]
 1575              	.LVL232:
 759:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   iphdr = original_iphdr;
 760:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   if (IPH_HL_BYTES(iphdr) != IP_HLEN) {
 1576              		.loc 1 760 0
 1577 001c 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 1578 0020 03F00F03 		and	r3, r3, #15
 1579 0024 052B     		cmp	r3, #5
 1580 0026 40F0CF80 		bne	.L165
 761:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* ip4_frag() does not support IP options */
 762:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     return ERR_VAL;
 763:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 764:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   LWIP_ERROR("ip4_frag(): pbuf too short", p->len >= IP_HLEN, return ERR_VAL);
 1581              		.loc 1 764 0
 1582 002a 6B89     		ldrh	r3, [r5, #10]
 1583 002c 132B     		cmp	r3, #19
 1584 002e 14D9     		bls	.L169
 765:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 766:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* Save original offset */
 767:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   tmp = lwip_ntohs(IPH_OFFSET(iphdr));
ARM GAS  /tmp/ccahK8IF.s 			page 46


 1585              		.loc 1 767 0
 1586 0030 B9F80600 		ldrh	r0, [r9, #6]	@ unaligned
 1587              	.LVL233:
 1588 0034 FFF7FEFF 		bl	lwip_htons
 1589              	.LVL234:
 768:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   ofo = tmp & IP_OFFMASK;
 1590              		.loc 1 768 0
 1591 0038 C0F30C03 		ubfx	r3, r0, #0, #13
 1592 003c 0493     		str	r3, [sp, #16]
 1593              	.LVL235:
 1594 003e 00F40053 		and	r3, r0, #8192
 1595 0042 0993     		str	r3, [sp, #36]
 1596              	.LVL236:
 769:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   /* already fragmented? if so, the last fragment we create must have MF, too */
 770:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   mf_set = tmp & IP_MF;
 771:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 772:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   left = (u16_t)(p->tot_len - IP_HLEN);
 1597              		.loc 1 772 0
 1598 0044 B5F808A0 		ldrh	r10, [r5, #8]
 1599 0048 AAF1140A 		sub	r10, r10, #20
 1600 004c 1FFA8AFB 		uxth	fp, r10
 1601              	.LVL237:
 754:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t tmp;
 1602              		.loc 1 754 0
 1603 0050 1427     		movs	r7, #20
 745:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t left_to_copy;
 1604              		.loc 1 745 0
 1605 0052 0024     		movs	r4, #0
 773:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 774:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   while (left) {
 1606              		.loc 1 774 0
 1607 0054 8AE0     		b	.L154
 1608              	.LVL238:
 1609              	.L168:
 750:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   u16_t left, fragsize;
 1610              		.loc 1 750 0
 1611 0056 0733     		adds	r3, r3, #7
 1612 0058 DBE7     		b	.L151
 1613              	.LVL239:
 1614              	.L169:
 764:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1615              		.loc 1 764 0 discriminator 1
 1616 005a 5E4B     		ldr	r3, .L176
 1617 005c 4FF43F72 		mov	r2, #764
 1618              	.LVL240:
 1619 0060 5D49     		ldr	r1, .L176+4
 1620              	.LVL241:
 1621 0062 5E48     		ldr	r0, .L176+8
 1622              	.LVL242:
 1623 0064 FFF7FEFF 		bl	printf
 1624              	.LVL243:
 1625 0068 6FF00500 		mvn	r0, #5
 1626 006c 43E0     		b	.L152
 1627              	.LVL244:
 1628              	.L175:
 775:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Fill this fragment */
 776:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     fragsize = LWIP_MIN(left, (u16_t)(nfb * 8));
ARM GAS  /tmp/ccahK8IF.s 			page 47


 777:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 778:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 779:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     rambuf = pbuf_alloc(PBUF_IP, fragsize, PBUF_RAM);
 780:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (rambuf == NULL) {
 781:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto memerr;
 782:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 783:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("this needs a pbuf in one piece!",
 784:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                 (rambuf->len == rambuf->tot_len) && (rambuf->next == NULL));
 785:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     poff += pbuf_copy_partial(p, rambuf->payload, fragsize, poff);
 786:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* make room for the IP header */
 787:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (pbuf_add_header(rambuf, IP_HLEN)) {
 788:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbuf_free(rambuf);
 789:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto memerr;
 790:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 791:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* fill in the IP header */
 792:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     SMEMCPY(rambuf->payload, original_iphdr, IP_HLEN);
 793:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iphdr = (struct ip_hdr *)rambuf->payload;
 794:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
 795:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* When not using a static buffer, create a chain of pbufs.
 796:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * The first will be a PBUF_RAM holding the link and IP header.
 797:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * The rest will be PBUF_REFs mirroring the pbuf chain to be fragged,
 798:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * but limited to the size of an mtu.
 799:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      */
 800:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     rambuf = pbuf_alloc(PBUF_LINK, IP_HLEN, PBUF_RAM);
 801:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (rambuf == NULL) {
 802:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto memerr;
 803:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 804:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     LWIP_ASSERT("this needs a pbuf in one piece!",
 1629              		.loc 1 804 0 discriminator 1
 1630 006e 594B     		ldr	r3, .L176
 1631 0070 40F22532 		movw	r2, #805
 1632 0074 5A49     		ldr	r1, .L176+12
 1633 0076 5948     		ldr	r0, .L176+8
 1634              	.LVL245:
 1635 0078 FFF7FEFF 		bl	printf
 1636              	.LVL246:
 1637 007c 8CE0     		b	.L155
 1638              	.LVL247:
 1639              	.L173:
 1640              	.LBB9:
 805:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                 (rambuf->len >= (IP_HLEN)));
 806:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     SMEMCPY(rambuf->payload, original_iphdr, IP_HLEN);
 807:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iphdr = (struct ip_hdr *)rambuf->payload;
 808:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 809:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     left_to_copy = fragsize;
 810:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     while (left_to_copy) {
 811:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       struct pbuf_custom_ref *pcr;
 812:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       u16_t plen = (u16_t)(p->len - poff);
 813:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_ASSERT("p->len >= poff", p->len >= poff);
 1641              		.loc 1 813 0 discriminator 1
 1642 007e 554B     		ldr	r3, .L176
 1643 0080 40F22D32 		movw	r2, #813
 1644 0084 5749     		ldr	r1, .L176+16
 1645 0086 5548     		ldr	r0, .L176+8
 1646 0088 FFF7FEFF 		bl	printf
 1647              	.LVL248:
 1648 008c 26E0     		b	.L157
ARM GAS  /tmp/ccahK8IF.s 			page 48


 1649              	.LVL249:
 1650              	.L158:
 814:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       newpbuflen = LWIP_MIN(left_to_copy, plen);
 815:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* Is this pbuf already empty? */
 816:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (!newpbuflen) {
 817:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         poff = 0;
 818:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         p = p->next;
 819:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         continue;
 820:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 821:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pcr = ip_frag_alloc_pbuf_custom_ref();
 1651              		.loc 1 821 0
 1652 008e FFF7FEFF 		bl	ip_frag_alloc_pbuf_custom_ref
 1653              	.LVL250:
 822:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (pcr == NULL) {
 1654              		.loc 1 822 0
 1655 0092 8046     		mov	r8, r0
 1656 0094 50B3     		cbz	r0, .L170
 823:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         pbuf_free(rambuf);
 824:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         goto memerr;
 825:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 826:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* Mirror this pbuf, although we might not need all of it. */
 827:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       newpbuf = pbuf_alloced_custom(PBUF_RAW, newpbuflen, PBUF_REF, &pcr->pc,
 828:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                                     (u8_t *)p->payload + poff, newpbuflen);
 1657              		.loc 1 828 0
 1658 0096 6B68     		ldr	r3, [r5, #4]
 827:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                                     (u8_t *)p->payload + poff, newpbuflen);
 1659              		.loc 1 827 0
 1660 0098 3B44     		add	r3, r3, r7
 1661 009a 0194     		str	r4, [sp, #4]
 1662 009c 0093     		str	r3, [sp]
 1663 009e 0346     		mov	r3, r0
 1664 00a0 4122     		movs	r2, #65
 1665 00a2 2146     		mov	r1, r4
 1666 00a4 0020     		movs	r0, #0
 1667              	.LVL251:
 1668 00a6 FFF7FEFF 		bl	pbuf_alloced_custom
 1669              	.LVL252:
 829:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (newpbuf == NULL) {
 1670              		.loc 1 829 0
 1671 00aa 0290     		str	r0, [sp, #8]
 1672 00ac 30B3     		cbz	r0, .L171
 830:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         ip_frag_free_pbuf_custom_ref(pcr);
 831:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         pbuf_free(rambuf);
 832:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         goto memerr;
 833:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 834:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbuf_ref(p);
 1673              		.loc 1 834 0
 1674 00ae 2846     		mov	r0, r5
 1675              	.LVL253:
 1676 00b0 FFF7FEFF 		bl	pbuf_ref
 1677              	.LVL254:
 835:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pcr->original = p;
 1678              		.loc 1 835 0
 1679 00b4 C8F81450 		str	r5, [r8, #20]
 836:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pcr->pc.custom_free_function = ipfrag_free_pbuf_custom;
 1680              		.loc 1 836 0
 1681 00b8 4B4B     		ldr	r3, .L176+20
ARM GAS  /tmp/ccahK8IF.s 			page 49


 1682 00ba C8F81030 		str	r3, [r8, #16]
 837:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 838:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* Add it to end of rambuf's chain, but using pbuf_cat, not pbuf_chain
 839:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        * so that it is removed when pbuf_dechain is later called on rambuf.
 840:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****        */
 841:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       pbuf_cat(rambuf, newpbuf);
 1683              		.loc 1 841 0
 1684 00be 0299     		ldr	r1, [sp, #8]
 1685 00c0 5046     		mov	r0, r10
 1686 00c2 FFF7FEFF 		bl	pbuf_cat
 1687              	.LVL255:
 842:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       left_to_copy = (u16_t)(left_to_copy - newpbuflen);
 1688              		.loc 1 842 0
 1689 00c6 361B     		subs	r6, r6, r4
 1690              	.LVL256:
 1691 00c8 B6B2     		uxth	r6, r6
 1692              	.LVL257:
 843:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       if (left_to_copy) {
 1693              		.loc 1 843 0
 1694 00ca 0EB1     		cbz	r6, .L156
 1695              	.LVL258:
 844:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         poff = 0;
 845:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         p = p->next;
 1696              		.loc 1 845 0
 1697 00cc 2D68     		ldr	r5, [r5]
 1698              	.LVL259:
 844:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         poff = 0;
 1699              		.loc 1 844 0
 1700 00ce 0027     		movs	r7, #0
 1701              	.LVL260:
 1702              	.L156:
 1703              	.LBE9:
 810:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       struct pbuf_custom_ref *pcr;
 1704              		.loc 1 810 0
 1705 00d0 EEB1     		cbz	r6, .L172
 1706              	.LBB10:
 812:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       LWIP_ASSERT("p->len >= poff", p->len >= poff);
 1707              		.loc 1 812 0
 1708 00d2 6B89     		ldrh	r3, [r5, #10]
 1709 00d4 DC1B     		subs	r4, r3, r7
 1710              	.LVL261:
 1711 00d6 A4B2     		uxth	r4, r4
 1712              	.LVL262:
 813:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       newpbuflen = LWIP_MIN(left_to_copy, plen);
 1713              		.loc 1 813 0
 1714 00d8 9F42     		cmp	r7, r3
 1715 00da D0D8     		bhi	.L173
 1716              	.L157:
 814:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* Is this pbuf already empty? */
 1717              		.loc 1 814 0
 1718 00dc B442     		cmp	r4, r6
 1719 00de 28BF     		it	cs
 1720 00e0 3446     		movcs	r4, r6
 1721              	.LVL263:
 816:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         poff = 0;
 1722              		.loc 1 816 0
 1723 00e2 002C     		cmp	r4, #0
ARM GAS  /tmp/ccahK8IF.s 			page 50


 1724 00e4 D3D1     		bne	.L158
 1725              	.LVL264:
 818:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         continue;
 1726              		.loc 1 818 0
 1727 00e6 2D68     		ldr	r5, [r5]
 1728              	.LVL265:
 817:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         p = p->next;
 1729              		.loc 1 817 0
 1730 00e8 2746     		mov	r7, r4
 819:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 1731              		.loc 1 819 0
 1732 00ea F1E7     		b	.L156
 1733              	.LVL266:
 1734              	.L170:
 1735 00ec 5046     		mov	r0, r10
 1736              	.LVL267:
 823:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         goto memerr;
 1737              		.loc 1 823 0
 1738 00ee FFF7FEFF 		bl	pbuf_free
 1739              	.LVL268:
 1740              	.LBE10:
 846:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 847:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 848:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     poff = (u16_t)(poff + newpbuflen);
 849:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 850:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 851:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Correct header */
 852:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     last = (left <= netif->mtu - IP_HLEN);
 853:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 854:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Set new offset and MF flag */
 855:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     tmp = (IP_OFFMASK & (ofo));
 856:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (!last || mf_set) {
 857:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* the last fragment has MF set if the input frame had it */
 858:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       tmp = tmp | IP_MF;
 859:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 860:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_OFFSET_SET(iphdr, lwip_htons(tmp));
 861:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_LEN_SET(iphdr, lwip_htons((u16_t)(fragsize + IP_HLEN)));
 862:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_CHKSUM_SET(iphdr, 0);
 863:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if CHECKSUM_GEN_IP
 864:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_IP) {
 865:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       IPH_CHKSUM_SET(iphdr, inet_chksum(iphdr, IP_HLEN));
 866:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 867:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* CHECKSUM_GEN_IP */
 868:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 869:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* No need for separate header pbuf - we allowed room for it in rambuf
 870:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * when allocated.
 871:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      */
 872:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     netif->output(netif, rambuf, dest);
 873:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPFRAG_STATS_INC(ip_frag.xmit);
 874:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 875:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Unfortunately we can't reuse rambuf - the hardware may still be
 876:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * using the buffer. Instead we free it (and the ensuing chain) and
 877:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * recreate it next time round the loop. If we're lucky the hardware
 878:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * will have already sent the packet, the free will really free, and
 879:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      * there will be zero memory penalty.
 880:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****      */
 881:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
ARM GAS  /tmp/ccahK8IF.s 			page 51


 882:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     pbuf_free(rambuf);
 883:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     left = (u16_t)(left - fragsize);
 884:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ofo = (u16_t)(ofo + nfb);
 885:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 886:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   MIB2_STATS_INC(mib2.ipfragoks);
 887:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return ERR_OK;
 888:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** memerr:
 889:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   MIB2_STATS_INC(mib2.ipfragfails);
 890:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   return ERR_MEM;
 1741              		.loc 1 890 0
 1742 00f2 4FF0FF30 		mov	r0, #-1
 1743              	.LVL269:
 1744              	.L152:
 891:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 1745              		.loc 1 891 0
 1746 00f6 0BB0     		add	sp, sp, #44
 1747              	.LCFI12:
 1748              		.cfi_remember_state
 1749              		.cfi_def_cfa_offset 36
 1750              		@ sp needed
 1751 00f8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1752              	.LVL270:
 1753              	.L171:
 1754              	.LCFI13:
 1755              		.cfi_restore_state
 1756              	.LBB11:
 830:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         pbuf_free(rambuf);
 1757              		.loc 1 830 0
 1758 00fc 4046     		mov	r0, r8
 1759              	.LVL271:
 1760 00fe FFF7FEFF 		bl	ip_frag_free_pbuf_custom_ref
 1761              	.LVL272:
 831:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****         goto memerr;
 1762              		.loc 1 831 0
 1763 0102 5046     		mov	r0, r10
 1764 0104 FFF7FEFF 		bl	pbuf_free
 1765              	.LVL273:
 1766              	.LBE11:
 890:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 1767              		.loc 1 890 0
 1768 0108 4FF0FF30 		mov	r0, #-1
 1769              	.LBB12:
 832:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       }
 1770              		.loc 1 832 0
 1771 010c F3E7     		b	.L152
 1772              	.LVL274:
 1773              	.L172:
 1774              	.LBE12:
 848:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 1775              		.loc 1 848 0
 1776 010e 2744     		add	r7, r7, r4
 1777              	.LVL275:
 1778 0110 BFB2     		uxth	r7, r7
 1779              	.LVL276:
 852:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1780              		.loc 1 852 0
 1781 0112 069B     		ldr	r3, [sp, #24]
ARM GAS  /tmp/ccahK8IF.s 			page 52


 1782 0114 1B8D     		ldrh	r3, [r3, #40]
 1783 0116 143B     		subs	r3, r3, #20
 1784              	.LVL277:
 855:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (!last || mf_set) {
 1785              		.loc 1 855 0
 1786 0118 049A     		ldr	r2, [sp, #16]
 1787 011a C2F30C00 		ubfx	r0, r2, #0, #13
 1788              	.LVL278:
 856:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       /* the last fragment has MF set if the input frame had it */
 1789              		.loc 1 856 0
 1790 011e 099A     		ldr	r2, [sp, #36]
 1791 0120 9B45     		cmp	fp, r3
 1792 0122 D8BF     		it	le
 1793 0124 002A     		cmple	r2, #0
 1794 0126 01D0     		beq	.L163
 858:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     }
 1795              		.loc 1 858 0
 1796 0128 40F40050 		orr	r0, r0, #8192
 1797              	.LVL279:
 1798              	.L163:
 860:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_LEN_SET(iphdr, lwip_htons((u16_t)(fragsize + IP_HLEN)));
 1799              		.loc 1 860 0
 1800 012c FFF7FEFF 		bl	lwip_htons
 1801              	.LVL280:
 1802 0130 079E     		ldr	r6, [sp, #28]
 1803              	.LVL281:
 1804 0132 F080     		strh	r0, [r6, #6]	@ unaligned
 861:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPH_CHKSUM_SET(iphdr, 0);
 1805              		.loc 1 861 0
 1806 0134 039B     		ldr	r3, [sp, #12]
 1807 0136 03F11400 		add	r0, r3, #20
 1808 013a 80B2     		uxth	r0, r0
 1809 013c FFF7FEFF 		bl	lwip_htons
 1810              	.LVL282:
 1811 0140 7080     		strh	r0, [r6, #2]	@ unaligned
 862:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** #if CHECKSUM_GEN_IP
 1812              		.loc 1 862 0
 1813 0142 0023     		movs	r3, #0
 1814 0144 B372     		strb	r3, [r6, #10]
 1815 0146 F372     		strb	r3, [r6, #11]
 872:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     IPFRAG_STATS_INC(ip_frag.xmit);
 1816              		.loc 1 872 0
 1817 0148 0698     		ldr	r0, [sp, #24]
 1818 014a 4369     		ldr	r3, [r0, #20]
 1819 014c 089A     		ldr	r2, [sp, #32]
 1820 014e 5146     		mov	r1, r10
 1821 0150 9847     		blx	r3
 1822              	.LVL283:
 882:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     left = (u16_t)(left - fragsize);
 1823              		.loc 1 882 0
 1824 0152 5046     		mov	r0, r10
 1825 0154 FFF7FEFF 		bl	pbuf_free
 1826              	.LVL284:
 883:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     ofo = (u16_t)(ofo + nfb);
 1827              		.loc 1 883 0
 1828 0158 039B     		ldr	r3, [sp, #12]
 1829 015a ABEB030B 		sub	fp, fp, r3
ARM GAS  /tmp/ccahK8IF.s 			page 53


 1830              	.LVL285:
 1831 015e 1FFA8BFB 		uxth	fp, fp
 1832              	.LVL286:
 884:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 1833              		.loc 1 884 0
 1834 0162 049B     		ldr	r3, [sp, #16]
 1835 0164 059A     		ldr	r2, [sp, #20]
 1836 0166 1344     		add	r3, r3, r2
 1837 0168 9BB2     		uxth	r3, r3
 1838 016a 0493     		str	r3, [sp, #16]
 1839              	.LVL287:
 1840              	.L154:
 774:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     /* Fill this fragment */
 1841              		.loc 1 774 0
 1842 016c BBF1000F 		cmp	fp, #0
 1843 0170 28D0     		beq	.L174
 776:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1844              		.loc 1 776 0
 1845 0172 059B     		ldr	r3, [sp, #20]
 1846 0174 DB00     		lsls	r3, r3, #3
 1847 0176 9BB2     		uxth	r3, r3
 1848 0178 5B45     		cmp	r3, fp
 1849 017a 28BF     		it	cs
 1850 017c 5B46     		movcs	r3, fp
 1851 017e 0393     		str	r3, [sp, #12]
 1852              	.LVL288:
 800:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     if (rambuf == NULL) {
 1853              		.loc 1 800 0
 1854 0180 4FF42072 		mov	r2, #640
 1855 0184 1421     		movs	r1, #20
 1856 0186 0E20     		movs	r0, #14
 1857 0188 FFF7FEFF 		bl	pbuf_alloc
 1858              	.LVL289:
 801:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       goto memerr;
 1859              		.loc 1 801 0
 1860 018c 8246     		mov	r10, r0
 1861 018e F0B1     		cbz	r0, .L166
 804:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****                 (rambuf->len >= (IP_HLEN)));
 1862              		.loc 1 804 0
 1863 0190 4389     		ldrh	r3, [r0, #10]
 1864 0192 132B     		cmp	r3, #19
 1865 0194 7FF66BAF 		bls	.L175
 1866              	.LVL290:
 1867              	.L155:
 806:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     iphdr = (struct ip_hdr *)rambuf->payload;
 1868              		.loc 1 806 0
 1869 0198 DAF80430 		ldr	r3, [r10, #4]
 1870 019c D9F80020 		ldr	r2, [r9]	@ unaligned
 1871 01a0 D9F80460 		ldr	r6, [r9, #4]	@ unaligned
 1872 01a4 D9F80800 		ldr	r0, [r9, #8]	@ unaligned
 1873 01a8 D9F80C10 		ldr	r1, [r9, #12]	@ unaligned
 1874 01ac 1A60     		str	r2, [r3]	@ unaligned
 1875 01ae 5E60     		str	r6, [r3, #4]	@ unaligned
 1876 01b0 9860     		str	r0, [r3, #8]	@ unaligned
 1877 01b2 D960     		str	r1, [r3, #12]	@ unaligned
 1878 01b4 D9F81020 		ldr	r2, [r9, #16]	@ unaligned
 1879 01b8 1A61     		str	r2, [r3, #16]	@ unaligned
ARM GAS  /tmp/ccahK8IF.s 			page 54


 807:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** 
 1880              		.loc 1 807 0
 1881 01ba DAF80430 		ldr	r3, [r10, #4]
 1882 01be 0793     		str	r3, [sp, #28]
 1883              	.LVL291:
 809:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****     while (left_to_copy) {
 1884              		.loc 1 809 0
 1885 01c0 039E     		ldr	r6, [sp, #12]
 810:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****       struct pbuf_custom_ref *pcr;
 1886              		.loc 1 810 0
 1887 01c2 85E7     		b	.L156
 1888              	.LVL292:
 1889              	.L174:
 887:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** memerr:
 1890              		.loc 1 887 0
 1891 01c4 0020     		movs	r0, #0
 1892 01c6 96E7     		b	.L152
 1893              	.LVL293:
 1894              	.L165:
 762:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c ****   }
 1895              		.loc 1 762 0
 1896 01c8 6FF00500 		mvn	r0, #5
 1897              	.LVL294:
 1898 01cc 93E7     		b	.L152
 1899              	.LVL295:
 1900              	.L166:
 890:Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag.c **** }
 1901              		.loc 1 890 0
 1902 01ce 4FF0FF30 		mov	r0, #-1
 1903              	.LVL296:
 1904 01d2 90E7     		b	.L152
 1905              	.L177:
 1906              		.align	2
 1907              	.L176:
 1908 01d4 00000000 		.word	.LC0
 1909 01d8 00000000 		.word	.LC16
 1910 01dc 54000000 		.word	.LC2
 1911 01e0 1C000000 		.word	.LC17
 1912 01e4 3C000000 		.word	.LC18
 1913 01e8 00000000 		.word	ipfrag_free_pbuf_custom
 1914              		.cfi_endproc
 1915              	.LFE168:
 1917              		.section	.bss.ip_reass_pbufcount,"aw",%nobits
 1918              		.align	1
 1919              		.set	.LANCHOR1,. + 0
 1922              	ip_reass_pbufcount:
 1923 0000 0000     		.space	2
 1924              		.section	.bss.reassdatagrams,"aw",%nobits
 1925              		.align	2
 1926              		.set	.LANCHOR0,. + 0
 1929              	reassdatagrams:
 1930 0000 00000000 		.space	4
 1931              		.section	.rodata.ip4_frag.str1.4,"aMS",%progbits,1
 1932              		.align	2
 1933              	.LC16:
 1934 0000 6970345F 		.ascii	"ip4_frag(): pbuf too short\000"
 1934      66726167 
ARM GAS  /tmp/ccahK8IF.s 			page 55


 1934      28293A20 
 1934      70627566 
 1934      20746F6F 
 1935 001b 00       		.space	1
 1936              	.LC17:
 1937 001c 74686973 		.ascii	"this needs a pbuf in one piece!\000"
 1937      206E6565 
 1937      64732061 
 1937      20706275 
 1937      6620696E 
 1938              	.LC18:
 1939 003c 702D3E6C 		.ascii	"p->len >= poff\000"
 1939      656E203E 
 1939      3D20706F 
 1939      666600
 1940              		.section	.rodata.ip4_reass.str1.4,"aMS",%progbits,1
 1941              		.align	2
 1942              	.LC13:
 1943 0000 69705F72 		.ascii	"ip_reass_pbufcount >= clen\000"
 1943      65617373 
 1943      5F706275 
 1943      66636F75 
 1943      6E74203E 
 1944 001b 00       		.space	1
 1945              	.LC14:
 1946 001c 69707220 		.ascii	"ipr != NULL\000"
 1946      213D204E 
 1946      554C4C00 
 1947              	.LC15:
 1948 0028 6E6F7420 		.ascii	"not firstalthough just enqueued\000"
 1948      66697273 
 1948      74616C74 
 1948      686F7567 
 1948      68206A75 
 1949              		.section	.rodata.ip_frag_free_pbuf_custom_ref.str1.4,"aMS",%progbits,1
 1950              		.align	2
 1951              	.LC7:
 1952 0000 7020213D 		.ascii	"p != NULL\000"
 1952      204E554C 
 1952      4C00
 1953              		.section	.rodata.ip_reass_chain_frag_into_datagram_and_validate.str1.4,"aMS",%progbits,1
 1954              		.align	2
 1955              	.LC9:
 1956 0000 63686563 		.ascii	"check fragments don't overlap\000"
 1956      6B206672 
 1956      61676D65 
 1956      6E747320 
 1956      646F6E27 
 1957 001e 0000     		.space	2
 1958              	.LC10:
 1959 0020 6E6F2070 		.ascii	"no previous fragment, this must be the first fragme"
 1959      72657669 
 1959      6F757320 
 1959      66726167 
 1959      6D656E74 
 1960 0053 6E742100 		.ascii	"nt!\000"
 1961 0057 00       		.space	1
ARM GAS  /tmp/ccahK8IF.s 			page 56


 1962              	.LC11:
 1963 0058 73616E69 		.ascii	"sanity check\000"
 1963      74792063 
 1963      6865636B 
 1963      00
 1964 0065 000000   		.space	3
 1965              	.LC12:
 1966 0068 76616C69 		.ascii	"validate_datagram:next_pbuf!=NULL\000"
 1966      64617465 
 1966      5F646174 
 1966      61677261 
 1966      6D3A6E65 
 1967              		.section	.rodata.ip_reass_dequeue_datagram.str1.4,"aMS",%progbits,1
 1968              		.align	2
 1969              	.LC0:
 1970 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/core/ipv4/ip4_frag"
 1970      6C657761 
 1970      7265732F 
 1970      54686972 
 1970      645F5061 
 1971 0033 2E6300   		.ascii	".c\000"
 1972 0036 0000     		.space	2
 1973              	.LC1:
 1974 0038 73616E69 		.ascii	"sanity check linked list\000"
 1974      74792063 
 1974      6865636B 
 1974      206C696E 
 1974      6B656420 
 1975 0051 000000   		.space	3
 1976              	.LC2:
 1977 0054 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 1977      7274696F 
 1977      6E202225 
 1977      73222066 
 1977      61696C65 
 1978              		.section	.rodata.ip_reass_free_complete_datagram.str1.4,"aMS",%progbits,1
 1979              		.align	2
 1980              	.LC3:
 1981 0000 70726576 		.ascii	"prev != ipr\000"
 1981      20213D20 
 1981      69707200 
 1982              	.LC4:
 1983 000c 70726576 		.ascii	"prev->next == ipr\000"
 1983      2D3E6E65 
 1983      7874203D 
 1983      3D206970 
 1983      7200
 1984 001e 0000     		.space	2
 1985              	.LC5:
 1986 0020 70627566 		.ascii	"pbufs_freed + clen <= 0xffff\000"
 1986      735F6672 
 1986      65656420 
 1986      2B20636C 
 1986      656E203C 
 1987 003d 000000   		.space	3
 1988              	.LC6:
 1989 0040 69705F72 		.ascii	"ip_reass_pbufcount >= pbufs_freed\000"
ARM GAS  /tmp/ccahK8IF.s 			page 57


 1989      65617373 
 1989      5F706275 
 1989      66636F75 
 1989      6E74203E 
 1990              		.section	.rodata.ipfrag_free_pbuf_custom.str1.4,"aMS",%progbits,1
 1991              		.align	2
 1992              	.LC8:
 1993 0000 70637220 		.ascii	"pcr != NULL\000"
 1993      213D204E 
 1993      554C4C00 
 1994              		.text
 1995              	.Letext0:
 1996              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 1997              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 1998              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 1999              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 2000              		.file 6 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal.h"
 2001              		.file 7 "/usr/include/newlib/sys/lock.h"
 2002              		.file 8 "/usr/include/newlib/sys/_types.h"
 2003              		.file 9 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 2004              		.file 10 "/usr/include/newlib/sys/reent.h"
 2005              		.file 11 "/usr/include/newlib/stdlib.h"
 2006              		.file 12 "/usr/include/newlib/time.h"
 2007              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 2008              		.file 14 "/usr/include/newlib/ctype.h"
 2009              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 2010              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 2011              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 2012              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 2013              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 2014              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 2015              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 2016              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 2017              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 2018              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_frag.h"
 2019              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/icmp.h"
 2020              		.file 26 "/usr/include/newlib/stdio.h"
 2021              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
ARM GAS  /tmp/ccahK8IF.s 			page 58


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ip4_frag.c
     /tmp/ccahK8IF.s:17     .text.ip_reass_dequeue_datagram:0000000000000000 $t
     /tmp/ccahK8IF.s:23     .text.ip_reass_dequeue_datagram:0000000000000000 ip_reass_dequeue_datagram
     /tmp/ccahK8IF.s:81     .text.ip_reass_dequeue_datagram:0000000000000038 $d
     /tmp/ccahK8IF.s:89     .text.ip_reass_free_complete_datagram:0000000000000000 $t
     /tmp/ccahK8IF.s:95     .text.ip_reass_free_complete_datagram:0000000000000000 ip_reass_free_complete_datagram
     /tmp/ccahK8IF.s:295    .text.ip_reass_free_complete_datagram:00000000000000f0 $d
     /tmp/ccahK8IF.s:306    .text.ip_reass_remove_oldest_datagram:0000000000000000 $t
     /tmp/ccahK8IF.s:312    .text.ip_reass_remove_oldest_datagram:0000000000000000 ip_reass_remove_oldest_datagram
     /tmp/ccahK8IF.s:442    .text.ip_reass_remove_oldest_datagram:0000000000000080 $d
     /tmp/ccahK8IF.s:447    .text.ip_frag_free_pbuf_custom_ref:0000000000000000 $t
     /tmp/ccahK8IF.s:453    .text.ip_frag_free_pbuf_custom_ref:0000000000000000 ip_frag_free_pbuf_custom_ref
     /tmp/ccahK8IF.s:490    .text.ip_frag_free_pbuf_custom_ref:0000000000000020 $d
     /tmp/ccahK8IF.s:497    .text.ipfrag_free_pbuf_custom:0000000000000000 $t
     /tmp/ccahK8IF.s:503    .text.ipfrag_free_pbuf_custom:0000000000000000 ipfrag_free_pbuf_custom
     /tmp/ccahK8IF.s:547    .text.ipfrag_free_pbuf_custom:0000000000000028 $d
     /tmp/ccahK8IF.s:554    .text.ip_reass_chain_frag_into_datagram_and_validate:0000000000000000 $t
     /tmp/ccahK8IF.s:560    .text.ip_reass_chain_frag_into_datagram_and_validate:0000000000000000 ip_reass_chain_frag_into_datagram_and_validate
     /tmp/ccahK8IF.s:914    .text.ip_reass_chain_frag_into_datagram_and_validate:00000000000001a8 $d
     /tmp/ccahK8IF.s:924    .text.ip_frag_alloc_pbuf_custom_ref:0000000000000000 $t
     /tmp/ccahK8IF.s:930    .text.ip_frag_alloc_pbuf_custom_ref:0000000000000000 ip_frag_alloc_pbuf_custom_ref
     /tmp/ccahK8IF.s:951    .text.ip_reass_enqueue_new_datagram:0000000000000000 $t
     /tmp/ccahK8IF.s:957    .text.ip_reass_enqueue_new_datagram:0000000000000000 ip_reass_enqueue_new_datagram
     /tmp/ccahK8IF.s:1040   .text.ip_reass_enqueue_new_datagram:000000000000005c $d
     /tmp/ccahK8IF.s:1045   .text.ip_reass_tmr:0000000000000000 $t
     /tmp/ccahK8IF.s:1052   .text.ip_reass_tmr:0000000000000000 ip_reass_tmr
     /tmp/ccahK8IF.s:1112   .text.ip_reass_tmr:0000000000000028 $d
     /tmp/ccahK8IF.s:1117   .text.ip4_reass:0000000000000000 $t
     /tmp/ccahK8IF.s:1124   .text.ip4_reass:0000000000000000 ip4_reass
     /tmp/ccahK8IF.s:1521   .text.ip4_reass:0000000000000200 $d
     /tmp/ccahK8IF.s:1532   .text.ip4_frag:0000000000000000 $t
     /tmp/ccahK8IF.s:1539   .text.ip4_frag:0000000000000000 ip4_frag
     /tmp/ccahK8IF.s:1908   .text.ip4_frag:00000000000001d4 $d
     /tmp/ccahK8IF.s:1918   .bss.ip_reass_pbufcount:0000000000000000 $d
     /tmp/ccahK8IF.s:1922   .bss.ip_reass_pbufcount:0000000000000000 ip_reass_pbufcount
     /tmp/ccahK8IF.s:1925   .bss.reassdatagrams:0000000000000000 $d
     /tmp/ccahK8IF.s:1929   .bss.reassdatagrams:0000000000000000 reassdatagrams
     /tmp/ccahK8IF.s:1932   .rodata.ip4_frag.str1.4:0000000000000000 $d
     /tmp/ccahK8IF.s:1941   .rodata.ip4_reass.str1.4:0000000000000000 $d
     /tmp/ccahK8IF.s:1950   .rodata.ip_frag_free_pbuf_custom_ref.str1.4:0000000000000000 $d
     /tmp/ccahK8IF.s:1954   .rodata.ip_reass_chain_frag_into_datagram_and_validate.str1.4:0000000000000000 $d
     /tmp/ccahK8IF.s:1968   .rodata.ip_reass_dequeue_datagram.str1.4:0000000000000000 $d
     /tmp/ccahK8IF.s:1979   .rodata.ip_reass_free_complete_datagram.str1.4:0000000000000000 $d
     /tmp/ccahK8IF.s:1991   .rodata.ipfrag_free_pbuf_custom.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
memp_free
printf
icmp_time_exceeded
pbuf_clen
pbuf_free
lwip_htons
memp_malloc
memset
pbuf_remove_header
ARM GAS  /tmp/ccahK8IF.s 			page 59


pbuf_cat
pbuf_alloced_custom
pbuf_ref
pbuf_alloc

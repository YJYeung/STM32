ARM GAS  /tmp/ccMjT2X9.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"tcp_out.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.tcp_write_checks,"ax",%progbits
  17              		.align	1
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu fpv5-d16
  23              	tcp_write_checks:
  24              	.LFB161:
  25              		.file 1 "Middlewares/Third_Party/LwIP/src/core/tcp_out.c"
   1:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Transmission Control Protocol, outgoing traffic
   4:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The output functions of TCP.
   6:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
   7:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * There are two distinct ways for TCP segments to get sent:
   8:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - queued data: these are segments transferring data or segments containing
   9:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   SYN or FIN (which both count as one sequence number). They are created as
  10:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   struct @ref pbuf together with a struct tcp_seg and enqueue to the
  11:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   unsent list of the pcb. They are sent by tcp_output:
  12:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_write : creates data segments
  13:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_split_unsent_seg : splits a data segment
  14:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_enqueue_flags : creates SYN-only or FIN-only segments
  15:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_output / tcp_output_segment : finalize the tcp header
  16:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *      (e.g. sequence numbers, options, checksum) and output to IP
  17:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - the various tcp_rexmit functions shuffle around segments between the
  18:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *     unsent an unacked lists to retransmit them
  19:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - tcp_create_segment and tcp_pbuf_prealloc allocate pbuf and
  20:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *     segment for these functions
  21:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - direct send: these segments don't contain data but control the connection
  22:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   behaviour. They are created as pbuf only and sent directly without
  23:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   enqueueing them:
  24:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_send_empty_ack sends an ACK-only segment
  25:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_rst sends a RST segment
  26:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_keepalive sends a keepalive segment
  27:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_zero_window_probe sends a window probe segment
  28:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - tcp_output_alloc_header allocates a header-only pbuf for these functions
  29:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
  30:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  31:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /*
  32:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  33:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * All rights reserved.
ARM GAS  /tmp/ccMjT2X9.s 			page 2


  34:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  35:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Redistribution and use in source and binary forms, with or without modification,
  36:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * are permitted provided that the following conditions are met:
  37:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  38:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  39:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    this list of conditions and the following disclaimer.
  40:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  41:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    this list of conditions and the following disclaimer in the documentation
  42:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    and/or other materials provided with the distribution.
  43:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 3. The name of the author may not be used to endorse or promote products
  44:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    derived from this software without specific prior written permission.
  45:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  46:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  47:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  48:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  49:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  50:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  51:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  52:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  53:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  54:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  55:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * OF SUCH DAMAGE.
  56:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  57:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This file is part of the lwIP TCP/IP stack.
  58:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  59:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Author: Adam Dunkels <adam@sics.se>
  60:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  61:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
  62:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  63:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/opt.h"
  64:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  65:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP /* don't build if not configured for use in lwipopts.h */
  66:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  67:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/priv/tcp_priv.h"
  68:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/def.h"
  69:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/mem.h"
  70:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/memp.h"
  71:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip_addr.h"
  72:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/netif.h"
  73:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/inet_chksum.h"
  74:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/stats.h"
  75:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip6.h"
  76:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip6_addr.h"
  77:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
  78:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/sys.h"
  79:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  80:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  81:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include <string.h>
  82:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  83:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_FILENAME
  84:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include LWIP_HOOK_FILENAME
  85:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  86:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  87:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Allow to add custom TCP header options by defining this hook */
  88:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_TCP_OUT_TCPOPT_LENGTH
  89:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define LWIP_TCP_OPT_LENGTH_SEGMENT(flags, pcb) LWIP_HOOK_TCP_OUT_TCPOPT_LENGTH(pcb, LWIP_TCP_OPT_L
  90:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
ARM GAS  /tmp/ccMjT2X9.s 			page 3


  91:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define LWIP_TCP_OPT_LENGTH_SEGMENT(flags, pcb) LWIP_TCP_OPT_LENGTH(flags)
  92:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  93:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  94:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Define some copy-macros for checksum-on-copy so that the code looks
  95:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    nicer by preventing too many ifdef's. */
  96:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
  97:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY(dst, src, len, seg) do { \
  98:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(LWIP_CHKSUM_COPY(dst, src, len), \
  99:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      len, &seg->chksum, &seg->chksum_swapped); \
 100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags |= TF_SEG_DATA_CHECKSUMMED; } while(0)
 101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY2(dst, src, len, chksum, chksum_swapped)  \
 102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(LWIP_CHKSUM_COPY(dst, src, len), len, chksum, chksum_swapped);
 103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CHECKSUM_ON_COPY*/
 104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY(dst, src, len, seg)                     MEMCPY(dst, src, len)
 105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY2(dst, src, len, chksum, chksum_swapped) MEMCPY(dst, src, len)
 106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY*/
 107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Define this to 1 for an extra check that the output checksum is valid
 109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (usefule when the checksum is generated by the application, not the stack) */
 110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_CHECKSUM_ON_COPY_SANITY_CHECK
 111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_CHECKSUM_ON_COPY_SANITY_CHECK   0
 112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Allow to override the failure of sanity check from warning to e.g. hard failure */
 114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
 115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL
 116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL(msg) LWIP_DEBUGF(TCP_DEBUG | LWIP_DBG_LEVEL_WARNING,
 117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** The size of segment pbufs created when TCP_OVERSIZE is enabled */
 122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_OVERSIZE_CALC_LENGTH
 123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_OVERSIZE_CALC_LENGTH(length) ((length) + TCP_OVERSIZE)
 124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Forward declarations.*/
 128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t tcp_output_segment(struct tcp_seg *seg, struct tcp_pcb *pcb, struct netif *netif);
 129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* tcp_route: common code that returns a fixed bound netif or calls ip_route */
 131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct netif *
 132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_route(const struct tcp_pcb *pcb, const ip_addr_t *src, const ip_addr_t *dst)
 133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(src); /* in case IPv4-only and source-based routing is disabled */
 135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb != NULL) && (pcb->netif_idx != NETIF_NO_INDEX)) {
 137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return netif_get_by_index(pcb->netif_idx);
 138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ip_route(src, dst);
 140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Create a TCP segment with prefilled header.
 145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by @ref tcp_write, @ref tcp_enqueue_flags and @ref tcp_split_unsent_seg
 147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
ARM GAS  /tmp/ccMjT2X9.s 			page 4


 148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection.
 149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param p pbuf that is used to hold the TCP header.
 150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param hdrflags TCP flags for header.
 151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno TCP sequence number of this packet
 152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optflags options to include in TCP header
 153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return a new tcp_seg pointing to p, or NULL.
 154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The TCP header is filled in except ackno and wnd.
 155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * p is freed on failure.
 156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct tcp_seg *
 158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_create_segment(const struct tcp_pcb *pcb, struct pbuf *p, u8_t hdrflags, u32_t seqno, u8_t optf
 159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
 162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_create_segment: invalid pcb", pcb != NULL);
 164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_create_segment: invalid pbuf", p != NULL);
 165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(optflags, pcb);
 167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((seg = (struct tcp_seg *)memp_malloc(MEMP_TCP_SEG)) == NULL) {
 169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no memory.\n"));
 170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(p);
 171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags = optflags;
 174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = NULL;
 175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p = p;
 176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("p->tot_len >= optlen", p->tot_len >= optlen);
 177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->oversize_left = 0;
 180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum = 0;
 183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum_swapped = 0;
 184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check optflags */
 185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("invalid optflags passed: TF_SEG_DATA_CHECKSUMMED",
 186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (optflags & TF_SEG_DATA_CHECKSUMMED) == 0);
 187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* build TCP header */
 190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pbuf_add_header(p, TCP_HLEN)) {
 191:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no room for TCP he
 192:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.err);
 193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_free(seg);
 194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 195:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr = (struct tcp_hdr *)seg->p->payload;
 197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->src = lwip_htons(pcb->local_port);
 198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->dest = lwip_htons(pcb->remote_port);
 199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->seqno = lwip_htonl(seqno);
 200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* ackno is set in tcp_output */
 201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_HDRLEN_FLAGS_SET(seg->tcphdr, (5 + optlen / 4), hdrflags);
 202:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* wnd and chksum are set in tcp_output */
 203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->urgp = 0;
 204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return seg;
ARM GAS  /tmp/ccMjT2X9.s 			page 5


 205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Allocate a PBUF_RAM pbuf, perhaps with extra space at the end.
 209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 210:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This function is like pbuf_alloc(layer, length, PBUF_RAM) except
 211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * there may be extra bytes available at the end.
 212:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by @ref tcp_write
 214:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param layer flag to define header size.
 216:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param length size of the pbuf's payload.
 217:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param max_length maximum usable size of payload+oversize.
 218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param oversize pointer to a u16_t that will receive the number of usable tail bytes.
 219:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb The TCP connection that will enqueue the pbuf.
 220:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param apiflags API flags given to tcp_write.
 221:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param first_seg true when this pbuf will be used in the first enqueued segment.
 222:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
 225:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_pbuf_prealloc(pbuf_layer layer, u16_t length, u16_t max_length,
 226:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   u16_t *oversize, const struct tcp_pcb *pcb, u8_t apiflags,
 227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   u8_t first_seg)
 228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 229:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t alloc = length;
 231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_pbuf_prealloc: invalid oversize", oversize != NULL);
 233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_pbuf_prealloc: invalid pcb", pcb != NULL);
 234:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 235:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(max_length);
 237:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(pcb);
 238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(apiflags);
 239:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(first_seg);
 240:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   alloc = max_length;
 241:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
 242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (length < max_length) {
 243:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Should we allocate an oversized pbuf, or just the minimum
 244:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * length required? If tcp_write is going to be called again
 245:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * before this segment is transmitted, we want the oversized
 246:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * buffer. If the segment will be transmitted immediately, we can
 247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * save memory by allocating only length. We use a simple
 248:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * heuristic based on the following information:
 249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 250:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Did the user set TCP_WRITE_FLAG_MORE?
 251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Will the Nagle algorithm defer transmission of this segment?
 253:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((apiflags & TCP_WRITE_FLAG_MORE) ||
 255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unsent != NULL ||
 258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       alloc = LWIP_MIN(max_length, LWIP_MEM_ALIGN_SIZE(TCP_OVERSIZE_CALC_LENGTH(length)));
 260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
ARM GAS  /tmp/ccMjT2X9.s 			page 6


 262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(layer, alloc, PBUF_RAM);
 264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("need unchained pbuf", p->next == NULL);
 268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* trim p->len to the currently used size */
 270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p->len = p->tot_len = length;
 271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_OVERSIZE */
 274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define tcp_pbuf_prealloc(layer, length, mx, os, pcb, api, fst) pbuf_alloc((layer), (length), PBUF_
 275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 278:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Add a checksum of newly added data to the segment.
 279:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_write and tcp_split_unsent_seg.
 281:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 282:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
 283:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_seg_add_chksum(u16_t chksum, u16_t len, u16_t *seg_chksum,
 284:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                    u8_t *seg_chksum_swapped)
 285:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 286:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t helper;
 287:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* add chksum to old chksum and fold to u16_t */
 288:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   helper = chksum + *seg_chksum;
 289:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   chksum = FOLD_U32T(helper);
 290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((len & 1) != 0) {
 291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *seg_chksum_swapped = 1 - *seg_chksum_swapped;
 292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     chksum = SWAP_BYTES_IN_WORD(chksum);
 293:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 294:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *seg_chksum = chksum;
 295:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 297:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Checks if tcp_write is allowed or not (checks state, snd_buf and snd_queuelen).
 299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 300:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp pcb to check for
 301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param len length of data to send (checked agains snd_buf)
 302:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if tcp_write is allowed to proceed, another err_t otherwise
 303:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 304:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
 305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_write_checks(struct tcp_pcb *pcb, u16_t len)
 306:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
  26              		.loc 1 306 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 38B5     		push	{r3, r4, r5, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34              		.cfi_offset 3, -16
  35              		.cfi_offset 4, -12
  36              		.cfi_offset 5, -8
  37              		.cfi_offset 14, -4
ARM GAS  /tmp/ccMjT2X9.s 			page 7


  38 0002 0D46     		mov	r5, r1
 307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_write_checks: invalid pcb", pcb != NULL);
  39              		.loc 1 307 0
  40 0004 0446     		mov	r4, r0
  41 0006 B8B1     		cbz	r0, .L15
  42              	.LVL1:
  43              	.L2:
 308:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 309:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* connection is in invalid state for data transmission? */
 310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->state != ESTABLISHED) &&
  44              		.loc 1 310 0
  45 0008 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
  46 000a 042B     		cmp	r3, #4
  47 000c 18BF     		it	ne
  48 000e 072B     		cmpne	r3, #7
  49 0010 03D0     		beq	.L3
 311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != CLOSE_WAIT) &&
  50              		.loc 1 311 0
  51 0012 022B     		cmp	r3, #2
  52 0014 01D0     		beq	.L3
 312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_SENT) &&
  53              		.loc 1 312 0
  54 0016 032B     		cmp	r3, #3
  55 0018 41D1     		bne	.L9
  56              	.L3:
 313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_RCVD)) {
 314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_STATE | LWIP_DBG_LEVEL_SEVERE, ("tcp_write() called in 
 315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_CONN;
 316:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (len == 0) {
  57              		.loc 1 316 0
  58 001a 002D     		cmp	r5, #0
  59 001c 42D0     		beq	.L10
 317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 320:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* fail on too much data */
 321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len > pcb->snd_buf) {
  60              		.loc 1 321 0
  61 001e B4F86430 		ldrh	r3, [r4, #100]
  62 0022 9D42     		cmp	r5, r3
  63 0024 10D8     		bhi	.L16
 322:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_write: too much data (len=%"U16_F" 
 323:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 len, pcb->snd_buf));
 324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 326:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_write: queuelen: %"TCPWNDSIZE_F"\n", (tcpwnd_size_t)pcb->snd_qu
 329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 330:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If total number of pbufs on the unsent/unacked queues exceeds the
 331:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * configured maximum, return an error */
 332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check for configured max queuelen and possible overflow */
 333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen >= LWIP_MIN(TCP_SND_QUEUELEN, (TCP_SNDQUEUELEN_OVERFLOW + 1))) {
  64              		.loc 1 333 0
  65 0026 B4F86630 		ldrh	r3, [r4, #102]
  66 002a 082B     		cmp	r3, #8
  67 002c 13D8     		bhi	.L17
ARM GAS  /tmp/ccMjT2X9.s 			page 8


 334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_write: too long queue %"U16_F" (max
 335:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->snd_queuelen, (u16_t)TCP_SND_QUEUELEN));
 336:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 339:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 340:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
  68              		.loc 1 340 0
  69 002e 33B3     		cbz	r3, .L7
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: pbufs on queue => at least one queue non-empty",
  70              		.loc 1 341 0
  71 0030 236F     		ldr	r3, [r4, #112]
  72 0032 BBB1     		cbz	r3, .L18
 342:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: no pbufs on queue => both queues empty",
 345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked == NULL && pcb->unsent == NULL);
 346:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 347:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
  73              		.loc 1 347 0
  74 0034 0020     		movs	r0, #0
  75 0036 38BD     		pop	{r3, r4, r5, pc}
  76              	.LVL2:
  77              	.L15:
 307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  78              		.loc 1 307 0 discriminator 1
  79 0038 1B4B     		ldr	r3, .L21
  80 003a 40F23312 		movw	r2, #307
  81 003e 1B49     		ldr	r1, .L21+4
  82              	.LVL3:
  83 0040 1B48     		ldr	r0, .L21+8
  84              	.LVL4:
  85 0042 FFF7FEFF 		bl	printf
  86              	.LVL5:
  87 0046 DFE7     		b	.L2
  88              	.L16:
 324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
  89              		.loc 1 324 0
  90 0048 638B     		ldrh	r3, [r4, #26]
  91 004a 43F08003 		orr	r3, r3, #128
  92 004e 6383     		strh	r3, [r4, #26]	@ movhi
 325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
  93              		.loc 1 325 0
  94 0050 4FF0FF30 		mov	r0, #-1
  95 0054 38BD     		pop	{r3, r4, r5, pc}
  96              	.LVL6:
  97              	.L17:
 337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
  98              		.loc 1 337 0
  99 0056 638B     		ldrh	r3, [r4, #26]
 100 0058 43F08003 		orr	r3, r3, #128
 101 005c 6383     		strh	r3, [r4, #26]	@ movhi
 338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 102              		.loc 1 338 0
 103 005e 4FF0FF30 		mov	r0, #-1
 104 0062 38BD     		pop	{r3, r4, r5, pc}
 105              	.LVL7:
ARM GAS  /tmp/ccMjT2X9.s 			page 9


 106              	.L18:
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 107              		.loc 1 341 0 discriminator 1
 108 0064 E36E     		ldr	r3, [r4, #108]
 109 0066 0BB1     		cbz	r3, .L19
 110              		.loc 1 347 0
 111 0068 0020     		movs	r0, #0
 112 006a 38BD     		pop	{r3, r4, r5, pc}
 113              	.LVL8:
 114              	.L19:
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 115              		.loc 1 341 0 discriminator 2
 116 006c 0E4B     		ldr	r3, .L21
 117 006e 4FF4AB72 		mov	r2, #342
 118 0072 1049     		ldr	r1, .L21+12
 119 0074 0E48     		ldr	r0, .L21+8
 120 0076 FFF7FEFF 		bl	printf
 121              	.LVL9:
 122              		.loc 1 347 0 discriminator 2
 123 007a 0020     		movs	r0, #0
 124 007c 38BD     		pop	{r3, r4, r5, pc}
 125              	.LVL10:
 126              	.L7:
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked == NULL && pcb->unsent == NULL);
 127              		.loc 1 344 0
 128 007e 236F     		ldr	r3, [r4, #112]
 129 0080 43B1     		cbz	r3, .L20
 130              	.L8:
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked == NULL && pcb->unsent == NULL);
 131              		.loc 1 344 0 is_stmt 0 discriminator 3
 132 0082 094B     		ldr	r3, .L21
 133 0084 40F25912 		movw	r2, #345
 134 0088 0B49     		ldr	r1, .L21+16
 135 008a 0948     		ldr	r0, .L21+8
 136 008c FFF7FEFF 		bl	printf
 137              	.LVL11:
 138              		.loc 1 347 0 is_stmt 1 discriminator 3
 139 0090 0020     		movs	r0, #0
 140 0092 38BD     		pop	{r3, r4, r5, pc}
 141              	.LVL12:
 142              	.L20:
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked == NULL && pcb->unsent == NULL);
 143              		.loc 1 344 0 discriminator 2
 144 0094 E36E     		ldr	r3, [r4, #108]
 145 0096 002B     		cmp	r3, #0
 146 0098 F3D1     		bne	.L8
 147              		.loc 1 347 0
 148 009a 0020     		movs	r0, #0
 348:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 149              		.loc 1 348 0
 150 009c 38BD     		pop	{r3, r4, r5, pc}
 151              	.LVL13:
 152              	.L9:
 315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (len == 0) {
 153              		.loc 1 315 0
 154 009e 6FF00A00 		mvn	r0, #10
 155 00a2 38BD     		pop	{r3, r4, r5, pc}
ARM GAS  /tmp/ccMjT2X9.s 			page 10


 156              	.LVL14:
 157              	.L10:
 317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 158              		.loc 1 317 0
 159 00a4 0020     		movs	r0, #0
 160 00a6 38BD     		pop	{r3, r4, r5, pc}
 161              	.LVL15:
 162              	.L22:
 163              		.align	2
 164              	.L21:
 165 00a8 00000000 		.word	.LC0
 166 00ac 30000000 		.word	.LC1
 167 00b0 50000000 		.word	.LC2
 168 00b4 78000000 		.word	.LC3
 169 00b8 B4000000 		.word	.LC4
 170              		.cfi_endproc
 171              	.LFE161:
 173              		.section	.text.tcp_output_segment_busy,"ax",%progbits
 174              		.align	1
 175              		.syntax unified
 176              		.thumb
 177              		.thumb_func
 178              		.fpu fpv5-d16
 180              	tcp_output_segment_busy:
 181              	.LFB167:
 349:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 350:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 351:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @ingroup tcp_raw
 352:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Write data for sending (but does not send it immediately).
 353:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 354:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * It waits in the expectation of more data being sent soon (as
 355:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * it can send them more efficiently by combining them together).
 356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * To prompt the system to send data now, call tcp_output() after
 357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * calling tcp_write().
 358:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 
 359:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This function enqueues the data pointed to by the argument dataptr. The length of
 360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the data is passed as the len parameter. The apiflags can be one or more of:
 361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_COPY: indicates whether the new memory should be allocated
 362:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   for the data to be copied into. If this flag is not given, no new memory
 363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   should be allocated and the data should only be referenced by pointer. This
 364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   also means that the memory behind dataptr must not change until the data is
 365:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   ACKed by the remote host
 366:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_MORE: indicates that more data follows. If this is omitted,
 367:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   the PSH flag is set in the last segment created by this call to tcp_write.
 368:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   If this flag is given, the PSH flag is not set.
 369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The tcp_write() function will fail and return ERR_MEM if the length
 371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * of the data exceeds the current send buffer size or if the length of
 372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the queue of outgoing segment is larger than the upper limit defined
 373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * in lwipopts.h. The number of bytes available in the output queue can
 374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * be retrieved with the tcp_sndbuf() function.
 375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 376:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The proper way to use this function is to call the function with at
 377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * most tcp_sndbuf() bytes of data. If the function returns ERR_MEM,
 378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the application should wait until some of the currently enqueued
 379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * data has been successfully received by the other host and try again.
 380:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
ARM GAS  /tmp/ccMjT2X9.s 			page 11


 381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to enqueue data for.
 382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param arg Pointer to the data to be enqueued for sending.
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param len Data length in bytes
 384:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param apiflags combination of following flags :
 385:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_COPY (0x01) data will be copied into memory belonging to the stack
 386:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_MORE (0x02) for TCP connection, PSH flag will not be set on last segment sent,
 387:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if enqueued, another err_t on error
 388:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 390:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_write(struct tcp_pcb *pcb, const void *arg, u16_t len, u8_t apiflags)
 391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *concat_p = NULL;
 393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 395:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t queuelen;
 396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
 397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags = 0;
 398:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize = 0;
 400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_used = 0;
 401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 402:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_add = 0;
 403:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK*/
 404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t extendlen = 0;
 406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 407:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t concat_chksum = 0;
 408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t concat_chksum_swapped = 0;
 409:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t concat_chksummed = 0;
 410:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 412:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t mss_local;
 413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ERROR("tcp_write: invalid pcb", pcb != NULL, return ERR_ARG);
 415:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 416:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* don't allocate segments bigger than half the maximum window we ever received */
 417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = LWIP_MIN(pcb->mss, TCPWND_MIN16(pcb->snd_wnd_max / 2));
 418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = mss_local ? mss_local : pcb->mss;
 419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT_CORE_LOCKED();
 421:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 422:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 423:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Always copy to try to create single pbufs for TX */
 424:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   apiflags |= TCP_WRITE_FLAG_COPY;
 425:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 426:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 427:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_write(pcb=%p, data=%p, len=%"U16_F", apiflags=%"U16_F")\n",
 428:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  (void *)pcb, arg, len, (u16_t)apiflags));
 429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ERROR("tcp_write: arg == NULL (programmer violates API)",
 430:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 431:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_write_checks(pcb, len);
 433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return err;
 435:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   queuelen = pcb->snd_queuelen;
 437:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/ccMjT2X9.s 			page 12


 438:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 439:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->flags & TF_TIMESTAMP)) {
 440:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Make sure the timestamp option is only included in data segments if we
 441:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        agreed about it with the remote host. */
 442:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_TS;
 443:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(TF_SEG_OPTS_TS, pcb);
 444:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* ensure that segments can hold at least one data byte... */
 445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss_local = LWIP_MAX(mss_local, LWIP_TCP_OPT_LEN_TS + 1);
 446:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else
 447:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS */
 448:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   {
 449:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
 450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 452:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 453:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * TCP segmentation is done in three phases with increasing complexity:
 455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 1. Copy data directly into an oversized pbuf.
 457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 2. Chain a new pbuf to the end of pcb->unsent.
 458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 3. Create new segments.
 459:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 460:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * We may run out of memory at any point. In that case we must
 461:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * return ERR_MEM and not change anything in pcb. Therefore, all
 462:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * changes are recorded in local variables and committed at the end
 463:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * of the function. Some pcb fields are maintained in local copies:
 464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * queuelen = pcb->snd_queuelen
 466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * oversize = pcb->unsent_oversize
 467:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * These variables are set consistently by the phases:
 469:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 470:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * seg points to the last segment tampered with.
 471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * pos records progress as data is segmented.
 473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Find the tail of the unsent queue. */
 476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent != NULL) {
 477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t space;
 478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t unsent_optlen;
 479:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 480:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* @todo: this could be sped up by keeping last_unsent in the pcb */
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (last_unsent = pcb->unsent; last_unsent->next != NULL;
 482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 483:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 484:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Usable space at the end of the last unsent segment */
 485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     unsent_optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(last_unsent->flags, pcb);
 486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("mss_local is too small", mss_local >= last_unsent->len + unsent_optlen);
 487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 489:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*
 490:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Phase 1: Copy data directly into an oversized pbuf.
 491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 492:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * The number of bytes copied is recorded in the oversize_used
 493:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * variable. The actual copying is done at the bottom of the
 494:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * function.
ARM GAS  /tmp/ccMjT2X9.s 			page 13


 495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 498:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* check that pcb->unsent_oversize matches last_unsent->oversize_left */
 499:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("unsent_oversize mismatch (pcb vs. last_unsent)",
 500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == last_unsent->oversize_left);
 501:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     oversize = pcb->unsent_oversize;
 503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (oversize > 0) {
 504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("inconsistent oversize vs. space", oversize <= space);
 505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize_used = LWIP_MIN(space, LWIP_MIN(oversize, len));
 507:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize -= oversize_used;
 509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       space -= oversize_used;
 510:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 511:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* now we are either finished or oversize is zero */
 512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("inconsistent oversize vs. len", (oversize == 0) || (pos == len));
 513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 514:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 515:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if !LWIP_NETIF_TX_SINGLE_PBUF
 516:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*
 517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Phase 2: Chain a new pbuf to the end of pcb->unsent.
 518:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 519:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * As an exception when NOT copying the data, if the given data buffer
 520:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * directly follows the last unsent data buffer in memory, extend the last
 521:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * ROM pbuf reference to the buffer, thus saving a ROM pbuf allocation.
 522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * We don't extend segments containing SYN/FIN flags or options
 524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * (len==0). The new pbuf is kept in concat_p and pbuf_cat'ed at
 525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * the end.
 526:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * This phase is skipped for LWIP_NETIF_TX_SINGLE_PBUF as we could only execute
 528:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * it after rexmit puts a segment from unacked to unsent and at this point,
 529:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * oversize info is lost.
 530:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pos < len) && (space > 0) && (last_unsent->len > 0)) {
 532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Create a pbuf with a copy or reference to seglen bytes. We
 536:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * can use PBUF_RAW here since the data appears in the middle of
 537:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * a segment. A header will never be prepended. */
 538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (apiflags & TCP_WRITE_FLAG_COPY) {
 539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is copied */
 540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if ((concat_p = tcp_pbuf_prealloc(PBUF_RAW, seglen, space, &oversize, pcb, apiflags, 1)) ==
 541:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 542:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                       ("tcp_write : could not allocate memory for pbuf copy size %"U16_F"\n",
 543:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        seglen));
 544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           goto memerr;
 545:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 546:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 547:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         oversize_add = oversize;
 548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY2(concat_p->payload, (const u8_t *)arg + pos, seglen, &concat_chksum, &concat_
 550:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 551:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_chksummed += seglen;
ARM GAS  /tmp/ccMjT2X9.s 			page 14


 552:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         queuelen += pbuf_clen(concat_p);
 554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
 555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is not copied */
 556:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If the last unsent pbuf is of type PBUF_ROM, try to extend it. */
 557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         struct pbuf *p;
 558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         for (p = last_unsent->p; p->next != NULL; p = p->next);
 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (((p->type_internal & (PBUF_TYPE_FLAG_STRUCT_DATA_CONTIGUOUS | PBUF_TYPE_FLAG_DATA_VOLAT
 560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_ASSERT("tcp_write: ROM pbufs cannot be oversized", pos == 0);
 562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           if ((concat_p = pbuf_alloc(PBUF_RAW, seglen, PBUF_ROM)) == NULL) {
 565:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 566:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         ("tcp_write: could not allocate memory for zero-copy pbuf\n"));
 567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             goto memerr;
 568:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
 569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* reference the non-volatile payload data */
 570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           ((struct pbuf_rom *)concat_p)->payload = (const u8_t *)arg + pos;
 571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           queuelen += pbuf_clen(concat_p);
 572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 573:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 574:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* calculate the checksum of nocopy-data */
 575:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         tcp_seg_add_chksum(~inet_chksum((const u8_t *)arg + pos, seglen), seglen,
 576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                            &concat_chksum, &concat_chksum_swapped);
 577:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_chksummed += seglen;
 578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 579:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 580:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += seglen;
 582:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 583:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* !LWIP_NETIF_TX_SINGLE_PBUF */
 584:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 585:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("unsent_oversize mismatch (pcb->unsent is NULL)",
 587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 588:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 590:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 591:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 592:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 3: Create new segments.
 593:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 594:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * The new segments are chained together in the local 'queue'
 595:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * variable, ready to be appended to pcb->unsent.
 596:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (pos < len) {
 598:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t left = len - pos;
 600:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t max_len = mss_local - optlen;
 601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t seglen = LWIP_MIN(left, max_len);
 602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 603:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t chksum = 0;
 604:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t chksum_swapped = 0;
 605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 606:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (apiflags & TCP_WRITE_FLAG_COPY) {
 608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* If copy is set, memory should be allocated and data copied
ARM GAS  /tmp/ccMjT2X9.s 			page 15


 609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * into pbuf */
 610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p = tcp_pbuf_prealloc(PBUF_TRANSPORT, seglen + optlen, mss_local, &oversize, pcb, apifla
 611:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write : could not allocate mem
 612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("tcp_write: check that first pbuf can hold the complete seglen",
 615:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCP_DATA_COPY2((char *)p->payload + optlen, (const u8_t *)arg + pos, seglen, &chksum, &chksum
 617:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 618:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Copy is not set: First allocate a pbuf for holding the data.
 619:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * Since the referenced data is available at least until it is
 620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * sent out on the link (as it has to be ACKed by the remote
 621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * party) we can safely use PBUF_ROM instead of PBUF_REF here.
 622:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        */
 623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       struct pbuf *p2;
 624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("oversize == 0", oversize == 0);
 626:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p2 = pbuf_alloc(PBUF_TRANSPORT, seglen, PBUF_ROM)) == NULL) {
 628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 630:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 631:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* calculate the checksum of nocopy-data */
 633:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       chksum = ~inet_chksum((const u8_t *)arg + pos, seglen);
 634:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (seglen & 1) {
 635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         chksum_swapped = 1;
 636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         chksum = SWAP_BYTES_IN_WORD(chksum);
 637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 639:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* reference the non-volatile payload data */
 640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((struct pbuf_rom *)p2)->payload = (const u8_t *)arg + pos;
 641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Second, allocate a pbuf for the headers. */
 643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p = pbuf_alloc(PBUF_TRANSPORT, optlen, PBUF_RAM)) == NULL) {
 644:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If allocation fails, we have to deallocate the data pbuf as
 645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * well. */
 646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pbuf_free(p2);
 647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 650:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Concatenate the headers and data pbufs together. */
 651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pbuf_cat(p/*header*/, p2/*data*/);
 652:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     queuelen += pbuf_clen(p);
 655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Now that there are more segments queued, we check again if the
 657:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * length of the queue exceeds the configured maximum or
 658:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * overflows. */
 659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (queuelen > LWIP_MIN(TCP_SND_QUEUELEN, TCP_SNDQUEUELEN_OVERFLOW)) {
 660:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: queue too long %"U16_F" (
 661:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   queuelen, (int)TCP_SND_QUEUELEN));
 662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pbuf_free(p);
 663:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 665:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/ccMjT2X9.s 			page 16


 666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((seg = tcp_create_segment(pcb, p, 0, pcb->snd_lbb + pos, optflags)) == NULL) {
 667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 668:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 670:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->oversize_left = oversize;
 671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 672:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum = chksum;
 674:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum_swapped = chksum_swapped;
 675:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->flags |= TF_SEG_DATA_CHECKSUMMED;
 676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 677:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 678:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* first segment of to-be-queued data? */
 679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (queue == NULL) {
 680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       queue = seg;
 681:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 682:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Attach the segment to the end of the queued segments */
 683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("prev_seg != NULL", prev_seg != NULL);
 684:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 685:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 686:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* remember last segment of to-be-queued data for next iteration */
 687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     prev_seg = seg;
 688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 689:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_TRACE, ("tcp_write: queueing %"U32_F":%"U32_F"\n",
 690:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 lwip_ntohl(seg->tcphdr->seqno),
 691:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg)));
 692:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 693:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pos += seglen;
 694:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 695:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 696:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 697:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * All three segmentation phases were successful. We can commit the
 698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * transaction.
 699:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 700:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 701:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((last_unsent != NULL) && (oversize_add != 0)) {
 702:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->oversize_left += oversize_add;
 703:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 705:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 707:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 1: If data has been added to the preallocated tail of
 708:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * last_unsent, we update the length fields of the pbuf chain.
 709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 710:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (oversize_used > 0) {
 712:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 713:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Bump tot_len of whole chain, len of tail */
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (p = last_unsent->p; p; p = p->next) {
 715:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 716:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (p->next == NULL) {
 717:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY((char *)p->payload + p->len, arg, oversize_used, last_unsent);
 718:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         p->len += oversize_used;
 719:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 720:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 721:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += oversize_used;
 722:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
ARM GAS  /tmp/ccMjT2X9.s 			page 17


 723:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("last_unsent->oversize_left >= oversize_used",
 724:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent->oversize_left >= oversize_used);
 725:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->oversize_left -= oversize_used;
 726:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 727:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 728:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent_oversize = oversize;
 729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 730:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 731:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 2: concat_p can be concatenated onto last_unsent->p, unless we
 733:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * determined that the last ROM pbuf can be extended to include the new data.
 734:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_p != NULL) {
 736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: cannot concatenate when pcb->unsent is empty",
 737:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (last_unsent != NULL));
 738:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_cat(last_unsent->p, concat_p);
 739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += concat_p->tot_len;
 740:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (extendlen > 0) {
 741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: extension of reference requires reference",
 743:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent != NULL && last_unsent->p != NULL);
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (p = last_unsent->p; p->next != NULL; p = p->next) {
 745:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 746:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->tot_len += extendlen;
 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->len += extendlen;
 749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += extendlen;
 750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 751:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 752:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_chksummed) {
 754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: concat checksum needs concatenated data",
 755:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 concat_p != NULL || extendlen > 0);
 756:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*if concat checksumm swapped - swap it back */
 757:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (concat_chksum_swapped) {
 758:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       concat_chksum = SWAP_BYTES_IN_WORD(concat_chksum);
 759:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 760:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_add_chksum(concat_chksum, concat_chksummed, &last_unsent->chksum,
 761:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        &last_unsent->chksum_swapped);
 762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->flags |= TF_SEG_DATA_CHECKSUMMED;
 763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 764:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 765:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 766:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 767:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 3: Append queue to pcb->unsent. Queue may be NULL, but that
 768:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * is harmless
 769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 770:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (last_unsent == NULL) {
 771:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = queue;
 772:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->next = queue;
 774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 775:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 776:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 777:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Finally update the pcb state.
 778:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 779:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_lbb += len;
ARM GAS  /tmp/ccMjT2X9.s 			page 18


 780:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_buf -= len;
 781:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen = queuelen;
 782:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 783:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_write: %"S16_F" (after enqueued)\n",
 784:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                pcb->snd_queuelen));
 785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length",
 787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 788:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 789:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 790:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Set the PSH flag in the last segment that we enqueued. */
 791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg != NULL && seg->tcphdr != NULL && ((apiflags & TCP_WRITE_FLAG_MORE) == 0)) {
 792:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 793:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 795:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 796:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** memerr:
 797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_set_flags(pcb, TF_NAGLEMEMERR);
 798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 799:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_p != NULL) {
 801:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(concat_p);
 802:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (queue != NULL) {
 804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_segs_free(queue);
 805:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 806:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length", pcb->unacked != NULL ||
 808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent != NULL);
 809:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 810:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG | LWIP_DBG_STATE, ("tcp_write: %"S16_F" (with mem err)\n", pcb->snd_qu
 811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_MEM;
 812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 813:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 814:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 815:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Split segment on the head of the unsent queue.  If return is not
 816:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * ERR_OK, existing head remains intact
 817:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 818:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The split is accomplished by creating a new TCP segment and pbuf
 819:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * which holds the remainder payload after the split.  The original
 820:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * pbuf is trimmed to new length.  This allows splitting of read-only
 821:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * pbufs
 822:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 823:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to split the unsent head
 824:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param split the amount of payload to remain in the head
 825:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 826:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_split_unsent_seg(struct tcp_pcb *pcb, u16_t split)
 828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg = NULL, *useg = NULL;
 830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p = NULL;
 831:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
 832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags;
 833:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t split_flags;
 834:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t remainder_flags;
 835:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t remainder;
 836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t offset;
ARM GAS  /tmp/ccMjT2X9.s 			page 19


 837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 838:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t chksum = 0;
 839:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t chksum_swapped = 0;
 840:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *q;
 841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_split_unsent_seg: invalid pcb", pcb != NULL);
 844:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 845:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg = pcb->unsent;
 846:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg == NULL) {
 847:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 848:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 849:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 850:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (split == 0) {
 851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("Can't split segment into length 0", 0);
 852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 853:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 854:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg->len <= split) {
 856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 857:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("split <= mss", split <= pcb->mss);
 860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("useg->len > 0", useg->len > 0);
 861:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 862:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* We should check that we don't exceed TCP_SND_QUEUELEN but we need
 863:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * to split this packet so we may actually exceed the max value by
 864:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * one!
 865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 866:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue: split_unsent_seg: %u\n", (unsigned int)pcb->snd_queuel
 867:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optflags = useg->flags;
 869:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 870:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Remove since checksum is not stored until after tcp_create_segment() */
 871:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optflags &= ~TF_SEG_DATA_CHECKSUMMED;
 872:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH(optflags);
 874:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder = useg->len - split;
 875:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Create new pbuf for the remainder of the split */
 877:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(PBUF_TRANSPORT, remainder + optlen, PBUF_RAM);
 878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 879:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_split_unsent_seg: could not allocate memory for pbuf remainder %u\n", remaind
 881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto memerr;
 882:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 883:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 884:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Offset into the original pbuf is past TCP/IP headers, options, and split amount */
 885:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   offset = useg->p->tot_len - useg->len + split;
 886:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Copy remainder into new pbuf, headers and options will not be filled out */
 887:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pbuf_copy_partial(useg->p, (u8_t *)p->payload + optlen, remainder, offset ) != remainder) {
 888:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 889:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_split_unsent_seg: could not copy pbuf remainder %u\n", remainder));
 890:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto memerr;
 891:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 892:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 893:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* calculate the checksum on remainder data */
ARM GAS  /tmp/ccMjT2X9.s 			page 20


 894:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(~inet_chksum((const u8_t *)p->payload + optlen, remainder), remainder,
 895:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      &chksum, &chksum_swapped);
 896:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 897:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 898:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Options are created when calling tcp_output() */
 899:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 900:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Migrate flags from original segment */
 901:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   split_flags = TCPH_FLAGS(useg->tcphdr);
 902:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder_flags = 0; /* ACK added in tcp_output() */
 903:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 904:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (split_flags & TCP_PSH) {
 905:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     split_flags &= ~TCP_PSH;
 906:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remainder_flags |= TCP_PSH;
 907:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 908:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (split_flags & TCP_FIN) {
 909:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     split_flags &= ~TCP_FIN;
 910:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remainder_flags |= TCP_FIN;
 911:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 912:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* SYN should be left on split, RST should not be present with data */
 913:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 914:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = tcp_create_segment(pcb, p, remainder_flags, lwip_ntohl(useg->tcphdr->seqno) + split, optfla
 915:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 916:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 917:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_split_unsent_seg: could not create new TCP segment\n"));
 918:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto memerr;
 919:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 920:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 921:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 922:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum = chksum;
 923:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum_swapped = chksum_swapped;
 924:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags |= TF_SEG_DATA_CHECKSUMMED;
 925:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 926:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 927:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Remove this segment from the queue since trimming it may free pbufs */
 928:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen -= pbuf_clen(useg->p);
 929:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 930:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Trim the original pbuf into our split size.  At this point our remainder segment must be setup
 931:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   successfully because we are modifying the original segment */
 932:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_realloc(useg->p, useg->p->tot_len - remainder);
 933:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->len -= remainder;
 934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_SET_FLAG(useg->tcphdr, split_flags);
 935:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 936:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* By trimming, realloc may have actually shrunk the pbuf, so clear oversize_left */
 937:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->oversize_left = 0;
 938:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 939:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 940:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Add back to the queue with new trimmed pbuf */
 941:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(useg->p);
 942:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 943:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 944:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The checksum on the split segment is now incorrect. We need to re-run it over the split */
 945:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->chksum = 0;
 946:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->chksum_swapped = 0;
 947:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   q = useg->p;
 948:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   offset = q->tot_len - useg->len; /* Offset due to exposed headers */
 949:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 950:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Advance to the pbuf where the offset ends */
ARM GAS  /tmp/ccMjT2X9.s 			page 21


 951:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (q != NULL && offset > q->len) {
 952:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     offset -= q->len;
 953:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     q = q->next;
 954:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 955:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("Found start of payload pbuf", q != NULL);
 956:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Checksum the first payload pbuf accounting for offset, then other pbufs are all payload */
 957:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (; q != NULL; offset = 0, q = q->next) {
 958:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_add_chksum(~inet_chksum((const u8_t *)q->payload + offset, q->len - offset), q->len - o
 959:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        &useg->chksum, &useg->chksum_swapped);
 960:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 961:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 962:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 963:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Update number of segments on the queues. Note that length now may
 964:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * exceed TCP_SND_QUEUELEN! We don't have to touch pcb->snd_buf
 965:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * because the total amount of data is constant when packet is split */
 966:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(seg->p);
 967:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 968:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Finally insert remainder into queue after split (which stays head) */
 969:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = useg->next;
 970:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->next = seg;
 971:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 972:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 973:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If remainder is last segment on the unsent, ensure we clear the oversize amount
 974:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * because the remainder is always sized to the exact remaining amount */
 975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->next == NULL) {
 976:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
 977:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 978:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 979:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 980:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 981:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** memerr:
 982:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 983:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("seg == NULL", seg == NULL);
 985:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 986:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(p);
 987:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 988:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_MEM;
 990:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 991:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 992:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 993:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_close() to send a segment including FIN flag but not data.
 994:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This FIN may be added to an existing segment or a new, otherwise empty
 995:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * segment is enqueued.
 996:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 997:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb over which to send a segment
 998:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if sent, another err_t otherwise
 999:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1000:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1001:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_send_fin(struct tcp_pcb *pcb)
1002:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_send_fin: invalid pcb", pcb != NULL);
1004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1005:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* first, try to add the fin to the last unsent segment */
1006:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent != NULL) {
1007:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *last_unsent;
ARM GAS  /tmp/ccMjT2X9.s 			page 22


1008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (last_unsent = pcb->unsent; last_unsent->next != NULL;
1009:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
1010:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((TCPH_FLAGS(last_unsent->tcphdr) & (TCP_SYN | TCP_FIN | TCP_RST)) == 0) {
1012:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* no SYN/FIN/RST flag in the header, we can add the FIN flag */
1013:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(last_unsent->tcphdr, TCP_FIN);
1014:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_FIN);
1015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_OK;
1016:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1017:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1018:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* no data, no length, flags, copy=1, no optdata */
1019:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return tcp_enqueue_flags(pcb, TCP_FIN);
1020:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1021:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1022:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1023:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Enqueue SYN or FIN for transmission.
1024:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by @ref tcp_connect, tcp_listen_input, and @ref tcp_close
1026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (via @ref tcp_send_fin)
1027:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1028:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection.
1029:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param flags TCP header flags to set in the outgoing segment.
1030:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1031:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1032:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_enqueue_flags(struct tcp_pcb *pcb, u8_t flags)
1033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1035:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1036:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags = 0;
1037:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
1038:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1039:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: queuelen: %"U16_F"\n", (u16_t)pcb->snd_queuelen)
1040:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: need either TCP_SYN or TCP_FIN in flags (programmer violates API)
1042:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid pcb", pcb != NULL);
1044:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* No need to check pcb->snd_queuelen if only SYN or FIN are allowed! */
1046:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1047:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Get options for this segment. This is a special case since this is the
1048:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      only place where a SYN can be sent. */
1049:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (flags & TCP_SYN) {
1050:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_MSS;
1051:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1052:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pcb->state != SYN_RCVD) || (pcb->flags & TF_WND_SCALE)) {
1053:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* In a <SYN,ACK> (sent in state SYN_RCVD), the window scale option may only
1054:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          be sent if we received a window scale option from the remote host. */
1055:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optflags |= TF_SEG_OPTS_WND_SCALE;
1056:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1057:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_WND_SCALE */
1058:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1059:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pcb->state != SYN_RCVD) || (pcb->flags & TF_SACK)) {
1060:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* In a <SYN,ACK> (sent in state SYN_RCVD), the SACK_PERM option may only
1061:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          be sent if we received a SACK_PERM option from the remote host. */
1062:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optflags |= TF_SEG_OPTS_SACK_PERM;
1063:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1064:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_SACK_OUT */
ARM GAS  /tmp/ccMjT2X9.s 			page 23


1065:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1066:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1067:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->flags & TF_TIMESTAMP) || ((flags & TCP_SYN) && (pcb->state != SYN_RCVD))) {
1068:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Make sure the timestamp option is only included in data segments if we
1069:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        agreed about it with the remote host (and in active open SYN segments). */
1070:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags |= TF_SEG_OPTS_TS;
1071:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1072:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS */
1073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(optflags, pcb);
1074:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1075:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Allocate pbuf with room for TCP header + options */
1076:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((p = pbuf_alloc(PBUF_TRANSPORT, optlen, PBUF_RAM)) == NULL) {
1077:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
1078:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
1079:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
1080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: check that first pbuf can hold optlen",
1082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
1083:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Allocate memory for tcp_seg, and fill in fields. */
1085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((seg = tcp_create_segment(pcb, p, flags, pcb->snd_lbb, optflags)) == NULL) {
1086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
1087:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
1088:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
1089:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("seg->tcphdr not aligned", ((mem_ptr_t)seg->tcphdr % LWIP_MIN(MEM_ALIGNMENT, 4)) == 0
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
1092:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_TRACE,
1094:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_enqueue_flags: queueing %"U32_F":%"U32_F" (0x%"X16_F")\n",
1095:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                lwip_ntohl(seg->tcphdr->seqno),
1096:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg),
1097:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                (u16_t)flags));
1098:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1099:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Now append seg to pcb->unsent queue */
1100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
1101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg;
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *useg;
1104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (useg = pcb->unsent; useg->next != NULL; useg = useg->next);
1105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
1106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The new unsent tail has no space */
1109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent_oversize = 0;
1110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* SYN and FIN bump the sequence number */
1113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((flags & TCP_SYN) || (flags & TCP_FIN)) {
1114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_lbb++;
1115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* optlen does not influence snd_buf */
1116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (flags & TCP_FIN) {
1118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_FIN);
1119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* update number of segments on the queues */
ARM GAS  /tmp/ccMjT2X9.s 			page 24


1122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(seg->p);
1123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: %"S16_F" (after enqueued)\n", pcb->snd_queuelen)
1124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_enqueue_flags: invalid queue length",
1126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
1127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
1130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Build a timestamp option (12 bytes long) at the specified options pointer)
1134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
1136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the timestamp option
1137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_timestamp_option(const struct tcp_pcb *pcb, u32_t *opts)
1140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_timestamp_option: invalid pcb", pcb != NULL);
1142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with two NOP options to make everything nicely aligned */
1144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[0] = PP_HTONL(0x0101080A);
1145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[1] = lwip_htonl(sys_now());
1146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[2] = lwip_htonl(pcb->ts_recent);
1147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Calculates the number of SACK entries that should be generated.
1153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * It takes into account whether TF_SACK flag is set,
1154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the number of SACK entries in tcp_pcb that are valid,
1155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * as well as the available options size.
1156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
1158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optlen the length of other TCP options (in bytes)
1159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return the number of SACK ranges that can be used
1160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static u8_t
1162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_get_num_sacks(const struct tcp_pcb *pcb, u8_t optlen)
1163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t num_sacks = 0;
1165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_get_num_sacks: invalid pcb", pcb != NULL);
1167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_SACK) {
1169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t i;
1170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* The first SACK takes up 12 bytes (it includes SACK header and two NOP options),
1172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        each additional one - 8 bytes. */
1173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen += 12;
1174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Max options size = 40, number of SACK array entries = LWIP_TCP_MAX_SACK_NUM */
1176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (i = 0; (i < LWIP_TCP_MAX_SACK_NUM) && (optlen <= TCP_MAX_OPTION_BYTES) &&
1177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          LWIP_TCP_SACK_VALID(pcb, i); ++i) {
1178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ++num_sacks;
ARM GAS  /tmp/ccMjT2X9.s 			page 25


1179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optlen += 8;
1180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return num_sacks;
1184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Build a SACK option (12 or more bytes long) at the specified options pointer)
1187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
1189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the SACK option
1190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param num_sacks the number of SACKs to store
1191:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1192:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_sack_option(const struct tcp_pcb *pcb, u32_t *opts, u8_t num_sacks)
1194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1195:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t i;
1196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_sack_option: invalid pcb", pcb != NULL);
1198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_sack_option: invalid opts", opts != NULL);
1199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with two NOP options to make everything nicely aligned.
1201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      We add the length (of just the SACK option, not the NOPs in front of it),
1202:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      which is 2B of header, plus 8B for each SACK. */
1203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *(opts++) = PP_HTONL(0x01010500 + 2 + num_sacks * 8);
1204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (i = 0; i < num_sacks; ++i) {
1206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *(opts++) = lwip_htonl(pcb->rcv_sacks[i].left);
1207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *(opts++) = lwip_htonl(pcb->rcv_sacks[i].right);
1208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1210:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1212:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1214:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Build a window scale option (3 bytes long) at the specified options pointer)
1215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1216:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the window scale option
1217:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1219:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_wnd_scale_option(u32_t *opts)
1220:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1221:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_wnd_scale_option: invalid opts", opts != NULL);
1222:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with one NOP option to make everything nicely aligned */
1224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[0] = PP_HTONL(0x01030300 | TCP_RCV_SCALE);
1225:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1226:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1229:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @ingroup tcp_raw
1230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Find out what we can send and send it
1231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to send data
1233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if data has been sent or nothing to send
1234:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *         another err_t on error
1235:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
ARM GAS  /tmp/ccMjT2X9.s 			page 26


1236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1237:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output(struct tcp_pcb *pcb)
1238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1239:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg, *useg;
1240:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t wnd, snd_nxt;
1241:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1243:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1244:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   s16_t i = 0;
1245:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1246:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT_CORE_LOCKED();
1248:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output: invalid pcb", pcb != NULL);
1250:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* pcb->state LISTEN not allowed here */
1251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("don't call tcp_output for listen-pcbs",
1252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               pcb->state != LISTEN);
1253:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* First, check if we are invoked by the TCP input processing
1255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      code. If so, we do not output anything. Instead, we rely on the
1256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      input processing code to call us when input processing is done
1257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      with. */
1258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_input_pcb == pcb) {
1259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
1260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = LWIP_MIN(pcb->snd_wnd, pcb->cwnd);
1263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unsent;
1265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
1267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: nothing to send (%p)\n",
1268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                    (void *)pcb->unsent));
1269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG, ("tcp_output: snd_wnd %"TCPWNDSIZE_F
1270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  ", cwnd %"TCPWNDSIZE_F", wnd %"U32_F
1271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  ", seg == NULL, ack %"U32_F"\n",
1272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->snd_wnd, pcb->cwnd, wnd, pcb->lastack));
1273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* If the TF_ACK_NOW flag is set and the ->unsent queue is empty, construct
1275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * an empty ACK segment and send it. */
1276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->flags & TF_ACK_NOW) {
1277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return tcp_send_empty_ack(pcb);
1278:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1279:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* nothing to send: shortcut out of here */
1280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto output_done;
1281:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1282:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG,
1283:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_output: snd_wnd %"TCPWNDSIZE_F", cwnd %"TCPWNDSIZE_F", wnd %"U32_F
1284:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  ", effwnd %"U32_F", seq %"U32_F", ack %"U32_F"\n",
1285:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  pcb->snd_wnd, pcb->cwnd, wnd,
1286:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len,
1287:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(seg->tcphdr->seqno), pcb->lastack));
1288:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1289:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = tcp_route(pcb, &pcb->local_ip, &pcb->remote_ip);
1291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
1292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_RTE;
ARM GAS  /tmp/ccMjT2X9.s 			page 27


1293:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1294:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1295:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If we don't have a local IP address, we get one from netif */
1296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (ip_addr_isany(&pcb->local_ip)) {
1297:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
1298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (local_ip == NULL) {
1299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_RTE;
1300:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ip_addr_copy(pcb->local_ip, *local_ip);
1302:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1303:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1304:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Handle the current segment not fitting within the window */
1305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd) {
1306:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* We need to start the persistent timer when the next unsent segment does not fit
1307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * within the remaining (could be 0) send window and RTO timer is not running (we
1308:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * have no in-flight data). If window is still too small after persist timer fires,
1309:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * then we split the segment. We don't consider the congestion window since a cwnd
1310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * smaller than 1 SMSS implies in-flight data
1311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (wnd == pcb->snd_wnd && pcb->unacked == NULL && pcb->persist_backoff == 0) {
1313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
1314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_backoff = 1;
1315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_probe = 0;
1316:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* We need an ACK, but can't send data now, so send an empty ACK */
1318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->flags & TF_ACK_NOW) {
1319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return tcp_send_empty_ack(pcb);
1320:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto output_done;
1322:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1323:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Stop persist timer, above conditions are not active */
1324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->persist_backoff = 0;
1325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1326:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* useg should point to last segment on unacked queue */
1327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg = pcb->unacked;
1328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg != NULL) {
1329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (; useg->next != NULL; useg = useg->next);
1330:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1331:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* data available and window allows it to be sent? */
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (seg != NULL &&
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
1334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
1335:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
1336:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Stop sending if the nagle algorithm would prevent it
1337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Don't stop:
1338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * - if tcp_write had a memory error before (prevent delayed ACK timeout) or
1339:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * - if FIN was already enqueued for this PCB (SYN is always alone in a segment -
1340:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *   either seg->next != NULL or pcb->unacked == NULL;
1341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *   RST is no sent using tcp_write/tcp_output.
1342:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((tcp_do_output_nagle(pcb) == 0) &&
1344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
1345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       break;
1346:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1347:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1348:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG, ("tcp_output: snd_wnd %"TCPWNDSIZE_F", cwnd %"TCPWNDSIZE_F", wnd %"
1349:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->snd_wnd, pcb->cwnd, wnd,
ARM GAS  /tmp/ccMjT2X9.s 			page 28


1350:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  lwip_ntohl(seg->tcphdr->seqno) + seg->len -
1351:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->lastack,
1352:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  lwip_ntohl(seg->tcphdr->seqno), pcb->lastack, i));
1353:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++i;
1354:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1355:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
1357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(seg->tcphdr, TCP_ACK);
1358:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1359:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = tcp_output_segment(seg, pcb, netif);
1361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (err != ERR_OK) {
1362:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* segment could not be sent, for whatever reason */
1363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_NAGLEMEMERR);
1364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return err;
1365:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1366:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
1367:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->oversize_left = 0;
1368:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
1369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg->next;
1370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
1371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_clear_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
1372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     snd_nxt = lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg);
1374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
1375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->snd_nxt = snd_nxt;
1376:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* put segment on unacknowledged list if length > 0 */
1378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_TCPLEN(seg) > 0) {
1379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
1380:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is empty? */
1381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (pcb->unacked == NULL) {
1382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->unacked = seg;
1383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         useg = seg;
1384:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* unacked list is not empty? */
1385:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
1386:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* In the case of fast retransmit, the packet should not go to the tail
1387:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * of the unacked queue, but rather somewhere before it. We need to check for
1388:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * this case. -STJ Jul 27, 2004 */
1389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (TCP_SEQ_LT(lwip_ntohl(seg->tcphdr->seqno), lwip_ntohl(useg->tcphdr->seqno))) {
1390:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to before tail of unacked list, keeping the list sorted */
1391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           struct tcp_seg **cur_seg = &(pcb->unacked);
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
1393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno)))
1394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             cur_seg = &((*cur_seg)->next );
1395:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
1396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           seg->next = (*cur_seg);
1397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           (*cur_seg) = seg;
1398:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
1399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to tail of unacked list */
1400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg->next = seg;
1401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg = useg->next;
1402:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
1403:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
1404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* do not queue empty segments on the unacked list */
1405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
1406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_seg_free(seg);
ARM GAS  /tmp/ccMjT2X9.s 			page 29


1407:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg = pcb->unsent;
1409:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1410:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
1412:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* last unsent has been removed, reset unsent_oversize */
1413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
1414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1415:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1416:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** output_done:
1418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_clear_flags(pcb, TF_NAGLEMEMERR);
1419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
1420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1421:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1422:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Check if a segment's pbufs are used by someone else than TCP.
1423:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This can happen on retransmission if the pbuf of this segment is still
1424:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * referenced by the netif driver due to deferred transmission.
1425:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This is the case (only!) if someone down the TX call path called
1426:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * pbuf_ref() on one of the pbufs!
1427:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1428:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @arg seg the tcp segment to check
1429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return 1 if ref != 1, 0 if ref == 1
1430:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1431:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static int
1432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_segment_busy(const struct tcp_seg *seg)
1433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 182              		.loc 1 1433 0
 183              		.cfi_startproc
 184              		@ args = 0, pretend = 0, frame = 0
 185              		@ frame_needed = 0, uses_anonymous_args = 0
 186              	.LVL16:
 187 0000 10B5     		push	{r4, lr}
 188              	.LCFI1:
 189              		.cfi_def_cfa_offset 8
 190              		.cfi_offset 4, -8
 191              		.cfi_offset 14, -4
1434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment_busy: invalid seg", seg != NULL);
 192              		.loc 1 1434 0
 193 0002 0446     		mov	r4, r0
 194 0004 28B1     		cbz	r0, .L28
 195              	.LVL17:
 196              	.L24:
1435:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* We only need to check the first pbuf here:
1437:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      If a pbuf is queued for transmission, a driver calls pbuf_ref(),
1438:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      which only changes the ref count of the first pbuf */
1439:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->p->ref != 1) {
 197              		.loc 1 1439 0
 198 0006 6368     		ldr	r3, [r4, #4]
 199 0008 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 200 000a 012B     		cmp	r3, #1
 201 000c 09D0     		beq	.L26
1440:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* other reference found */
1441:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return 1;
 202              		.loc 1 1441 0
 203 000e 0120     		movs	r0, #1
ARM GAS  /tmp/ccMjT2X9.s 			page 30


 204 0010 10BD     		pop	{r4, pc}
 205              	.LVL18:
 206              	.L28:
1434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 207              		.loc 1 1434 0 discriminator 1
 208 0012 054B     		ldr	r3, .L29
 209 0014 40F29A52 		movw	r2, #1434
 210 0018 0449     		ldr	r1, .L29+4
 211 001a 0548     		ldr	r0, .L29+8
 212              	.LVL19:
 213 001c FFF7FEFF 		bl	printf
 214              	.LVL20:
 215 0020 F1E7     		b	.L24
 216              	.L26:
1442:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1443:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* no other references found */
1444:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return 0;
 217              		.loc 1 1444 0
 218 0022 0020     		movs	r0, #0
1445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 219              		.loc 1 1445 0
 220 0024 10BD     		pop	{r4, pc}
 221              	.LVL21:
 222              	.L30:
 223 0026 00BF     		.align	2
 224              	.L29:
 225 0028 00000000 		.word	.LC0
 226 002c 00000000 		.word	.LC5
 227 0030 50000000 		.word	.LC2
 228              		.cfi_endproc
 229              	.LFE167:
 231              		.section	.text.tcp_output_fill_options,"ax",%progbits
 232              		.align	1
 233              		.syntax unified
 234              		.thumb
 235              		.thumb_func
 236              		.fpu fpv5-d16
 238              	tcp_output_fill_options:
 239              	.LFB176:
1446:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1447:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1448:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_output() to actually send a TCP segment over IP.
1449:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seg the tcp_seg to send
1451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for the TCP connection used to send the segment
1452:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param netif the netif used to send the segment
1453:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
1455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_segment(struct tcp_seg *seg, struct tcp_pcb *pcb, struct netif *netif)
1456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t len;
1459:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t *opts;
1460:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1461:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   int seg_chksum_was_swapped = 0;
1462:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1463:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/ccMjT2X9.s 			page 31


1464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid seg", seg != NULL);
1465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid pcb", pcb != NULL);
1466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid netif", netif != NULL);
1467:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_output_segment_busy(seg)) {
1469:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This should not happen: rexmit functions should have checked this.
1470:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        However, since this function modifies p->len, we must not continue in this case. */
1471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_output_segment: segment busy\n"));
1472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
1473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The TCP header has already been constructed, but the ackno and
1476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    wnd fields remain. */
1477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->ackno = lwip_htonl(pcb->rcv_nxt);
1478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1479:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* advertise our receive window size in this TCP segment */
1480:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_WND_SCALE) {
1482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* The Window field in a SYN segment itself (the only type where we send
1483:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        the window scale option) is never scaled. */
1484:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->wnd = lwip_htons(TCPWND_MIN16(pcb->rcv_ann_wnd));
1485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else
1486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_WND_SCALE */
1487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   {
1488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->wnd = lwip_htons(TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
1489:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1490:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rcv_ann_right_edge = pcb->rcv_nxt + pcb->rcv_ann_wnd;
1492:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1493:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Add any requested options.  NB MSS option is only set on SYN
1494:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      packets, so ignore it here */
1495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* cast through void* to get rid of alignment warnings */
1496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = (u32_t *)(void *)(seg->tcphdr + 1);
1497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_MSS) {
1498:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t mss;
1499:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CALCULATE_EFF_SEND_MSS
1500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss = tcp_eff_send_mss_netif(TCP_MSS, netif, &pcb->remote_ip);
1501:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CALCULATE_EFF_SEND_MSS */
1502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss = TCP_MSS;
1503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CALCULATE_EFF_SEND_MSS */
1504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *opts = TCP_BUILD_MSS_OPTION(mss);
1505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
1506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1507:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->ts_lastacksent = pcb->rcv_nxt;
1509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1510:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_TS) {
1511:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_timestamp_option(pcb, opts);
1512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 3;
1513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1514:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1515:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1516:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_WND_SCALE) {
1517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_wnd_scale_option(opts);
1518:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
1519:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1520:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
ARM GAS  /tmp/ccMjT2X9.s 			page 32


1521:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_SACK_PERM) {
1523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Pad with two NOP options to make everything nicely aligned
1524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * NOTE: When we send both timestamp and SACK_PERM options,
1525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * we could use the first two NOPs before the timestamp to store SACK_PERM option,
1526:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * but that would complicate the code.
1527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1528:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *(opts++) = PP_HTONL(0x01010402);
1529:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1530:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Set retransmission timer running if it is not currently enabled
1533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      This must be set before checking the route. */
1534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->rtime < 0) {
1535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtime = 0;
1536:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1537:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->rttest == 0) {
1539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rttest = tcp_ticks;
1540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtseq = lwip_ntohl(seg->tcphdr->seqno);
1541:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1542:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_output_segment: rtseq %"U32_F"\n", pcb->rtseq));
1543:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output_segment: %"U32_F":%"U32_F"\n",
1545:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  lwip_htonl(seg->tcphdr->seqno), lwip_htonl(seg->tcphdr->seqno) +
1546:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  seg->len));
1547:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   len = (u16_t)((u8_t *)seg->tcphdr - (u8_t *)seg->p->payload);
1549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len == 0) {
1550:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /** Exclude retransmitted segments from this count. */
1551:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     MIB2_STATS_INC(mib2.tcpoutsegs);
1552:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->len -= len;
1555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->tot_len -= len;
1556:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->payload = seg->tcphdr;
1558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->chksum = 0;
1560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_TCP_OUT_ADD_TCPOPTS
1562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = LWIP_HOOK_TCP_OUT_ADD_TCPOPTS(seg->p, seg->tcphdr, pcb, opts);
1563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("options not filled", (u8_t *)opts == ((u8_t *)(seg->tcphdr + 1)) + LWIP_TCP_OPT_LENG
1565:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1566:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1568:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u32_t acc;
1570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
1571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t chksum_slow = ip_chksum_pseudo(seg->p, IP_PROTO_TCP,
1572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                          seg->p->tot_len, &pcb->local_ip, &pcb->remote_ip);
1573:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY_SANITY_CHECK */
1574:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((seg->flags & TF_SEG_DATA_CHECKSUMMED) == 0) {
1575:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("data included but not checksummed",
1576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   seg->p->tot_len == TCPH_HDRLEN_BYTES(seg->tcphdr));
1577:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
ARM GAS  /tmp/ccMjT2X9.s 			page 33


1578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1579:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* rebuild TCP header checksum (TCP header changes for retransmissions!) */
1580:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     acc = ip_chksum_pseudo_partial(seg->p, IP_PROTO_TCP,
1581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                    seg->p->tot_len, TCPH_HDRLEN_BYTES(seg->tcphdr), &pcb->local_ip,
1582:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* add payload checksum */
1583:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (seg->chksum_swapped) {
1584:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg_chksum_was_swapped = 1;
1585:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->chksum = SWAP_BYTES_IN_WORD(seg->chksum);
1586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->chksum_swapped = 0;
1587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1588:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     acc = (u16_t)~acc + seg->chksum;
1589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->chksum = (u16_t)~FOLD_U32T(acc);
1590:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
1591:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (chksum_slow != seg->tcphdr->chksum) {
1592:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL(
1593:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ("tcp_output_segment: calculated checksum is %"X16_F" instead of %"X16_F"\n",
1594:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          seg->tcphdr->chksum, chksum_slow));
1595:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->tcphdr->chksum = chksum_slow;
1596:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY_SANITY_CHECK */
1598:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CHECKSUM_ON_COPY */
1599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->chksum = ip_chksum_pseudo(seg->p, IP_PROTO_TCP,
1600:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                            seg->p->tot_len, &pcb->local_ip, &pcb->remote_ip);
1601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
1602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1603:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* CHECKSUM_GEN_TCP */
1604:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.xmit);
1605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1606:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   NETIF_SET_HINTS(netif, &(pcb->netif_hints));
1607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = ip_output_if(seg->p, &pcb->local_ip, &pcb->remote_ip, pcb->ttl,
1608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      pcb->tos, IP_PROTO_TCP, netif);
1609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   NETIF_RESET_HINTS(netif);
1610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1611:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg_chksum_was_swapped) {
1613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* if data is added to this segment later, chksum needs to be swapped,
1614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        so restore this now */
1615:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum = SWAP_BYTES_IN_WORD(seg->chksum);
1616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum_swapped = 1;
1617:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1618:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1619:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
1621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1622:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1626:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr() for slow retransmission.
1627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1630:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1631:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto_prepare(struct tcp_pcb *pcb)
1632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1633:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1634:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/ccMjT2X9.s 			page 34


1635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto_prepare: invalid pcb", pcb != NULL);
1636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked == NULL) {
1638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
1639:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Move all unacked segments to the head of the unsent queue.
1642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      However, give up if any of the unsent pbufs are still referenced by the
1643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      netif driver due to deferred transmission. No point loading the link further
1644:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      if it is struggling to flush its buffered writes. */
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (seg = pcb->unacked; seg->next != NULL; seg = seg->next) {
1646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
1647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit_rto: segment busy\n"));
1648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_VAL;
1649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1650:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_output_segment_busy(seg)) {
1652:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit_rto: segment busy\n"));
1653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
1654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* concatenate unsent queue after unacked queue */
1656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = pcb->unsent;
1657:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
1658:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* if last unsent changed, we need to update unsent_oversize */
1659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
1660:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = seg->oversize_left;
1661:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
1663:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unsent queue is the concatenated queue (of unacked, unsent) */
1664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent = pcb->unacked;
1665:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unacked queue is now empty */
1666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unacked = NULL;
1667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1668:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Mark RTO in-progress */
1669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_set_flags(pcb, TF_RTO);
1670:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Record the next byte following retransmit */
1671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rto_end = lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg);
1672:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any RTT measurements after retransmitting. */
1673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rttest = 0;
1674:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1675:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
1676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1677:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1678:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1681:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr() for slow retransmission.
1682:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1684:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1685:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1686:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto_commit(struct tcp_pcb *pcb)
1687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto_commit: invalid pcb", pcb != NULL);
1689:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1690:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* increment number of retransmissions */
1691:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->nrtx < 0xFF) {
ARM GAS  /tmp/ccMjT2X9.s 			page 35


1692:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
1693:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1694:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Do the actual retransmission */
1695:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output(pcb);
1696:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1697:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1699:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1700:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1701:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_process() only, tcp_slowtmr() needs to do some things between
1702:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * "prepare" and "commit".
1703:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1705:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1707:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto(struct tcp_pcb *pcb)
1708:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto: invalid pcb", pcb != NULL);
1710:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_rexmit_rto_prepare(pcb) == ERR_OK) {
1712:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_rexmit_rto_commit(pcb);
1713:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1715:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1716:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1717:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue the first unacked segment for retransmission
1718:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1719:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_receive() for fast retransmit.
1720:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1721:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to retransmit the first unacked segment
1722:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1723:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1724:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit(struct tcp_pcb *pcb)
1725:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1726:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1727:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg **cur_seg;
1728:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit: invalid pcb", pcb != NULL);
1730:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1731:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked == NULL) {
1732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
1733:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1734:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unacked;
1736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1737:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Give up if the segment is still referenced by the netif driver
1738:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      due to deferred transmission. */
1739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_output_segment_busy(seg)) {
1740:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit busy\n"));
1741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
1742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1743:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Move the first unacked segment to the unsent queue */
1745:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Keep the unsent queue sorted. */
1746:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unacked = seg->next;
1747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   cur_seg = &(pcb->unsent);
ARM GAS  /tmp/ccMjT2X9.s 			page 36


1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
1750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
1751:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     cur_seg = &((*cur_seg)->next );
1752:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = *cur_seg;
1754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *cur_seg = seg;
1755:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1756:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->next == NULL) {
1757:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* the retransmitted segment is last in unsent, so reset unsent_oversize */
1758:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
1759:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1760:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1761:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->nrtx < 0xFF) {
1763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
1764:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1765:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1766:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any rtt measurements after retransmitting. */
1767:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rttest = 0;
1768:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Do the actual retransmission. */
1770:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   MIB2_STATS_INC(mib2.tcpretranssegs);
1771:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* No need to call tcp_output: we are always called from tcp_input()
1772:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      and thus tcp_output directly returns. */
1773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
1774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1775:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1776:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1777:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1778:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Handle retransmission after three dupacks received
1779:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1780:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to retransmit the first unacked segment
1781:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1782:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1783:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_fast(struct tcp_pcb *pcb)
1784:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_fast: invalid pcb", pcb != NULL);
1786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked != NULL && !(pcb->flags & TF_INFR)) {
1788:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This is fast retransmit. Retransmit the first unacked segment. */
1789:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_FR_DEBUG,
1790:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_receive: dupacks %"U16_F" (%"U32_F
1791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  "), fast retransmit %"U32_F"\n",
1792:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  (u16_t)pcb->dupacks, pcb->lastack,
1793:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(pcb->unacked->tcphdr->seqno)));
1794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_rexmit(pcb) == ERR_OK) {
1795:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Set ssthresh to half of the minimum of the current
1796:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * cwnd and the advertised window */
1797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->ssthresh = LWIP_MIN(pcb->cwnd, pcb->snd_wnd) / 2;
1798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1799:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* The minimum value for ssthresh should be 2 MSS */
1800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (pcb->ssthresh < (2U * pcb->mss)) {
1801:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_FR_DEBUG,
1802:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                     ("tcp_receive: The minimum value for ssthresh %"TCPWNDSIZE_F
1803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      " should be min 2 mss %"U16_F"...\n",
1804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      pcb->ssthresh, (u16_t)(2 * pcb->mss)));
1805:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->ssthresh = 2 * pcb->mss;
ARM GAS  /tmp/ccMjT2X9.s 			page 37


1806:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
1807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->cwnd = pcb->ssthresh + 3 * pcb->mss;
1809:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_INFR);
1810:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Reset the retransmission timer to prevent immediate rto retransmissions */
1812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->rtime = 0;
1813:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1814:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1815:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1816:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1817:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
1818:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_alloc_header_common(u32_t ackno, u16_t optlen, u16_t datalen,
1819:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         u32_t seqno_be /* already in network byte order */,
1820:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         u16_t src_port, u16_t dst_port, u8_t flags, u16_t wnd)
1821:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1822:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
1823:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1824:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1825:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(PBUF_IP, TCP_HLEN + optlen + datalen, PBUF_RAM);
1826:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
1827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("check that first pbuf can hold struct tcp_hdr",
1828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (p->len >= TCP_HLEN + optlen));
1829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr = (struct tcp_hdr *)p->payload;
1830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->src = lwip_htons(src_port);
1831:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->dest = lwip_htons(dst_port);
1832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->seqno = seqno_be;
1833:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->ackno = lwip_htonl(ackno);
1834:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_HDRLEN_FLAGS_SET(tcphdr, (5 + optlen / 4), flags);
1835:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->wnd = lwip_htons(wnd);
1836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->chksum = 0;
1837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->urgp = 0;
1838:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1839:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
1840:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Allocate a pbuf and create a tcphdr at p->payload, used for output
1843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * functions other than the default tcp_output -> tcp_output_segment
1844:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (e.g. tcp_send_empty_ack, etc.)
1845:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1846:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp pcb for which to send a packet (used to initialize tcp_hdr)
1847:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optlen length of header-options
1848:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param datalen length of tcp data to reserve in pbuf
1849:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno_be seqno in network byte order (big-endian)
1850:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return pbuf with p->payload being the tcp_hdr
1851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
1853:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_alloc_header(struct tcp_pcb *pcb, u16_t optlen, u16_t datalen,
1854:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         u32_t seqno_be /* already in network byte order */)
1855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1857:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_alloc_header: invalid pcb", pcb != NULL);
1859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header_common(pcb->rcv_nxt, optlen, datalen,
1861:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seqno_be, pcb->local_port, pcb->remote_port, TCP_ACK,
1862:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
ARM GAS  /tmp/ccMjT2X9.s 			page 38


1863:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
1864:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* If we're sending a packet, update the announced right window edge */
1865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rcv_ann_right_edge = pcb->rcv_nxt + pcb->rcv_ann_wnd;
1866:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1867:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
1868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1869:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1870:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Fill in options for control segments */
1871:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1872:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_fill_options(const struct tcp_pcb *pcb, struct pbuf *p, u8_t optflags, u8_t num_sacks)
1873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 240              		.loc 1 1873 0
 241              		.cfi_startproc
 242              		@ args = 0, pretend = 0, frame = 0
 243              		@ frame_needed = 0, uses_anonymous_args = 0
 244              	.LVL22:
 245 0000 38B5     		push	{r3, r4, r5, lr}
 246              	.LCFI2:
 247              		.cfi_def_cfa_offset 16
 248              		.cfi_offset 3, -16
 249              		.cfi_offset 4, -12
 250              		.cfi_offset 5, -8
 251              		.cfi_offset 14, -4
 252 0002 1446     		mov	r4, r2
 253              	.LVL23:
1874:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
1875:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t *opts;
1876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t sacks_len = 0;
1877:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_fill_options: invalid pbuf", p != NULL);
 254              		.loc 1 1878 0
 255 0004 0D46     		mov	r5, r1
 256 0006 91B1     		cbz	r1, .L37
 257              	.LVL24:
 258              	.L32:
1879:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 259              		.loc 1 1880 0
 260 0008 6B68     		ldr	r3, [r5, #4]
 261              	.LVL25:
1881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = (u32_t *)(void *)(tcphdr + 1);
 262              		.loc 1 1881 0
 263 000a 03F11401 		add	r1, r3, #20
 264              	.LVL26:
1882:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1883:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* NB. MSS and window scale options are only sent on SYNs, so ignore them here */
1884:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1885:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1886:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (optflags & TF_SEG_OPTS_TS) {
1887:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_timestamp_option(pcb, opts);
1888:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 3;
1889:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1890:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1891:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1892:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1893:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb && (num_sacks > 0)) {
1894:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_sack_option(pcb, opts, num_sacks);
ARM GAS  /tmp/ccMjT2X9.s 			page 39


1895:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* 1 word for SACKs header (including 2xNOP), and 2 words for each SACK */
1896:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     sacks_len = 1 + num_sacks * 2;
1897:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += sacks_len;
1898:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1899:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
1900:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(num_sacks);
1901:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1902:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1903:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_TCP_OUT_ADD_TCPOPTS
1904:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = LWIP_HOOK_TCP_OUT_ADD_TCPOPTS(p, tcphdr, pcb, opts);
1905:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1906:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1907:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(pcb);
1908:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(sacks_len);
1909:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("options not filled", (u8_t *)opts == ((u8_t *)(tcphdr + 1)) + sacks_len * 4 + LWIP_T
 265              		.loc 1 1909 0
 266 000e 14F0010F 		tst	r4, #1
 267 0012 14D0     		beq	.L35
 268 0014 0422     		movs	r2, #4
 269              	.L33:
 270              		.loc 1 1909 0 is_stmt 0 discriminator 4
 271 0016 1432     		adds	r2, r2, #20
 272 0018 1344     		add	r3, r3, r2
 273              	.LVL27:
 274 001a 9942     		cmp	r1, r3
 275 001c 06D0     		beq	.L31
 276              		.loc 1 1909 0 discriminator 5
 277 001e 094B     		ldr	r3, .L38
 278 0020 40F27572 		movw	r2, #1909
 279 0024 0849     		ldr	r1, .L38+4
 280              	.LVL28:
 281 0026 0948     		ldr	r0, .L38+8
 282 0028 FFF7FEFF 		bl	printf
 283              	.LVL29:
 284              	.L31:
 285 002c 38BD     		pop	{r3, r4, r5, pc}
 286              	.LVL30:
 287              	.L37:
1878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 288              		.loc 1 1878 0 is_stmt 1 discriminator 1
 289 002e 054B     		ldr	r3, .L38
 290              	.LVL31:
 291 0030 40F25672 		movw	r2, #1878
 292              	.LVL32:
 293 0034 0649     		ldr	r1, .L38+12
 294              	.LVL33:
 295 0036 0548     		ldr	r0, .L38+8
 296              	.LVL34:
 297 0038 FFF7FEFF 		bl	printf
 298              	.LVL35:
 299 003c E4E7     		b	.L32
 300              	.LVL36:
 301              	.L35:
 302              		.loc 1 1909 0
 303 003e 0022     		movs	r2, #0
 304 0040 E9E7     		b	.L33
 305              	.L39:
ARM GAS  /tmp/ccMjT2X9.s 			page 40


 306 0042 00BF     		.align	2
 307              	.L38:
 308 0044 00000000 		.word	.LC0
 309 0048 28000000 		.word	.LC7
 310 004c 50000000 		.word	.LC2
 311 0050 00000000 		.word	.LC6
 312              		.cfi_endproc
 313              	.LFE176:
 315              		.section	.text.tcp_pbuf_prealloc,"ax",%progbits
 316              		.align	1
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 320              		.fpu fpv5-d16
 322              	tcp_pbuf_prealloc:
 323              	.LFB160:
 228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 324              		.loc 1 228 0
 325              		.cfi_startproc
 326              		@ args = 12, pretend = 0, frame = 0
 327              		@ frame_needed = 0, uses_anonymous_args = 0
 328              	.LVL37:
 329 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 330              	.LCFI3:
 331              		.cfi_def_cfa_offset 32
 332              		.cfi_offset 3, -32
 333              		.cfi_offset 4, -28
 334              		.cfi_offset 5, -24
 335              		.cfi_offset 6, -20
 336              		.cfi_offset 7, -16
 337              		.cfi_offset 8, -12
 338              		.cfi_offset 9, -8
 339              		.cfi_offset 14, -4
 340 0004 8046     		mov	r8, r0
 341 0006 0C46     		mov	r4, r1
 342 0008 1546     		mov	r5, r2
 343 000a 089F     		ldr	r7, [sp, #32]
 344 000c 9DF82890 		ldrb	r9, [sp, #40]	@ zero_extendqisi2
 345              	.LVL38:
 232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_pbuf_prealloc: invalid pcb", pcb != NULL);
 346              		.loc 1 232 0
 347 0010 1E46     		mov	r6, r3
 348 0012 CBB1     		cbz	r3, .L51
 349              	.LVL39:
 350              	.L41:
 233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 351              		.loc 1 233 0
 352 0014 FFB1     		cbz	r7, .L52
 353              	.L42:
 242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Should we allocate an oversized pbuf, or just the minimum
 354              		.loc 1 242 0
 355 0016 AC42     		cmp	r4, r5
 356 0018 29D2     		bcs	.L47
 254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 357              		.loc 1 254 0
 358 001a 9DF82430 		ldrb	r3, [sp, #36]	@ zero_extendqisi2
 359 001e 13F0020F 		tst	r3, #2
ARM GAS  /tmp/ccMjT2X9.s 			page 41


 360 0022 08D1     		bne	.L44
 255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 361              		.loc 1 255 0 discriminator 1
 362 0024 7B8B     		ldrh	r3, [r7, #26]
 254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 363              		.loc 1 254 0 discriminator 1
 364 0026 13F0400F 		tst	r3, #64
 365 002a 39D1     		bne	.L48
 255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 366              		.loc 1 255 0
 367 002c B9F1000F 		cmp	r9, #0
 368 0030 01D0     		beq	.L44
 257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 369              		.loc 1 257 0
 370 0032 FB6E     		ldr	r3, [r7, #108]
 256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unsent != NULL ||
 371              		.loc 1 256 0
 372 0034 B3B1     		cbz	r3, .L53
 373              	.L44:
 259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 374              		.loc 1 259 0
 375 0036 04F21B21 		addw	r1, r4, #539
 376 003a 21F00301 		bic	r1, r1, #3
 377 003e 8D42     		cmp	r5, r1
 378 0040 28BF     		it	cs
 379 0042 0D46     		movcs	r5, r1
 380 0044 A9B2     		uxth	r1, r5
 381              	.LVL40:
 382 0046 13E0     		b	.L43
 383              	.LVL41:
 384              	.L51:
 232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_pbuf_prealloc: invalid pcb", pcb != NULL);
 385              		.loc 1 232 0 discriminator 1
 386 0048 164B     		ldr	r3, .L54
 387              	.LVL42:
 388 004a E822     		movs	r2, #232
 389              	.LVL43:
 390 004c 1649     		ldr	r1, .L54+4
 391              	.LVL44:
 392 004e 1748     		ldr	r0, .L54+8
 393              	.LVL45:
 394 0050 FFF7FEFF 		bl	printf
 395              	.LVL46:
 396 0054 DEE7     		b	.L41
 397              	.L52:
 233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 398              		.loc 1 233 0 discriminator 1
 399 0056 134B     		ldr	r3, .L54
 400 0058 E922     		movs	r2, #233
 401 005a 1549     		ldr	r1, .L54+12
 402 005c 1348     		ldr	r0, .L54+8
 403 005e FFF7FEFF 		bl	printf
 404              	.LVL47:
 405 0062 D8E7     		b	.L42
 406              	.L53:
 258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       alloc = LWIP_MIN(max_length, LWIP_MEM_ALIGN_SIZE(TCP_OVERSIZE_CALC_LENGTH(length)));
 407              		.loc 1 258 0
ARM GAS  /tmp/ccMjT2X9.s 			page 42


 408 0064 3B6F     		ldr	r3, [r7, #112]
 257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 409              		.loc 1 257 0
 410 0066 002B     		cmp	r3, #0
 411 0068 E5D1     		bne	.L44
 230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 412              		.loc 1 230 0
 413 006a 2146     		mov	r1, r4
 414 006c 00E0     		b	.L43
 415              	.L47:
 416 006e 2146     		mov	r1, r4
 417              	.LVL48:
 418              	.L43:
 263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 419              		.loc 1 263 0
 420 0070 4FF42072 		mov	r2, #640
 421 0074 4046     		mov	r0, r8
 422 0076 FFF7FEFF 		bl	pbuf_alloc
 423              	.LVL49:
 264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 424              		.loc 1 264 0
 425 007a 0546     		mov	r5, r0
 426 007c 68B1     		cbz	r0, .L40
 267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 427              		.loc 1 267 0
 428 007e 0368     		ldr	r3, [r0]
 429 0080 33B1     		cbz	r3, .L46
 267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 430              		.loc 1 267 0 is_stmt 0 discriminator 1
 431 0082 084B     		ldr	r3, .L54
 432 0084 40F20B12 		movw	r2, #267
 433 0088 0A49     		ldr	r1, .L54+16
 434 008a 0848     		ldr	r0, .L54+8
 435              	.LVL50:
 436 008c FFF7FEFF 		bl	printf
 437              	.LVL51:
 438              	.L46:
 268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* trim p->len to the currently used size */
 439              		.loc 1 268 0 is_stmt 1
 440 0090 6B89     		ldrh	r3, [r5, #10]
 441 0092 1B1B     		subs	r3, r3, r4
 442 0094 3380     		strh	r3, [r6]	@ movhi
 270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 443              		.loc 1 270 0
 444 0096 2C81     		strh	r4, [r5, #8]	@ movhi
 445 0098 6C81     		strh	r4, [r5, #10]	@ movhi
 446              	.L40:
 272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_OVERSIZE */
 447              		.loc 1 272 0
 448 009a 2846     		mov	r0, r5
 449 009c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 450              	.LVL52:
 451              	.L48:
 230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 452              		.loc 1 230 0
 453 00a0 2146     		mov	r1, r4
 454 00a2 E5E7     		b	.L43
ARM GAS  /tmp/ccMjT2X9.s 			page 43


 455              	.L55:
 456              		.align	2
 457              	.L54:
 458 00a4 00000000 		.word	.LC0
 459 00a8 00000000 		.word	.LC8
 460 00ac 50000000 		.word	.LC2
 461 00b0 24000000 		.word	.LC9
 462 00b4 44000000 		.word	.LC10
 463              		.cfi_endproc
 464              	.LFE160:
 466              		.section	.text.tcp_create_segment,"ax",%progbits
 467              		.align	1
 468              		.syntax unified
 469              		.thumb
 470              		.thumb_func
 471              		.fpu fpv5-d16
 473              	tcp_create_segment:
 474              	.LFB159:
 159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 475              		.loc 1 159 0
 476              		.cfi_startproc
 477              		@ args = 4, pretend = 0, frame = 0
 478              		@ frame_needed = 0, uses_anonymous_args = 0
 479              	.LVL53:
 480 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 481              	.LCFI4:
 482              		.cfi_def_cfa_offset 32
 483              		.cfi_offset 4, -32
 484              		.cfi_offset 5, -28
 485              		.cfi_offset 6, -24
 486              		.cfi_offset 7, -20
 487              		.cfi_offset 8, -16
 488              		.cfi_offset 9, -12
 489              		.cfi_offset 10, -8
 490              		.cfi_offset 14, -4
 491 0004 0E46     		mov	r6, r1
 492 0006 1746     		mov	r7, r2
 493 0008 9946     		mov	r9, r3
 494 000a 9DF820A0 		ldrb	r10, [sp, #32]	@ zero_extendqisi2
 163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_create_segment: invalid pbuf", p != NULL);
 495              		.loc 1 163 0
 496 000e 8046     		mov	r8, r0
 497 0010 0028     		cmp	r0, #0
 498 0012 42D0     		beq	.L66
 499              	.LVL54:
 500              	.L57:
 164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 501              		.loc 1 164 0
 502 0014 002E     		cmp	r6, #0
 503 0016 47D0     		beq	.L67
 504              	.L58:
 166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 505              		.loc 1 166 0
 506 0018 1AF0010F 		tst	r10, #1
 507 001c 4BD0     		beq	.L64
 508 001e 0425     		movs	r5, #4
 509              	.L59:
ARM GAS  /tmp/ccMjT2X9.s 			page 44


 510              	.LVL55:
 168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no memory.\n"));
 511              		.loc 1 168 0 discriminator 4
 512 0020 0320     		movs	r0, #3
 513 0022 FFF7FEFF 		bl	memp_malloc
 514              	.LVL56:
 515 0026 0446     		mov	r4, r0
 516 0028 0028     		cmp	r0, #0
 517 002a 46D0     		beq	.L68
 173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = NULL;
 518              		.loc 1 173 0
 519 002c 80F80AA0 		strb	r10, [r0, #10]
 174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p = p;
 520              		.loc 1 174 0
 521 0030 0023     		movs	r3, #0
 522 0032 0360     		str	r3, [r0]
 175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("p->tot_len >= optlen", p->tot_len >= optlen);
 523              		.loc 1 175 0
 524 0034 4660     		str	r6, [r0, #4]
 176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 525              		.loc 1 176 0
 526 0036 3389     		ldrh	r3, [r6, #8]
 527 0038 1FFA85FA 		uxth	r10, r5
 528 003c 5345     		cmp	r3, r10
 529 003e 40D3     		bcc	.L69
 530              	.LVL57:
 531              	.L62:
 177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 532              		.loc 1 177 0
 533 0040 3389     		ldrh	r3, [r6, #8]
 534 0042 A3EB0A03 		sub	r3, r3, r10
 535 0046 2381     		strh	r3, [r4, #8]	@ movhi
 190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no room for TCP he
 536              		.loc 1 190 0
 537 0048 1421     		movs	r1, #20
 538 004a 3046     		mov	r0, r6
 539 004c FFF7FEFF 		bl	pbuf_add_header
 540              	.LVL58:
 541 0050 0028     		cmp	r0, #0
 542 0052 3DD1     		bne	.L70
 196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->src = lwip_htons(pcb->local_port);
 543              		.loc 1 196 0
 544 0054 6368     		ldr	r3, [r4, #4]
 545 0056 5E68     		ldr	r6, [r3, #4]
 546              	.LVL59:
 547 0058 E660     		str	r6, [r4, #12]
 197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->dest = lwip_htons(pcb->remote_port);
 548              		.loc 1 197 0
 549 005a B8F81600 		ldrh	r0, [r8, #22]
 550 005e FFF7FEFF 		bl	lwip_htons
 551              	.LVL60:
 552 0062 3080     		strh	r0, [r6]	@ unaligned
 198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->seqno = lwip_htonl(seqno);
 553              		.loc 1 198 0
 554 0064 E668     		ldr	r6, [r4, #12]
 555 0066 B8F81800 		ldrh	r0, [r8, #24]
 556 006a FFF7FEFF 		bl	lwip_htons
ARM GAS  /tmp/ccMjT2X9.s 			page 45


 557              	.LVL61:
 558 006e 7080     		strh	r0, [r6, #2]	@ unaligned
 199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* ackno is set in tcp_output */
 559              		.loc 1 199 0
 560 0070 E668     		ldr	r6, [r4, #12]
 561 0072 4846     		mov	r0, r9
 562 0074 FFF7FEFF 		bl	lwip_htonl
 563              	.LVL62:
 564 0078 7060     		str	r0, [r6, #4]	@ unaligned
 201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* wnd and chksum are set in tcp_output */
 565              		.loc 1 201 0
 566 007a E668     		ldr	r6, [r4, #12]
 567 007c A808     		lsrs	r0, r5, #2
 568 007e 0530     		adds	r0, r0, #5
 569 0080 0003     		lsls	r0, r0, #12
 570 0082 80B2     		uxth	r0, r0
 571 0084 3843     		orrs	r0, r0, r7
 572 0086 FFF7FEFF 		bl	lwip_htons
 573              	.LVL63:
 574 008a B081     		strh	r0, [r6, #12]	@ unaligned
 203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return seg;
 575              		.loc 1 203 0
 576 008c E368     		ldr	r3, [r4, #12]
 577 008e 0022     		movs	r2, #0
 578 0090 9A74     		strb	r2, [r3, #18]
 579 0092 DA74     		strb	r2, [r3, #19]
 580              	.LVL64:
 581              	.L56:
 205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 582              		.loc 1 205 0
 583 0094 2046     		mov	r0, r4
 584 0096 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 585              	.LVL65:
 586              	.L66:
 163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_create_segment: invalid pbuf", p != NULL);
 587              		.loc 1 163 0 discriminator 1
 588 009a 104B     		ldr	r3, .L71
 589              	.LVL66:
 590 009c A322     		movs	r2, #163
 591              	.LVL67:
 592 009e 1049     		ldr	r1, .L71+4
 593              	.LVL68:
 594 00a0 1048     		ldr	r0, .L71+8
 595              	.LVL69:
 596 00a2 FFF7FEFF 		bl	printf
 597              	.LVL70:
 598 00a6 B5E7     		b	.L57
 599              	.L67:
 164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 600              		.loc 1 164 0 discriminator 1
 601 00a8 0C4B     		ldr	r3, .L71
 602 00aa A422     		movs	r2, #164
 603 00ac 0E49     		ldr	r1, .L71+12
 604 00ae 0D48     		ldr	r0, .L71+8
 605 00b0 FFF7FEFF 		bl	printf
 606              	.LVL71:
 607 00b4 B0E7     		b	.L58
ARM GAS  /tmp/ccMjT2X9.s 			page 46


 608              	.L64:
 166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 609              		.loc 1 166 0
 610 00b6 0025     		movs	r5, #0
 611 00b8 B2E7     		b	.L59
 612              	.LVL72:
 613              	.L68:
 170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 614              		.loc 1 170 0
 615 00ba 3046     		mov	r0, r6
 616              	.LVL73:
 617 00bc FFF7FEFF 		bl	pbuf_free
 618              	.LVL74:
 171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 619              		.loc 1 171 0
 620 00c0 E8E7     		b	.L56
 621              	.LVL75:
 622              	.L69:
 176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 623              		.loc 1 176 0 discriminator 1
 624 00c2 064B     		ldr	r3, .L71
 625 00c4 B022     		movs	r2, #176
 626 00c6 0949     		ldr	r1, .L71+16
 627 00c8 0648     		ldr	r0, .L71+8
 628              	.LVL76:
 629 00ca FFF7FEFF 		bl	printf
 630              	.LVL77:
 631 00ce B7E7     		b	.L62
 632              	.L70:
 193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 633              		.loc 1 193 0
 634 00d0 2046     		mov	r0, r4
 635 00d2 FFF7FEFF 		bl	tcp_seg_free
 636              	.LVL78:
 194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 637              		.loc 1 194 0
 638 00d6 0024     		movs	r4, #0
 639              	.LVL79:
 640 00d8 DCE7     		b	.L56
 641              	.L72:
 642 00da 00BF     		.align	2
 643              	.L71:
 644 00dc 00000000 		.word	.LC0
 645 00e0 00000000 		.word	.LC11
 646 00e4 50000000 		.word	.LC2
 647 00e8 20000000 		.word	.LC12
 648 00ec 44000000 		.word	.LC13
 649              		.cfi_endproc
 650              	.LFE159:
 652              		.section	.text.tcp_output_alloc_header_common,"ax",%progbits
 653              		.align	1
 654              		.syntax unified
 655              		.thumb
 656              		.thumb_func
 657              		.fpu fpv5-d16
 659              	tcp_output_alloc_header_common:
 660              	.LFB174:
ARM GAS  /tmp/ccMjT2X9.s 			page 47


1821:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
 661              		.loc 1 1821 0
 662              		.cfi_startproc
 663              		@ args = 16, pretend = 0, frame = 0
 664              		@ frame_needed = 0, uses_anonymous_args = 0
 665              	.LVL80:
 666 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 667              	.LCFI5:
 668              		.cfi_def_cfa_offset 24
 669              		.cfi_offset 4, -24
 670              		.cfi_offset 5, -20
 671              		.cfi_offset 6, -16
 672              		.cfi_offset 7, -12
 673              		.cfi_offset 8, -8
 674              		.cfi_offset 14, -4
 675 0004 0746     		mov	r7, r0
 676 0006 0C46     		mov	r4, r1
 677 0008 9846     		mov	r8, r3
1825:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 678              		.loc 1 1825 0
 679 000a 1144     		add	r1, r1, r2
 680              	.LVL81:
 681 000c 89B2     		uxth	r1, r1
 682 000e 1431     		adds	r1, r1, #20
 683 0010 4FF42072 		mov	r2, #640
 684              	.LVL82:
 685 0014 89B2     		uxth	r1, r1
 686 0016 2220     		movs	r0, #34
 687              	.LVL83:
 688 0018 FFF7FEFF 		bl	pbuf_alloc
 689              	.LVL84:
1826:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("check that first pbuf can hold struct tcp_hdr",
 690              		.loc 1 1826 0
 691 001c 0646     		mov	r6, r0
 692 001e 48B3     		cbz	r0, .L73
1827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (p->len >= TCP_HLEN + optlen));
 693              		.loc 1 1827 0
 694 0020 4289     		ldrh	r2, [r0, #10]
 695 0022 04F11403 		add	r3, r4, #20
 696 0026 9A42     		cmp	r2, r3
 697 0028 27DB     		blt	.L77
 698              	.LVL85:
 699              	.L75:
1829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->src = lwip_htons(src_port);
 700              		.loc 1 1829 0
 701 002a 7568     		ldr	r5, [r6, #4]
 702              	.LVL86:
1830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->dest = lwip_htons(dst_port);
 703              		.loc 1 1830 0
 704 002c BDF81800 		ldrh	r0, [sp, #24]
 705 0030 FFF7FEFF 		bl	lwip_htons
 706              	.LVL87:
 707 0034 2880     		strh	r0, [r5]	@ unaligned
1831:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->seqno = seqno_be;
 708              		.loc 1 1831 0
 709 0036 BDF81C00 		ldrh	r0, [sp, #28]
 710 003a FFF7FEFF 		bl	lwip_htons
ARM GAS  /tmp/ccMjT2X9.s 			page 48


 711              	.LVL88:
 712 003e 6880     		strh	r0, [r5, #2]	@ unaligned
1832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->ackno = lwip_htonl(ackno);
 713              		.loc 1 1832 0
 714 0040 C5F80480 		str	r8, [r5, #4]	@ unaligned
1833:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_HDRLEN_FLAGS_SET(tcphdr, (5 + optlen / 4), flags);
 715              		.loc 1 1833 0
 716 0044 3846     		mov	r0, r7
 717 0046 FFF7FEFF 		bl	lwip_htonl
 718              	.LVL89:
 719 004a A860     		str	r0, [r5, #8]	@ unaligned
1834:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->wnd = lwip_htons(wnd);
 720              		.loc 1 1834 0
 721 004c A408     		lsrs	r4, r4, #2
 722 004e 0534     		adds	r4, r4, #5
 723 0050 2403     		lsls	r4, r4, #12
 724 0052 A4B2     		uxth	r4, r4
 725 0054 9DF82000 		ldrb	r0, [sp, #32]	@ zero_extendqisi2
 726 0058 2043     		orrs	r0, r0, r4
 727 005a FFF7FEFF 		bl	lwip_htons
 728              	.LVL90:
 729 005e A881     		strh	r0, [r5, #12]	@ unaligned
1835:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->chksum = 0;
 730              		.loc 1 1835 0
 731 0060 BDF82400 		ldrh	r0, [sp, #36]
 732 0064 FFF7FEFF 		bl	lwip_htons
 733              	.LVL91:
 734 0068 E881     		strh	r0, [r5, #14]	@ unaligned
1836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->urgp = 0;
 735              		.loc 1 1836 0
 736 006a 0023     		movs	r3, #0
 737 006c 2B74     		strb	r3, [r5, #16]
 738 006e 6B74     		strb	r3, [r5, #17]
1837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 739              		.loc 1 1837 0
 740 0070 AB74     		strb	r3, [r5, #18]
 741 0072 EB74     		strb	r3, [r5, #19]
 742              	.LVL92:
 743              	.L73:
1840:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 744              		.loc 1 1840 0
 745 0074 3046     		mov	r0, r6
 746 0076 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 747              	.LVL93:
 748              	.L77:
1827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (p->len >= TCP_HLEN + optlen));
 749              		.loc 1 1827 0 discriminator 1
 750 007a 044B     		ldr	r3, .L78
 751 007c 40F22472 		movw	r2, #1828
 752 0080 0349     		ldr	r1, .L78+4
 753 0082 0448     		ldr	r0, .L78+8
 754              	.LVL94:
 755 0084 FFF7FEFF 		bl	printf
 756              	.LVL95:
 757 0088 CFE7     		b	.L75
 758              	.L79:
 759 008a 00BF     		.align	2
ARM GAS  /tmp/ccMjT2X9.s 			page 49


 760              	.L78:
 761 008c 00000000 		.word	.LC0
 762 0090 00000000 		.word	.LC14
 763 0094 50000000 		.word	.LC2
 764              		.cfi_endproc
 765              	.LFE174:
 767              		.section	.text.tcp_output_alloc_header,"ax",%progbits
 768              		.align	1
 769              		.syntax unified
 770              		.thumb
 771              		.thumb_func
 772              		.fpu fpv5-d16
 774              	tcp_output_alloc_header:
 775              	.LFB175:
1855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 776              		.loc 1 1855 0
 777              		.cfi_startproc
 778              		@ args = 0, pretend = 0, frame = 0
 779              		@ frame_needed = 0, uses_anonymous_args = 0
 780              	.LVL96:
 781 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 782              	.LCFI6:
 783              		.cfi_def_cfa_offset 20
 784              		.cfi_offset 4, -20
 785              		.cfi_offset 5, -16
 786              		.cfi_offset 6, -12
 787              		.cfi_offset 7, -8
 788              		.cfi_offset 14, -4
 789 0002 85B0     		sub	sp, sp, #20
 790              	.LCFI7:
 791              		.cfi_def_cfa_offset 40
 792 0004 0D46     		mov	r5, r1
 793 0006 1646     		mov	r6, r2
 794 0008 1F46     		mov	r7, r3
1858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 795              		.loc 1 1858 0
 796 000a 0446     		mov	r4, r0
 797 000c B0B1     		cbz	r0, .L84
 798              	.LVL97:
 799              	.L81:
1860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seqno_be, pcb->local_port, pcb->remote_port, TCP_ACK,
 800              		.loc 1 1860 0
 801 000e 606A     		ldr	r0, [r4, #36]
 802 0010 E38A     		ldrh	r3, [r4, #22]
 803 0012 228B     		ldrh	r2, [r4, #24]
 804 0014 618D     		ldrh	r1, [r4, #42]
 805 0016 0391     		str	r1, [sp, #12]
 806 0018 1021     		movs	r1, #16
 807 001a 0291     		str	r1, [sp, #8]
 808 001c 0192     		str	r2, [sp, #4]
 809 001e 0093     		str	r3, [sp]
 810 0020 3B46     		mov	r3, r7
 811 0022 3246     		mov	r2, r6
 812 0024 2946     		mov	r1, r5
 813 0026 FFF7FEFF 		bl	tcp_output_alloc_header_common
 814              	.LVL98:
1863:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* If we're sending a packet, update the announced right window edge */
ARM GAS  /tmp/ccMjT2X9.s 			page 50


 815              		.loc 1 1863 0
 816 002a 0246     		mov	r2, r0
 817 002c 18B1     		cbz	r0, .L80
1865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 818              		.loc 1 1865 0
 819 002e 636A     		ldr	r3, [r4, #36]
 820 0030 618D     		ldrh	r1, [r4, #42]
 821 0032 0B44     		add	r3, r3, r1
 822 0034 E362     		str	r3, [r4, #44]
 823              	.L80:
1868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 824              		.loc 1 1868 0
 825 0036 1046     		mov	r0, r2
 826              	.LVL99:
 827 0038 05B0     		add	sp, sp, #20
 828              	.LCFI8:
 829              		.cfi_remember_state
 830              		.cfi_def_cfa_offset 20
 831              		@ sp needed
 832 003a F0BD     		pop	{r4, r5, r6, r7, pc}
 833              	.LVL100:
 834              	.L84:
 835              	.LCFI9:
 836              		.cfi_restore_state
1858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 837              		.loc 1 1858 0 discriminator 1
 838 003c 034B     		ldr	r3, .L85
 839              	.LVL101:
 840 003e 40F24272 		movw	r2, #1858
 841              	.LVL102:
 842 0042 0349     		ldr	r1, .L85+4
 843              	.LVL103:
 844 0044 0348     		ldr	r0, .L85+8
 845              	.LVL104:
 846 0046 FFF7FEFF 		bl	printf
 847              	.LVL105:
 848 004a E0E7     		b	.L81
 849              	.L86:
 850              		.align	2
 851              	.L85:
 852 004c 00000000 		.word	.LC0
 853 0050 00000000 		.word	.LC15
 854 0054 50000000 		.word	.LC2
 855              		.cfi_endproc
 856              	.LFE175:
 858              		.section	.text.tcp_route,"ax",%progbits
 859              		.align	1
 860              		.syntax unified
 861              		.thumb
 862              		.thumb_func
 863              		.fpu fpv5-d16
 865              	tcp_route:
 866              	.LFB158:
 133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(src); /* in case IPv4-only and source-based routing is disabled */
 867              		.loc 1 133 0
 868              		.cfi_startproc
 869              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccMjT2X9.s 			page 51


 870              		@ frame_needed = 0, uses_anonymous_args = 0
 871              	.LVL106:
 872 0000 08B5     		push	{r3, lr}
 873              	.LCFI10:
 874              		.cfi_def_cfa_offset 8
 875              		.cfi_offset 3, -8
 876              		.cfi_offset 14, -4
 136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return netif_get_by_index(pcb->netif_idx);
 877              		.loc 1 136 0
 878 0002 08B1     		cbz	r0, .L88
 136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return netif_get_by_index(pcb->netif_idx);
 879              		.loc 1 136 0 is_stmt 0 discriminator 1
 880 0004 007A     		ldrb	r0, [r0, #8]	@ zero_extendqisi2
 881              	.LVL107:
 882 0006 18B9     		cbnz	r0, .L91
 883              	.L88:
 139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 884              		.loc 1 139 0 is_stmt 1
 885 0008 1046     		mov	r0, r2
 886 000a FFF7FEFF 		bl	ip4_route
 887              	.LVL108:
 141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 888              		.loc 1 141 0
 889 000e 08BD     		pop	{r3, pc}
 890              	.LVL109:
 891              	.L91:
 137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 892              		.loc 1 137 0
 893 0010 FFF7FEFF 		bl	netif_get_by_index
 894              	.LVL110:
 895 0014 08BD     		pop	{r3, pc}
 896              		.cfi_endproc
 897              	.LFE158:
 899              		.section	.text.tcp_output_segment,"ax",%progbits
 900              		.align	1
 901              		.syntax unified
 902              		.thumb
 903              		.thumb_func
 904              		.fpu fpv5-d16
 906              	tcp_output_segment:
 907              	.LFB168:
1456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 908              		.loc 1 1456 0
 909              		.cfi_startproc
 910              		@ args = 0, pretend = 0, frame = 0
 911              		@ frame_needed = 0, uses_anonymous_args = 0
 912              	.LVL111:
 913 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 914              	.LCFI11:
 915              		.cfi_def_cfa_offset 24
 916              		.cfi_offset 4, -24
 917              		.cfi_offset 5, -20
 918              		.cfi_offset 6, -16
 919              		.cfi_offset 7, -12
 920              		.cfi_offset 8, -8
 921              		.cfi_offset 14, -4
 922 0004 84B0     		sub	sp, sp, #16
ARM GAS  /tmp/ccMjT2X9.s 			page 52


 923              	.LCFI12:
 924              		.cfi_def_cfa_offset 40
 925 0006 0D46     		mov	r5, r1
 926 0008 1646     		mov	r6, r2
1464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid pcb", pcb != NULL);
 927              		.loc 1 1464 0
 928 000a 0446     		mov	r4, r0
 929 000c 48B1     		cbz	r0, .L105
 930              	.LVL112:
 931              	.L93:
1465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid netif", netif != NULL);
 932              		.loc 1 1465 0
 933 000e 85B1     		cbz	r5, .L106
 934              	.L94:
1466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 935              		.loc 1 1466 0
 936 0010 BEB1     		cbz	r6, .L107
 937              	.L95:
1468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This should not happen: rexmit functions should have checked this.
 938              		.loc 1 1468 0
 939 0012 2046     		mov	r0, r4
 940 0014 FFF7FEFF 		bl	tcp_output_segment_busy
 941              	.LVL113:
 942 0018 D8B1     		cbz	r0, .L108
1472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 943              		.loc 1 1472 0
 944 001a 0020     		movs	r0, #0
 945              	.L96:
1621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 946              		.loc 1 1621 0
 947 001c 04B0     		add	sp, sp, #16
 948              	.LCFI13:
 949              		.cfi_remember_state
 950              		.cfi_def_cfa_offset 24
 951              		@ sp needed
 952 001e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 953              	.LVL114:
 954              	.L105:
 955              	.LCFI14:
 956              		.cfi_restore_state
1464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid pcb", pcb != NULL);
 957              		.loc 1 1464 0 discriminator 1
 958 0022 414B     		ldr	r3, .L112
 959 0024 4FF4B762 		mov	r2, #1464
 960              	.LVL115:
 961 0028 4049     		ldr	r1, .L112+4
 962              	.LVL116:
 963 002a 4148     		ldr	r0, .L112+8
 964              	.LVL117:
 965 002c FFF7FEFF 		bl	printf
 966              	.LVL118:
 967 0030 EDE7     		b	.L93
 968              	.L106:
1465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid netif", netif != NULL);
 969              		.loc 1 1465 0 discriminator 1
 970 0032 3D4B     		ldr	r3, .L112
 971 0034 40F2B952 		movw	r2, #1465
ARM GAS  /tmp/ccMjT2X9.s 			page 53


 972 0038 3E49     		ldr	r1, .L112+12
 973 003a 3D48     		ldr	r0, .L112+8
 974 003c FFF7FEFF 		bl	printf
 975              	.LVL119:
 976 0040 E6E7     		b	.L94
 977              	.L107:
1466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 978              		.loc 1 1466 0 discriminator 1
 979 0042 394B     		ldr	r3, .L112
 980 0044 40F2BA52 		movw	r2, #1466
 981 0048 3B49     		ldr	r1, .L112+16
 982 004a 3948     		ldr	r0, .L112+8
 983 004c FFF7FEFF 		bl	printf
 984              	.LVL120:
 985 0050 DFE7     		b	.L95
 986              	.L108:
1477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 987              		.loc 1 1477 0
 988 0052 E768     		ldr	r7, [r4, #12]
 989 0054 686A     		ldr	r0, [r5, #36]
 990 0056 FFF7FEFF 		bl	lwip_htonl
 991              	.LVL121:
 992 005a B860     		str	r0, [r7, #8]	@ unaligned
1488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 993              		.loc 1 1488 0
 994 005c E768     		ldr	r7, [r4, #12]
 995 005e 688D     		ldrh	r0, [r5, #42]
 996 0060 FFF7FEFF 		bl	lwip_htons
 997              	.LVL122:
 998 0064 F881     		strh	r0, [r7, #14]	@ unaligned
1491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 999              		.loc 1 1491 0
 1000 0066 6B6A     		ldr	r3, [r5, #36]
 1001 0068 6A8D     		ldrh	r2, [r5, #42]
 1002 006a 1344     		add	r3, r3, r2
 1003 006c EB62     		str	r3, [r5, #44]
1496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_MSS) {
 1004              		.loc 1 1496 0
 1005 006e D4F80C80 		ldr	r8, [r4, #12]
 1006 0072 08F11407 		add	r7, r8, #20
 1007              	.LVL123:
1497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t mss;
 1008              		.loc 1 1497 0
 1009 0076 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 1010 0078 13F0010F 		tst	r3, #1
 1011 007c 36D1     		bne	.L109
 1012              	.L97:
1534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtime = 0;
 1013              		.loc 1 1534 0
 1014 007e B5F93030 		ldrsh	r3, [r5, #48]
 1015 0082 002B     		cmp	r3, #0
 1016 0084 41DB     		blt	.L110
 1017              	.L98:
1538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rttest = tcp_ticks;
 1018              		.loc 1 1538 0
 1019 0086 6B6B     		ldr	r3, [r5, #52]
 1020 0088 002B     		cmp	r3, #0
ARM GAS  /tmp/ccMjT2X9.s 			page 54


 1021 008a 41D0     		beq	.L111
 1022              	.L99:
1548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len == 0) {
 1023              		.loc 1 1548 0
 1024 008c E368     		ldr	r3, [r4, #12]
 1025 008e 6268     		ldr	r2, [r4, #4]
 1026 0090 5168     		ldr	r1, [r2, #4]
 1027 0092 5B1A     		subs	r3, r3, r1
 1028 0094 9BB2     		uxth	r3, r3
 1029              	.LVL124:
1554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->tot_len -= len;
 1030              		.loc 1 1554 0
 1031 0096 5189     		ldrh	r1, [r2, #10]
 1032 0098 C91A     		subs	r1, r1, r3
 1033 009a 5181     		strh	r1, [r2, #10]	@ movhi
1555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1034              		.loc 1 1555 0
 1035 009c 6168     		ldr	r1, [r4, #4]
 1036 009e 0A89     		ldrh	r2, [r1, #8]
 1037 00a0 D31A     		subs	r3, r2, r3
 1038              	.LVL125:
 1039 00a2 0B81     		strh	r3, [r1, #8]	@ movhi
1557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1040              		.loc 1 1557 0
 1041 00a4 6368     		ldr	r3, [r4, #4]
 1042 00a6 E268     		ldr	r2, [r4, #12]
 1043 00a8 5A60     		str	r2, [r3, #4]
1559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1044              		.loc 1 1559 0
 1045 00aa E368     		ldr	r3, [r4, #12]
 1046 00ac 0022     		movs	r2, #0
 1047 00ae 1A74     		strb	r2, [r3, #16]
 1048 00b0 5A74     		strb	r2, [r3, #17]
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1049              		.loc 1 1564 0
 1050 00b2 E368     		ldr	r3, [r4, #12]
 1051 00b4 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 1052 00b6 12F0010F 		tst	r2, #1
 1053 00ba 32D0     		beq	.L103
 1054 00bc 0422     		movs	r2, #4
 1055              	.L100:
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1056              		.loc 1 1564 0 is_stmt 0 discriminator 4
 1057 00be 1432     		adds	r2, r2, #20
 1058 00c0 1344     		add	r3, r3, r2
 1059 00c2 9F42     		cmp	r7, r3
 1060 00c4 06D0     		beq	.L101
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1061              		.loc 1 1564 0 discriminator 5
 1062 00c6 184B     		ldr	r3, .L112
 1063 00c8 40F21C62 		movw	r2, #1564
 1064 00cc 1B49     		ldr	r1, .L112+20
 1065 00ce 1848     		ldr	r0, .L112+8
 1066 00d0 FFF7FEFF 		bl	printf
 1067              	.LVL126:
 1068              	.L101:
1607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      pcb->tos, IP_PROTO_TCP, netif);
ARM GAS  /tmp/ccMjT2X9.s 			page 55


 1069              		.loc 1 1607 0 is_stmt 1
 1070 00d4 6068     		ldr	r0, [r4, #4]
 1071 00d6 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 1072 00d8 AA7A     		ldrb	r2, [r5, #10]	@ zero_extendqisi2
 1073 00da 0296     		str	r6, [sp, #8]
 1074 00dc 0621     		movs	r1, #6
 1075 00de 0191     		str	r1, [sp, #4]
 1076 00e0 0092     		str	r2, [sp]
 1077 00e2 2A1D     		adds	r2, r5, #4
 1078 00e4 2946     		mov	r1, r5
 1079 00e6 FFF7FEFF 		bl	ip4_output_if
 1080              	.LVL127:
1620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1081              		.loc 1 1620 0
 1082 00ea 97E7     		b	.L96
 1083              	.LVL128:
 1084              	.L109:
 1085              	.LBB2:
1500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CALCULATE_EFF_SEND_MSS */
 1086              		.loc 1 1500 0
 1087 00ec 2A1D     		adds	r2, r5, #4
 1088 00ee 3146     		mov	r1, r6
 1089 00f0 4FF40670 		mov	r0, #536
 1090 00f4 FFF7FEFF 		bl	tcp_eff_send_mss_netif
 1091              	.LVL129:
1504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
 1092              		.loc 1 1504 0
 1093 00f8 40F00170 		orr	r0, r0, #33816576
 1094              	.LVL130:
 1095 00fc FFF7FEFF 		bl	lwip_htonl
 1096              	.LVL131:
 1097 0100 C8F81400 		str	r0, [r8, #20]
1505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1098              		.loc 1 1505 0
 1099 0104 08F11807 		add	r7, r8, #24
 1100              	.LVL132:
 1101 0108 B9E7     		b	.L97
 1102              	.L110:
 1103              	.LBE2:
1535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1104              		.loc 1 1535 0
 1105 010a 0023     		movs	r3, #0
 1106 010c 2B86     		strh	r3, [r5, #48]	@ movhi
 1107 010e BAE7     		b	.L98
 1108              	.L111:
1539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtseq = lwip_ntohl(seg->tcphdr->seqno);
 1109              		.loc 1 1539 0
 1110 0110 0B4B     		ldr	r3, .L112+24
 1111 0112 1B68     		ldr	r3, [r3]
 1112 0114 6B63     		str	r3, [r5, #52]
1540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1113              		.loc 1 1540 0
 1114 0116 E368     		ldr	r3, [r4, #12]
 1115 0118 5868     		ldr	r0, [r3, #4]	@ unaligned
 1116 011a FFF7FEFF 		bl	lwip_htonl
 1117              	.LVL133:
 1118 011e A863     		str	r0, [r5, #56]
ARM GAS  /tmp/ccMjT2X9.s 			page 56


 1119 0120 B4E7     		b	.L99
 1120              	.L103:
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1121              		.loc 1 1564 0
 1122 0122 0022     		movs	r2, #0
 1123 0124 CBE7     		b	.L100
 1124              	.L113:
 1125 0126 00BF     		.align	2
 1126              	.L112:
 1127 0128 00000000 		.word	.LC0
 1128 012c 00000000 		.word	.LC16
 1129 0130 50000000 		.word	.LC2
 1130 0134 20000000 		.word	.LC17
 1131 0138 40000000 		.word	.LC18
 1132 013c 28000000 		.word	.LC7
 1133 0140 00000000 		.word	tcp_ticks
 1134              		.cfi_endproc
 1135              	.LFE168:
 1137              		.section	.text.tcp_output_control_segment,"ax",%progbits
 1138              		.align	1
 1139              		.syntax unified
 1140              		.thumb
 1141              		.thumb_func
 1142              		.fpu fpv5-d16
 1144              	tcp_output_control_segment:
 1145              	.LFB177:
1910:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(optflags); /* for LWIP_NOASSERT */
1911:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(opts); /* for LWIP_NOASSERT */
1912:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1913:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1914:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Output a control segment pbuf to IP.
1915:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1916:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called from tcp_rst, tcp_send_empty_ack, tcp_keepalive and tcp_zero_window_probe,
1917:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * this function combines selecting a netif for transmission, generating the tcp
1918:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * header checksum and calling ip_output_if while handling netif hints and stats.
1919:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1920:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
1921:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_control_segment(const struct tcp_pcb *pcb, struct pbuf *p,
1922:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                            const ip_addr_t *src, const ip_addr_t *dst)
1923:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 1146              		.loc 1 1923 0
 1147              		.cfi_startproc
 1148              		@ args = 0, pretend = 0, frame = 0
 1149              		@ frame_needed = 0, uses_anonymous_args = 0
 1150              	.LVL134:
 1151 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1152              	.LCFI15:
 1153              		.cfi_def_cfa_offset 20
 1154              		.cfi_offset 4, -20
 1155              		.cfi_offset 5, -16
 1156              		.cfi_offset 6, -12
 1157              		.cfi_offset 7, -8
 1158              		.cfi_offset 14, -4
 1159 0002 85B0     		sub	sp, sp, #20
 1160              	.LCFI16:
 1161              		.cfi_def_cfa_offset 40
 1162 0004 0446     		mov	r4, r0
ARM GAS  /tmp/ccMjT2X9.s 			page 57


 1163 0006 1646     		mov	r6, r2
 1164 0008 1F46     		mov	r7, r3
1924:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1925:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1926:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1927:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_control_segment: invalid pbuf", p != NULL);
 1165              		.loc 1 1927 0
 1166 000a 0D46     		mov	r5, r1
 1167 000c C9B1     		cbz	r1, .L121
 1168              	.LVL135:
 1169              	.L115:
1928:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1929:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = tcp_route(pcb, src, dst);
 1170              		.loc 1 1929 0
 1171 000e 3A46     		mov	r2, r7
 1172 0010 3146     		mov	r1, r6
 1173 0012 2046     		mov	r0, r4
 1174 0014 FFF7FEFF 		bl	tcp_route
 1175              	.LVL136:
1930:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 1176              		.loc 1 1930 0
 1177 0018 0246     		mov	r2, r0
 1178 001a E8B1     		cbz	r0, .L118
 1179              	.LBB3:
1931:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ERR_RTE;
1932:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1933:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t ttl, tos;
1934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1935:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1936:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       struct tcp_hdr *tcphdr = (struct tcp_hdr *)p->payload;
1937:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcphdr->chksum = ip_chksum_pseudo(p, IP_PROTO_TCP, p->tot_len,
1938:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                         src, dst);
1939:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1940:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1941:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb != NULL) {
 1180              		.loc 1 1941 0
 1181 001c CCB1     		cbz	r4, .L119
1942:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       NETIF_SET_HINTS(netif, LWIP_CONST_CAST(struct netif_hint*, &(pcb->netif_hints)));
1943:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ttl = pcb->ttl;
 1182              		.loc 1 1943 0
 1183 001e E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 1184              	.LVL137:
1944:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tos = pcb->tos;
 1185              		.loc 1 1944 0
 1186 0020 A17A     		ldrb	r1, [r4, #10]	@ zero_extendqisi2
 1187              	.LVL138:
 1188              	.L117:
1945:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
1946:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Send output with hardcoded TTL/HL since we have no access to the pcb */
1947:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ttl = TCP_TTL;
1948:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tos = 0;
1949:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1950:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.xmit);
1951:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ip_output_if(p, src, dst, ttl, tos, IP_PROTO_TCP, netif);
 1189              		.loc 1 1951 0
 1190 0022 0292     		str	r2, [sp, #8]
 1191 0024 0622     		movs	r2, #6
ARM GAS  /tmp/ccMjT2X9.s 			page 58


 1192 0026 0192     		str	r2, [sp, #4]
 1193 0028 0091     		str	r1, [sp]
 1194 002a 3A46     		mov	r2, r7
 1195 002c 3146     		mov	r1, r6
 1196              	.LVL139:
 1197 002e 2846     		mov	r0, r5
 1198              	.LVL140:
 1199 0030 FFF7FEFF 		bl	ip4_output_if
 1200              	.LVL141:
 1201 0034 0446     		mov	r4, r0
 1202              	.LVL142:
 1203              	.L116:
 1204              	.LBE3:
1952:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_RESET_HINTS(netif);
1953:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1954:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_free(p);
 1205              		.loc 1 1954 0
 1206 0036 2846     		mov	r0, r5
 1207 0038 FFF7FEFF 		bl	pbuf_free
 1208              	.LVL143:
1955:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
1956:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1209              		.loc 1 1956 0
 1210 003c 2046     		mov	r0, r4
 1211 003e 05B0     		add	sp, sp, #20
 1212              	.LCFI17:
 1213              		.cfi_remember_state
 1214              		.cfi_def_cfa_offset 20
 1215              		@ sp needed
 1216 0040 F0BD     		pop	{r4, r5, r6, r7, pc}
 1217              	.LVL144:
 1218              	.L121:
 1219              	.LCFI18:
 1220              		.cfi_restore_state
1927:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1221              		.loc 1 1927 0 discriminator 1
 1222 0042 074B     		ldr	r3, .L122
 1223              	.LVL145:
 1224 0044 40F28772 		movw	r2, #1927
 1225              	.LVL146:
 1226 0048 0649     		ldr	r1, .L122+4
 1227              	.LVL147:
 1228 004a 0748     		ldr	r0, .L122+8
 1229              	.LVL148:
 1230 004c FFF7FEFF 		bl	printf
 1231              	.LVL149:
 1232 0050 DDE7     		b	.L115
 1233              	.LVL150:
 1234              	.L119:
 1235              	.LBB4:
1948:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1236              		.loc 1 1948 0
 1237 0052 0021     		movs	r1, #0
1947:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tos = 0;
 1238              		.loc 1 1947 0
 1239 0054 FF23     		movs	r3, #255
 1240 0056 E4E7     		b	.L117
ARM GAS  /tmp/ccMjT2X9.s 			page 59


 1241              	.L118:
 1242              	.LBE4:
1931:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 1243              		.loc 1 1931 0
 1244 0058 6FF00304 		mvn	r4, #3
 1245              	.LVL151:
 1246 005c EBE7     		b	.L116
 1247              	.L123:
 1248 005e 00BF     		.align	2
 1249              	.L122:
 1250 0060 00000000 		.word	.LC0
 1251 0064 00000000 		.word	.LC19
 1252 0068 50000000 		.word	.LC2
 1253              		.cfi_endproc
 1254              	.LFE177:
 1256              		.section	.text.tcp_write,"ax",%progbits
 1257              		.align	1
 1258              		.global	tcp_write
 1259              		.syntax unified
 1260              		.thumb
 1261              		.thumb_func
 1262              		.fpu fpv5-d16
 1264              	tcp_write:
 1265              	.LFB162:
 391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *concat_p = NULL;
 1266              		.loc 1 391 0
 1267              		.cfi_startproc
 1268              		@ args = 0, pretend = 0, frame = 48
 1269              		@ frame_needed = 0, uses_anonymous_args = 0
 1270              	.LVL152:
 1271 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1272              	.LCFI19:
 1273              		.cfi_def_cfa_offset 36
 1274              		.cfi_offset 4, -36
 1275              		.cfi_offset 5, -32
 1276              		.cfi_offset 6, -28
 1277              		.cfi_offset 7, -24
 1278              		.cfi_offset 8, -20
 1279              		.cfi_offset 9, -16
 1280              		.cfi_offset 10, -12
 1281              		.cfi_offset 11, -8
 1282              		.cfi_offset 14, -4
 1283 0004 91B0     		sub	sp, sp, #68
 1284              	.LCFI20:
 1285              		.cfi_def_cfa_offset 104
 1286 0006 0891     		str	r1, [sp, #32]
 1287 0008 0693     		str	r3, [sp, #24]
 1288              	.LVL153:
 399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_used = 0;
 1289              		.loc 1 399 0
 1290 000a 0023     		movs	r3, #0
 1291              	.LVL154:
 1292 000c ADF83E30 		strh	r3, [sp, #62]	@ movhi
 1293              	.LVL155:
 414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1294              		.loc 1 414 0
 1295 0010 38B3     		cbz	r0, .L187
ARM GAS  /tmp/ccMjT2X9.s 			page 60


 1296 0012 9246     		mov	r10, r2
 1297 0014 8146     		mov	r9, r0
 417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = mss_local ? mss_local : pcb->mss;
 1298              		.loc 1 417 0
 1299 0016 B0F86230 		ldrh	r3, [r0, #98]
 1300 001a 428E     		ldrh	r2, [r0, #50]
 1301              	.LVL156:
 1302 001c 0592     		str	r2, [sp, #20]
 1303 001e 5B08     		lsrs	r3, r3, #1
 1304 0020 9342     		cmp	r3, r2
 1305 0022 28BF     		it	cs
 1306 0024 1346     		movcs	r3, r2
 1307              	.LVL157:
 418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1308              		.loc 1 418 0
 1309 0026 03B1     		cbz	r3, .L127
 1310 0028 0593     		str	r3, [sp, #20]
 1311              	.L127:
 1312              	.LVL158:
 429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 1313              		.loc 1 429 0 discriminator 4
 1314 002a 089B     		ldr	r3, [sp, #32]
 1315 002c 23B3     		cbz	r3, .L188
 432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 1316              		.loc 1 432 0
 1317 002e 5146     		mov	r1, r10
 1318              	.LVL159:
 1319 0030 4846     		mov	r0, r9
 1320              	.LVL160:
 1321 0032 FFF7FEFF 		bl	tcp_write_checks
 1322              	.LVL161:
 433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return err;
 1323              		.loc 1 433 0
 1324 0036 0A90     		str	r0, [sp, #40]
 1325 0038 0028     		cmp	r0, #0
 1326 003a 40F0BB81 		bne	.L126
 436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1327              		.loc 1 436 0
 1328 003e B9F86660 		ldrh	r6, [r9, #102]
 1329              	.LVL162:
 476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t space;
 1330              		.loc 1 476 0
 1331 0042 D9F86CB0 		ldr	fp, [r9, #108]
 1332 0046 BBF1000F 		cmp	fp, #0
 1333 004a 21D1     		bne	.L130
 586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 1334              		.loc 1 586 0
 1335 004c B9F86840 		ldrh	r4, [r9, #104]
 1336 0050 002C     		cmp	r4, #0
 1337 0052 40F0E380 		bne	.L189
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1338              		.loc 1 405 0
 1339 0056 0C94     		str	r4, [sp, #48]
 400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 1340              		.loc 1 400 0
 1341 0058 0994     		str	r4, [sp, #36]
 393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
ARM GAS  /tmp/ccMjT2X9.s 			page 61


 1342              		.loc 1 393 0
 1343 005a D846     		mov	r8, fp
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1344              		.loc 1 392 0
 1345 005c 0023     		movs	r3, #0
 1346 005e 0B93     		str	r3, [sp, #44]
 1347 0060 EEE0     		b	.L138
 1348              	.LVL163:
 1349              	.L187:
 414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1350              		.loc 1 414 0 discriminator 1
 1351 0062 B54B     		ldr	r3, .L207
 1352 0064 4FF4CF72 		mov	r2, #414
 1353              	.LVL164:
 1354 0068 B449     		ldr	r1, .L207+4
 1355              	.LVL165:
 1356 006a B548     		ldr	r0, .L207+8
 1357              	.LVL166:
 1358 006c FFF7FEFF 		bl	printf
 1359              	.LVL167:
 1360 0070 6FF00F03 		mvn	r3, #15
 1361 0074 0A93     		str	r3, [sp, #40]
 1362 0076 9DE1     		b	.L126
 1363              	.LVL168:
 1364              	.L188:
 429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 1365              		.loc 1 429 0 discriminator 1
 1366 0078 AF4B     		ldr	r3, .L207
 1367 007a 4FF4D772 		mov	r2, #430
 1368 007e B149     		ldr	r1, .L207+12
 1369              	.LVL169:
 1370 0080 AF48     		ldr	r0, .L207+8
 1371              	.LVL170:
 1372 0082 FFF7FEFF 		bl	printf
 1373              	.LVL171:
 1374 0086 6FF00F03 		mvn	r3, #15
 1375 008a 0A93     		str	r3, [sp, #40]
 1376 008c 92E1     		b	.L126
 1377              	.LVL172:
 1378              	.L170:
 1379              	.LBB5:
 482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1380              		.loc 1 482 0
 1381 008e BB46     		mov	fp, r7
 1382              	.LVL173:
 1383              	.L130:
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 1384              		.loc 1 481 0 discriminator 1
 1385 0090 DBF80070 		ldr	r7, [fp]
 1386 0094 002F     		cmp	r7, #0
 1387 0096 FAD1     		bne	.L170
 485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("mss_local is too small", mss_local >= last_unsent->len + unsent_optlen);
 1388              		.loc 1 485 0
 1389 0098 9BF80A30 		ldrb	r3, [fp, #10]	@ zero_extendqisi2
 1390 009c 13F0010F 		tst	r3, #1
 1391 00a0 46D0     		beq	.L171
 1392 00a2 0424     		movs	r4, #4
ARM GAS  /tmp/ccMjT2X9.s 			page 62


 1393              	.L131:
 1394              	.LVL174:
 486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 1395              		.loc 1 486 0 discriminator 4
 1396 00a4 BBF80830 		ldrh	r3, [fp, #8]
 1397 00a8 2344     		add	r3, r3, r4
 1398 00aa 059A     		ldr	r2, [sp, #20]
 1399 00ac 9A42     		cmp	r2, r3
 1400 00ae 41DB     		blt	.L190
 1401              	.LVL175:
 1402              	.L132:
 487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1403              		.loc 1 487 0
 1404 00b0 BBF80830 		ldrh	r3, [fp, #8]
 1405 00b4 1C44     		add	r4, r4, r3
 1406              	.LVL176:
 1407 00b6 A4B2     		uxth	r4, r4
 1408 00b8 059B     		ldr	r3, [sp, #20]
 1409 00ba 1C1B     		subs	r4, r3, r4
 1410 00bc A4B2     		uxth	r4, r4
 1411              	.LVL177:
 502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (oversize > 0) {
 1412              		.loc 1 502 0
 1413 00be B9F86830 		ldrh	r3, [r9, #104]
 1414 00c2 0993     		str	r3, [sp, #36]
 1415 00c4 ADF83E30 		strh	r3, [sp, #62]	@ movhi
 503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("inconsistent oversize vs. space", oversize <= space);
 1416              		.loc 1 503 0
 1417 00c8 002B     		cmp	r3, #0
 1418 00ca 45D0     		beq	.L172
 504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 1419              		.loc 1 504 0
 1420 00cc 9C42     		cmp	r4, r3
 1421 00ce 39D3     		bcc	.L191
 1422              	.L134:
 1423              	.LVL178:
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 1424              		.loc 1 506 0
 1425 00d0 BDF83E30 		ldrh	r3, [sp, #62]
 1426 00d4 9A45     		cmp	r10, r3
 1427 00d6 3DD9     		bls	.L135
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 1428              		.loc 1 506 0 is_stmt 0 discriminator 1
 1429 00d8 1A46     		mov	r2, r3
 1430              	.L136:
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 1431              		.loc 1 506 0 discriminator 4
 1432 00da A242     		cmp	r2, r4
 1433 00dc A8BF     		it	ge
 1434 00de 2246     		movge	r2, r4
 1435 00e0 0992     		str	r2, [sp, #36]
 1436              	.LVL179:
 508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       space -= oversize_used;
 1437              		.loc 1 508 0 is_stmt 1 discriminator 4
 1438 00e2 9B1A     		subs	r3, r3, r2
 1439 00e4 ADF83E30 		strh	r3, [sp, #62]	@ movhi
 509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
ARM GAS  /tmp/ccMjT2X9.s 			page 63


 1440              		.loc 1 509 0 discriminator 4
 1441 00e8 A41A     		subs	r4, r4, r2
 1442              	.LVL180:
 1443 00ea A4B2     		uxth	r4, r4
 1444              	.LVL181:
 505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize_used = LWIP_MIN(space, LWIP_MIN(oversize, len));
 1445              		.loc 1 505 0 discriminator 4
 1446 00ec D846     		mov	r8, fp
 1447              	.LVL182:
 1448              	.L133:
 512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 1449              		.loc 1 512 0
 1450 00ee BDF83E30 		ldrh	r3, [sp, #62]
 1451 00f2 099A     		ldr	r2, [sp, #36]
 1452 00f4 002B     		cmp	r3, #0
 1453 00f6 18BF     		it	ne
 1454 00f8 5245     		cmpne	r2, r10
 1455 00fa 2FD1     		bne	.L192
 1456              	.L137:
 531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 1457              		.loc 1 531 0
 1458 00fc 099A     		ldr	r2, [sp, #36]
 1459 00fe 002C     		cmp	r4, #0
 1460 0100 18BF     		it	ne
 1461 0102 5245     		cmpne	r2, r10
 1462 0104 80F09880 		bcs	.L173
 531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 1463              		.loc 1 531 0 is_stmt 0 discriminator 1
 1464 0108 BBF80830 		ldrh	r3, [fp, #8]
 1465 010c 0C93     		str	r3, [sp, #48]
 1466 010e 002B     		cmp	r3, #0
 1467 0110 00F09B80 		beq	.L174
 1468              	.LBB6:
 532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 1469              		.loc 1 532 0 is_stmt 1
 1470 0114 AAEB0205 		sub	r5, r10, r2
 1471 0118 A542     		cmp	r5, r4
 1472 011a A8BF     		it	ge
 1473 011c 2546     		movge	r5, r4
 1474 011e 1FFA85F8 		uxth	r8, r5
 1475              	.LVL183:
 538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is copied */
 1476              		.loc 1 538 0
 1477 0122 069B     		ldr	r3, [sp, #24]
 1478 0124 13F0010F 		tst	r3, #1
 1479 0128 20D1     		bne	.L193
 1480              	.LBB7:
 558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (((p->type_internal & (PBUF_TYPE_FLAG_STRUCT_DATA_CONTIGUOUS | PBUF_TYPE_FLAG_DATA_VOLAT
 1481              		.loc 1 558 0
 1482 012a DBF80430 		ldr	r3, [fp, #4]
 1483              	.LVL184:
 1484 012e 3FE0     		b	.L142
 1485              	.LVL185:
 1486              	.L171:
 1487              	.LBE7:
 1488              	.LBE6:
 485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("mss_local is too small", mss_local >= last_unsent->len + unsent_optlen);
ARM GAS  /tmp/ccMjT2X9.s 			page 64


 1489              		.loc 1 485 0
 1490 0130 0024     		movs	r4, #0
 1491 0132 B7E7     		b	.L131
 1492              	.LVL186:
 1493              	.L190:
 486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 1494              		.loc 1 486 0 discriminator 1
 1495 0134 804B     		ldr	r3, .L207
 1496 0136 4FF4F372 		mov	r2, #486
 1497 013a 8349     		ldr	r1, .L207+16
 1498 013c 8048     		ldr	r0, .L207+8
 1499              	.LVL187:
 1500 013e FFF7FEFF 		bl	printf
 1501              	.LVL188:
 1502 0142 B5E7     		b	.L132
 1503              	.LVL189:
 1504              	.L191:
 504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 1505              		.loc 1 504 0 discriminator 1
 1506 0144 7C4B     		ldr	r3, .L207
 1507 0146 4FF4FC72 		mov	r2, #504
 1508 014a 8049     		ldr	r1, .L207+20
 1509 014c 7C48     		ldr	r0, .L207+8
 1510 014e FFF7FEFF 		bl	printf
 1511              	.LVL190:
 1512 0152 BDE7     		b	.L134
 1513              	.LVL191:
 1514              	.L135:
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 1515              		.loc 1 506 0 discriminator 2
 1516 0154 5246     		mov	r2, r10
 1517 0156 C0E7     		b	.L136
 1518              	.LVL192:
 1519              	.L172:
 1520              	.LBE5:
 393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 1521              		.loc 1 393 0
 1522 0158 B846     		mov	r8, r7
 1523 015a C8E7     		b	.L133
 1524              	.LVL193:
 1525              	.L192:
 1526              	.LBB13:
 512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 1527              		.loc 1 512 0 discriminator 1
 1528 015c 764B     		ldr	r3, .L207
 1529 015e 4FF40072 		mov	r2, #512
 1530 0162 7B49     		ldr	r1, .L207+24
 1531 0164 7648     		ldr	r0, .L207+8
 1532 0166 FFF7FEFF 		bl	printf
 1533              	.LVL194:
 1534 016a C7E7     		b	.L137
 1535              	.LVL195:
 1536              	.L193:
 1537              	.LBB10:
 540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 1538              		.loc 1 540 0
 1539 016c 0123     		movs	r3, #1
ARM GAS  /tmp/ccMjT2X9.s 			page 65


 1540 016e 0293     		str	r3, [sp, #8]
 1541 0170 069B     		ldr	r3, [sp, #24]
 1542 0172 0193     		str	r3, [sp, #4]
 1543 0174 CDF80090 		str	r9, [sp]
 1544 0178 0DF13E03 		add	r3, sp, #62
 1545 017c 2246     		mov	r2, r4
 1546 017e 4146     		mov	r1, r8
 1547 0180 0020     		movs	r0, #0
 1548 0182 FFF7FEFF 		bl	tcp_pbuf_prealloc
 1549              	.LVL196:
 1550 0186 0446     		mov	r4, r0
 1551              	.LVL197:
 1552 0188 0B90     		str	r0, [sp, #44]
 1553 018a 0028     		cmp	r0, #0
 1554 018c 00F0F180 		beq	.L140
 549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1555              		.loc 1 549 0
 1556 0190 4246     		mov	r2, r8
 1557 0192 0899     		ldr	r1, [sp, #32]
 1558 0194 0998     		ldr	r0, [sp, #36]
 1559              	.LVL198:
 1560 0196 0144     		add	r1, r1, r0
 1561 0198 6068     		ldr	r0, [r4, #4]
 1562 019a FFF7FEFF 		bl	memcpy
 1563              	.LVL199:
 553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
 1564              		.loc 1 553 0
 1565 019e 2046     		mov	r0, r4
 1566 01a0 FFF7FEFF 		bl	pbuf_clen
 1567              	.LVL200:
 1568 01a4 0644     		add	r6, r6, r0
 1569              	.LVL201:
 1570 01a6 B6B2     		uxth	r6, r6
 1571              	.LVL202:
 1572              	.LBE10:
 1573              	.LBE13:
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1574              		.loc 1 405 0
 1575 01a8 0023     		movs	r3, #0
 1576 01aa 0C93     		str	r3, [sp, #48]
 1577              	.LBB14:
 1578              	.LBB11:
 1579 01ac 21E0     		b	.L141
 1580              	.LVL203:
 1581              	.L175:
 1582              	.LBB8:
 558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (((p->type_internal & (PBUF_TYPE_FLAG_STRUCT_DATA_CONTIGUOUS | PBUF_TYPE_FLAG_DATA_VOLAT
 1583              		.loc 1 558 0
 1584 01ae 1346     		mov	r3, r2
 1585              	.LVL204:
 1586              	.L142:
 558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (((p->type_internal & (PBUF_TYPE_FLAG_STRUCT_DATA_CONTIGUOUS | PBUF_TYPE_FLAG_DATA_VOLAT
 1587              		.loc 1 558 0 is_stmt 0 discriminator 1
 1588 01b0 1A68     		ldr	r2, [r3]
 1589 01b2 002A     		cmp	r2, #0
 1590 01b4 FBD1     		bne	.L175
 1591 01b6 0B92     		str	r2, [sp, #44]
ARM GAS  /tmp/ccMjT2X9.s 			page 66


 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 1592              		.loc 1 559 0 is_stmt 1
 1593 01b8 1A7B     		ldrb	r2, [r3, #12]	@ zero_extendqisi2
 1594 01ba 12F0C00F 		tst	r2, #192
 1595 01be 05D1     		bne	.L143
 560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_ASSERT("tcp_write: ROM pbufs cannot be oversized", pos == 0);
 1596              		.loc 1 560 0 discriminator 1
 1597 01c0 5A68     		ldr	r2, [r3, #4]
 1598 01c2 5B89     		ldrh	r3, [r3, #10]
 1599              	.LVL205:
 1600 01c4 1344     		add	r3, r3, r2
 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 1601              		.loc 1 559 0 discriminator 1
 1602 01c6 089A     		ldr	r2, [sp, #32]
 1603 01c8 9A42     		cmp	r2, r3
 1604 01ca 18D0     		beq	.L194
 1605              	.L143:
 564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 1606              		.loc 1 564 0
 1607 01cc 0122     		movs	r2, #1
 1608 01ce 4146     		mov	r1, r8
 1609 01d0 0020     		movs	r0, #0
 1610 01d2 FFF7FEFF 		bl	pbuf_alloc
 1611              	.LVL206:
 1612 01d6 0B90     		str	r0, [sp, #44]
 1613 01d8 0028     		cmp	r0, #0
 1614 01da 00F0CA80 		beq	.L140
 570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           queuelen += pbuf_clen(concat_p);
 1615              		.loc 1 570 0
 1616 01de 089B     		ldr	r3, [sp, #32]
 1617 01e0 0999     		ldr	r1, [sp, #36]
 1618 01e2 0B44     		add	r3, r3, r1
 1619 01e4 4360     		str	r3, [r0, #4]
 571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 1620              		.loc 1 571 0
 1621 01e6 FFF7FEFF 		bl	pbuf_clen
 1622              	.LVL207:
 1623 01ea 0644     		add	r6, r6, r0
 1624              	.LVL208:
 1625 01ec B6B2     		uxth	r6, r6
 1626              	.LVL209:
 1627              	.LBE8:
 1628              	.LBE11:
 1629              	.LBE14:
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1630              		.loc 1 405 0
 1631 01ee 0023     		movs	r3, #0
 1632 01f0 0C93     		str	r3, [sp, #48]
 1633              	.LVL210:
 1634              	.L141:
 1635              	.LBB15:
 1636              	.LBB12:
 581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1637              		.loc 1 581 0
 1638 01f2 099B     		ldr	r3, [sp, #36]
 1639 01f4 03EB0804 		add	r4, r3, r8
 1640 01f8 A4B2     		uxth	r4, r4
ARM GAS  /tmp/ccMjT2X9.s 			page 67


 1641              	.LVL211:
 533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1642              		.loc 1 533 0
 1643 01fa D846     		mov	r8, fp
 1644              	.LVL212:
 1645 01fc 20E0     		b	.L138
 1646              	.LVL213:
 1647              	.L194:
 1648              	.LBB9:
 561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 1649              		.loc 1 561 0
 1650 01fe 099B     		ldr	r3, [sp, #36]
 1651 0200 13B9     		cbnz	r3, .L195
 562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 1652              		.loc 1 562 0
 1653 0202 CDF83080 		str	r8, [sp, #48]
 1654 0206 F4E7     		b	.L141
 1655              	.L195:
 561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 1656              		.loc 1 561 0 discriminator 1
 1657 0208 4B4B     		ldr	r3, .L207
 1658 020a 40F23122 		movw	r2, #561
 1659 020e 5149     		ldr	r1, .L207+28
 1660 0210 4B48     		ldr	r0, .L207+8
 1661 0212 FFF7FEFF 		bl	printf
 1662              	.LVL214:
 562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 1663              		.loc 1 562 0 discriminator 1
 1664 0216 CDF83080 		str	r8, [sp, #48]
 1665 021a EAE7     		b	.L141
 1666              	.LVL215:
 1667              	.L189:
 1668              	.LBE9:
 1669              	.LBE12:
 1670              	.LBE15:
 586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 1671              		.loc 1 586 0 discriminator 1
 1672 021c 464B     		ldr	r3, .L207
 1673 021e 40F24B22 		movw	r2, #587
 1674 0222 4D49     		ldr	r1, .L207+32
 1675 0224 4648     		ldr	r0, .L207+8
 1676              	.LVL216:
 1677 0226 FFF7FEFF 		bl	printf
 1678              	.LVL217:
 393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 1679              		.loc 1 393 0 discriminator 1
 1680 022a D846     		mov	r8, fp
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1681              		.loc 1 405 0 discriminator 1
 1682 022c 0023     		movs	r3, #0
 1683 022e 0C93     		str	r3, [sp, #48]
 400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 1684              		.loc 1 400 0 discriminator 1
 1685 0230 0993     		str	r3, [sp, #36]
 394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t queuelen;
 1686              		.loc 1 394 0 discriminator 1
 1687 0232 1C46     		mov	r4, r3
ARM GAS  /tmp/ccMjT2X9.s 			page 68


 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1688              		.loc 1 392 0 discriminator 1
 1689 0234 0B93     		str	r3, [sp, #44]
 1690 0236 03E0     		b	.L138
 1691              	.LVL218:
 1692              	.L173:
 1693              	.LBB16:
 1694 0238 099C     		ldr	r4, [sp, #36]
 1695              	.LVL219:
 1696              	.LBE16:
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1697              		.loc 1 405 0
 1698 023a 0023     		movs	r3, #0
 1699 023c 0C93     		str	r3, [sp, #48]
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1700              		.loc 1 392 0
 1701 023e 0B93     		str	r3, [sp, #44]
 1702              	.LVL220:
 1703              	.L138:
 1704              	.LBB17:
 680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 1705              		.loc 1 680 0
 1706 0240 0027     		movs	r7, #0
 1707 0242 CDF834B0 		str	fp, [sp, #52]
 1708 0246 BB46     		mov	fp, r7
 1709 0248 5CE0     		b	.L144
 1710              	.LVL221:
 1711              	.L174:
 1712              	.LBE17:
 1713              	.LBB20:
 1714 024a 099C     		ldr	r4, [sp, #36]
 1715              	.LVL222:
 1716              	.LBE20:
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1717              		.loc 1 392 0
 1718 024c 0023     		movs	r3, #0
 1719 024e 0B93     		str	r3, [sp, #44]
 1720 0250 F6E7     		b	.L138
 1721              	.LVL223:
 1722              	.L201:
 1723              	.LBB21:
 610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write : could not allocate mem
 1724              		.loc 1 610 0
 1725 0252 B7FA87F3 		clz	r3, r7
 1726 0256 5B09     		lsrs	r3, r3, #5
 1727 0258 0293     		str	r3, [sp, #8]
 1728 025a 069B     		ldr	r3, [sp, #24]
 1729 025c 0193     		str	r3, [sp, #4]
 1730 025e CDF80090 		str	r9, [sp]
 1731 0262 0DF13E03 		add	r3, sp, #62
 1732 0266 059A     		ldr	r2, [sp, #20]
 1733 0268 2946     		mov	r1, r5
 1734 026a 3620     		movs	r0, #54
 1735 026c FFF7FEFF 		bl	tcp_pbuf_prealloc
 1736              	.LVL224:
 1737 0270 8046     		mov	r8, r0
 1738              	.LVL225:
ARM GAS  /tmp/ccMjT2X9.s 			page 69


 1739 0272 0028     		cmp	r0, #0
 1740 0274 7DD0     		beq	.L140
 614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 1741              		.loc 1 614 0
 1742 0276 4389     		ldrh	r3, [r0, #10]
 1743 0278 9D42     		cmp	r5, r3
 1744 027a 07D8     		bhi	.L196
 1745              	.LVL226:
 1746              	.L146:
 616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 1747              		.loc 1 616 0
 1748 027c 2A46     		mov	r2, r5
 1749 027e 089B     		ldr	r3, [sp, #32]
 1750 0280 1919     		adds	r1, r3, r4
 1751 0282 D8F80400 		ldr	r0, [r8, #4]
 1752 0286 FFF7FEFF 		bl	memcpy
 1753              	.LVL227:
 1754 028a 1EE0     		b	.L147
 1755              	.LVL228:
 1756              	.L196:
 614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 1757              		.loc 1 614 0 discriminator 1
 1758 028c 2A4B     		ldr	r3, .L207
 1759 028e 40F26722 		movw	r2, #615
 1760 0292 3249     		ldr	r1, .L207+36
 1761 0294 2A48     		ldr	r0, .L207+8
 1762              	.LVL229:
 1763 0296 FFF7FEFF 		bl	printf
 1764              	.LVL230:
 1765 029a EFE7     		b	.L146
 1766              	.LVL231:
 1767              	.L148:
 1768              	.LBB18:
 627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 1769              		.loc 1 627 0
 1770 029c 0122     		movs	r2, #1
 1771 029e 2946     		mov	r1, r5
 1772 02a0 3620     		movs	r0, #54
 1773 02a2 FFF7FEFF 		bl	pbuf_alloc
 1774              	.LVL232:
 1775 02a6 0790     		str	r0, [sp, #28]
 1776 02a8 0028     		cmp	r0, #0
 1777 02aa 62D0     		beq	.L140
 640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1778              		.loc 1 640 0
 1779 02ac 089B     		ldr	r3, [sp, #32]
 1780 02ae 2344     		add	r3, r3, r4
 1781 02b0 4360     		str	r3, [r0, #4]
 643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If allocation fails, we have to deallocate the data pbuf as
 1782              		.loc 1 643 0
 1783 02b2 4FF42072 		mov	r2, #640
 1784 02b6 0021     		movs	r1, #0
 1785 02b8 3620     		movs	r0, #54
 1786              	.LVL233:
 1787 02ba FFF7FEFF 		bl	pbuf_alloc
 1788              	.LVL234:
 1789 02be 8046     		mov	r8, r0
ARM GAS  /tmp/ccMjT2X9.s 			page 70


 1790              	.LVL235:
 1791 02c0 0028     		cmp	r0, #0
 1792 02c2 4FD0     		beq	.L197
 651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1793              		.loc 1 651 0
 1794 02c4 0799     		ldr	r1, [sp, #28]
 1795 02c6 FFF7FEFF 		bl	pbuf_cat
 1796              	.LVL236:
 1797              	.L147:
 1798              	.LBE18:
 654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1799              		.loc 1 654 0
 1800 02ca 4046     		mov	r0, r8
 1801 02cc FFF7FEFF 		bl	pbuf_clen
 1802              	.LVL237:
 1803 02d0 0644     		add	r6, r6, r0
 1804              	.LVL238:
 1805 02d2 B6B2     		uxth	r6, r6
 1806              	.LVL239:
 659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: queue too long %"U16_F" (
 1807              		.loc 1 659 0
 1808 02d4 092E     		cmp	r6, #9
 1809 02d6 49D8     		bhi	.L198
 666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 1810              		.loc 1 666 0
 1811 02d8 D9F85C30 		ldr	r3, [r9, #92]
 1812 02dc 0022     		movs	r2, #0
 1813 02de 0092     		str	r2, [sp]
 1814 02e0 2344     		add	r3, r3, r4
 1815 02e2 4146     		mov	r1, r8
 1816 02e4 4846     		mov	r0, r9
 1817 02e6 FFF7FEFF 		bl	tcp_create_segment
 1818              	.LVL240:
 1819 02ea 8046     		mov	r8, r0
 1820              	.LVL241:
 1821 02ec 0028     		cmp	r0, #0
 1822 02ee 40D0     		beq	.L140
 679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       queue = seg;
 1823              		.loc 1 679 0
 1824 02f0 002F     		cmp	r7, #0
 1825 02f2 6BD0     		beq	.L178
 683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 1826              		.loc 1 683 0
 1827 02f4 BBF1000F 		cmp	fp, #0
 1828 02f8 60D0     		beq	.L199
 1829              	.LVL242:
 1830              	.L152:
 684:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1831              		.loc 1 684 0
 1832 02fa CBF80080 		str	r8, [fp]
 1833              	.LVL243:
 1834              	.L151:
 693:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1835              		.loc 1 693 0
 1836 02fe 2C44     		add	r4, r4, r5
 1837              	.LVL244:
 1838 0300 A4B2     		uxth	r4, r4
ARM GAS  /tmp/ccMjT2X9.s 			page 71


 1839              	.LVL245:
 687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1840              		.loc 1 687 0
 1841 0302 C346     		mov	fp, r8
 1842              	.LVL246:
 1843              	.L144:
 1844              	.LBE21:
 597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 1845              		.loc 1 597 0
 1846 0304 5445     		cmp	r4, r10
 1847 0306 63D2     		bcs	.L200
 1848              	.LBB22:
 599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t max_len = mss_local - optlen;
 1849              		.loc 1 599 0
 1850 0308 AAEB0405 		sub	r5, r10, r4
 1851 030c ADB2     		uxth	r5, r5
 1852              	.LVL247:
 601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1853              		.loc 1 601 0
 1854 030e 059B     		ldr	r3, [sp, #20]
 1855 0310 9D42     		cmp	r5, r3
 1856 0312 28BF     		it	cs
 1857 0314 1D46     		movcs	r5, r3
 1858              	.LVL248:
 607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* If copy is set, memory should be allocated and data copied
 1859              		.loc 1 607 0
 1860 0316 069B     		ldr	r3, [sp, #24]
 1861 0318 13F0010F 		tst	r3, #1
 1862 031c 99D1     		bne	.L201
 1863              	.LBB19:
 625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 1864              		.loc 1 625 0
 1865 031e BDF83E30 		ldrh	r3, [sp, #62]
 1866 0322 002B     		cmp	r3, #0
 1867 0324 BAD0     		beq	.L148
 625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 1868              		.loc 1 625 0 is_stmt 0 discriminator 1
 1869 0326 044B     		ldr	r3, .L207
 1870 0328 40F27122 		movw	r2, #625
 1871 032c 0C49     		ldr	r1, .L207+40
 1872 032e 0448     		ldr	r0, .L207+8
 1873 0330 FFF7FEFF 		bl	printf
 1874              	.LVL249:
 1875 0334 B2E7     		b	.L148
 1876              	.L208:
 1877 0336 00BF     		.align	2
 1878              	.L207:
 1879 0338 00000000 		.word	.LC0
 1880 033c 00000000 		.word	.LC20
 1881 0340 50000000 		.word	.LC2
 1882 0344 18000000 		.word	.LC21
 1883 0348 4C000000 		.word	.LC22
 1884 034c 64000000 		.word	.LC23
 1885 0350 84000000 		.word	.LC24
 1886 0354 A4000000 		.word	.LC25
 1887 0358 D0000000 		.word	.LC26
 1888 035c 00010000 		.word	.LC27
ARM GAS  /tmp/ccMjT2X9.s 			page 72


 1889 0360 40010000 		.word	.LC28
 1890              	.LVL250:
 1891              	.L197:
 646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 1892              		.loc 1 646 0 is_stmt 1
 1893 0364 0798     		ldr	r0, [sp, #28]
 1894              	.LVL251:
 1895 0366 FFF7FEFF 		bl	pbuf_free
 1896              	.LVL252:
 648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 1897              		.loc 1 648 0
 1898 036a 02E0     		b	.L140
 1899              	.LVL253:
 1900              	.L198:
 1901              	.LBE19:
 662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 1902              		.loc 1 662 0
 1903 036c 4046     		mov	r0, r8
 1904 036e FFF7FEFF 		bl	pbuf_free
 1905              	.LVL254:
 1906              	.L140:
 1907              	.LBE22:
 797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 1908              		.loc 1 797 0
 1909 0372 B9F81A30 		ldrh	r3, [r9, #26]
 1910 0376 43F08003 		orr	r3, r3, #128
 1911 037a A9F81A30 		strh	r3, [r9, #26]	@ movhi
 800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(concat_p);
 1912              		.loc 1 800 0
 1913 037e 0B9B     		ldr	r3, [sp, #44]
 1914 0380 13B1     		cbz	r3, .L168
 801:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1915              		.loc 1 801 0
 1916 0382 1846     		mov	r0, r3
 1917 0384 FFF7FEFF 		bl	pbuf_free
 1918              	.LVL255:
 1919              	.L168:
 803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_segs_free(queue);
 1920              		.loc 1 803 0
 1921 0388 17B1     		cbz	r7, .L169
 804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1922              		.loc 1 804 0
 1923 038a 3846     		mov	r0, r7
 1924 038c FFF7FEFF 		bl	tcp_segs_free
 1925              	.LVL256:
 1926              	.L169:
 806:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length", pcb->unacked != NULL ||
 1927              		.loc 1 806 0
 1928 0390 B9F86630 		ldrh	r3, [r9, #102]
 1929 0394 002B     		cmp	r3, #0
 1930 0396 00F0C680 		beq	.L179
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent != NULL);
 1931              		.loc 1 807 0
 1932 039a D9F87030 		ldr	r3, [r9, #112]
 1933 039e 002B     		cmp	r3, #0
 1934 03a0 40F0C580 		bne	.L180
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent != NULL);
ARM GAS  /tmp/ccMjT2X9.s 			page 73


 1935              		.loc 1 807 0 is_stmt 0 discriminator 1
 1936 03a4 D9F86C30 		ldr	r3, [r9, #108]
 1937 03a8 002B     		cmp	r3, #0
 1938 03aa 00F0B180 		beq	.L202
 811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1939              		.loc 1 811 0 is_stmt 1
 1940 03ae 4FF0FF33 		mov	r3, #-1
 1941 03b2 0A93     		str	r3, [sp, #40]
 1942              	.LVL257:
 1943              	.L126:
 812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1944              		.loc 1 812 0
 1945 03b4 0A98     		ldr	r0, [sp, #40]
 1946 03b6 11B0     		add	sp, sp, #68
 1947              	.LCFI21:
 1948              		.cfi_remember_state
 1949              		.cfi_def_cfa_offset 36
 1950              		@ sp needed
 1951 03b8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1952              	.LVL258:
 1953              	.L199:
 1954              	.LCFI22:
 1955              		.cfi_restore_state
 1956              	.LBB23:
 683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 1957              		.loc 1 683 0 discriminator 1
 1958 03bc 5E4B     		ldr	r3, .L209
 1959 03be 40F2AB22 		movw	r2, #683
 1960 03c2 5E49     		ldr	r1, .L209+4
 1961 03c4 5E48     		ldr	r0, .L209+8
 1962              	.LVL259:
 1963 03c6 FFF7FEFF 		bl	printf
 1964              	.LVL260:
 1965 03ca 96E7     		b	.L152
 1966              	.LVL261:
 1967              	.L178:
 680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 1968              		.loc 1 680 0
 1969 03cc 0746     		mov	r7, r0
 1970              	.LVL262:
 1971 03ce 96E7     		b	.L151
 1972              	.LVL263:
 1973              	.L200:
 1974 03d0 DDF834B0 		ldr	fp, [sp, #52]
 1975              	.LVL264:
 1976              	.LBE23:
 711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 1977              		.loc 1 711 0
 1978 03d4 099B     		ldr	r3, [sp, #36]
 1979 03d6 E3B1     		cbz	r3, .L154
 1980              	.LBB24:
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1981              		.loc 1 714 0
 1982 03d8 DBF80440 		ldr	r4, [fp, #4]
 1983              	.LVL265:
 1984 03dc 1D46     		mov	r5, r3
 1985 03de 00E0     		b	.L155
ARM GAS  /tmp/ccMjT2X9.s 			page 74


 1986              	.L156:
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1987              		.loc 1 714 0 is_stmt 0 discriminator 2
 1988 03e0 2468     		ldr	r4, [r4]
 1989              	.LVL266:
 1990              	.L155:
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1991              		.loc 1 714 0 discriminator 1
 1992 03e2 84B1     		cbz	r4, .L203
 715:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (p->next == NULL) {
 1993              		.loc 1 715 0 is_stmt 1
 1994 03e4 2389     		ldrh	r3, [r4, #8]
 1995 03e6 2B44     		add	r3, r3, r5
 1996 03e8 2381     		strh	r3, [r4, #8]	@ movhi
 716:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY((char *)p->payload + p->len, arg, oversize_used, last_unsent);
 1997              		.loc 1 716 0
 1998 03ea 2368     		ldr	r3, [r4]
 1999 03ec 002B     		cmp	r3, #0
 2000 03ee F7D1     		bne	.L156
 717:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         p->len += oversize_used;
 2001              		.loc 1 717 0
 2002 03f0 6068     		ldr	r0, [r4, #4]
 2003 03f2 6389     		ldrh	r3, [r4, #10]
 2004 03f4 2A46     		mov	r2, r5
 2005 03f6 0899     		ldr	r1, [sp, #32]
 2006 03f8 1844     		add	r0, r0, r3
 2007 03fa FFF7FEFF 		bl	memcpy
 2008              	.LVL267:
 718:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 2009              		.loc 1 718 0
 2010 03fe 6389     		ldrh	r3, [r4, #10]
 2011 0400 2B44     		add	r3, r3, r5
 2012 0402 6381     		strh	r3, [r4, #10]	@ movhi
 2013 0404 ECE7     		b	.L156
 2014              	.L203:
 721:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 2015              		.loc 1 721 0
 2016 0406 BBF80830 		ldrh	r3, [fp, #8]
 2017 040a 099A     		ldr	r2, [sp, #36]
 2018 040c 1A44     		add	r2, r2, r3
 2019 040e ABF80820 		strh	r2, [fp, #8]	@ movhi
 2020              	.LVL268:
 2021              	.L154:
 2022              	.LBE24:
 728:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 2023              		.loc 1 728 0
 2024 0412 BDF83E30 		ldrh	r3, [sp, #62]
 2025 0416 A9F86830 		strh	r3, [r9, #104]	@ movhi
 735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: cannot concatenate when pcb->unsent is empty",
 2026              		.loc 1 735 0
 2027 041a 0B9B     		ldr	r3, [sp, #44]
 2028 041c 002B     		cmp	r3, #0
 2029 041e 3FD0     		beq	.L158
 736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (last_unsent != NULL));
 2030              		.loc 1 736 0
 2031 0420 BBF1000F 		cmp	fp, #0
 2032 0424 34D0     		beq	.L204
ARM GAS  /tmp/ccMjT2X9.s 			page 75


 2033              	.L159:
 738:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += concat_p->tot_len;
 2034              		.loc 1 738 0
 2035 0426 0B9C     		ldr	r4, [sp, #44]
 2036 0428 2146     		mov	r1, r4
 2037 042a DBF80400 		ldr	r0, [fp, #4]
 2038 042e FFF7FEFF 		bl	pbuf_cat
 2039              	.LVL269:
 739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (extendlen > 0) {
 2040              		.loc 1 739 0
 2041 0432 2389     		ldrh	r3, [r4, #8]
 2042 0434 BBF80820 		ldrh	r2, [fp, #8]
 2043 0438 1344     		add	r3, r3, r2
 2044 043a ABF80830 		strh	r3, [fp, #8]	@ movhi
 2045              	.L160:
 770:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = queue;
 2046              		.loc 1 770 0
 2047 043e BBF1000F 		cmp	fp, #0
 2048 0442 56D0     		beq	.L205
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2049              		.loc 1 773 0
 2050 0444 CBF80070 		str	r7, [fp]
 2051              	.L166:
 779:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_buf -= len;
 2052              		.loc 1 779 0
 2053 0448 D9F85C30 		ldr	r3, [r9, #92]
 2054 044c 5344     		add	r3, r3, r10
 2055 044e C9F85C30 		str	r3, [r9, #92]
 780:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen = queuelen;
 2056              		.loc 1 780 0
 2057 0452 B9F86430 		ldrh	r3, [r9, #100]
 2058 0456 A3EB0A0A 		sub	r10, r3, r10
 2059 045a A9F864A0 		strh	r10, [r9, #100]	@ movhi
 781:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2060              		.loc 1 781 0
 2061 045e A9F86660 		strh	r6, [r9, #102]	@ movhi
 785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length",
 2062              		.loc 1 785 0
 2063 0462 1EB1     		cbz	r6, .L167
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 2064              		.loc 1 786 0
 2065 0464 D9F87030 		ldr	r3, [r9, #112]
 2066 0468 002B     		cmp	r3, #0
 2067 046a 45D0     		beq	.L206
 2068              	.L167:
 791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 2069              		.loc 1 791 0
 2070 046c B8F1000F 		cmp	r8, #0
 2071 0470 A0D0     		beq	.L126
 791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 2072              		.loc 1 791 0 is_stmt 0 discriminator 1
 2073 0472 D8F80C40 		ldr	r4, [r8, #12]
 2074 0476 002C     		cmp	r4, #0
 2075 0478 9CD0     		beq	.L126
 791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 2076              		.loc 1 791 0 discriminator 2
 2077 047a 069B     		ldr	r3, [sp, #24]
ARM GAS  /tmp/ccMjT2X9.s 			page 76


 2078 047c 13F0020F 		tst	r3, #2
 2079 0480 98D1     		bne	.L126
 792:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2080              		.loc 1 792 0 is_stmt 1
 2081 0482 A589     		ldrh	r5, [r4, #12]	@ unaligned
 2082 0484 0820     		movs	r0, #8
 2083 0486 FFF7FEFF 		bl	lwip_htons
 2084              	.LVL270:
 2085 048a 2843     		orrs	r0, r0, r5
 2086 048c A081     		strh	r0, [r4, #12]	@ unaligned
 2087 048e 91E7     		b	.L126
 2088              	.L204:
 736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (last_unsent != NULL));
 2089              		.loc 1 736 0 discriminator 1
 2090 0490 294B     		ldr	r3, .L209
 2091 0492 40F2E122 		movw	r2, #737
 2092 0496 2B49     		ldr	r1, .L209+12
 2093 0498 2948     		ldr	r0, .L209+8
 2094 049a FFF7FEFF 		bl	printf
 2095              	.LVL271:
 2096 049e C2E7     		b	.L159
 2097              	.L158:
 740:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 2098              		.loc 1 740 0
 2099 04a0 0C9B     		ldr	r3, [sp, #48]
 2100 04a2 002B     		cmp	r3, #0
 2101 04a4 CBD0     		beq	.L160
 2102              	.LBB25:
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent != NULL && last_unsent->p != NULL);
 2103              		.loc 1 742 0
 2104 04a6 BBF1000F 		cmp	fp, #0
 2105 04aa 06D0     		beq	.L161
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent != NULL && last_unsent->p != NULL);
 2106              		.loc 1 742 0 is_stmt 0 discriminator 2
 2107 04ac DBF80430 		ldr	r3, [fp, #4]
 2108 04b0 1BB1     		cbz	r3, .L161
 2109              	.L162:
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 2110              		.loc 1 744 0 is_stmt 1
 2111 04b2 DBF80430 		ldr	r3, [fp, #4]
 2112              	.LVL272:
 2113 04b6 0C98     		ldr	r0, [sp, #48]
 2114 04b8 0BE0     		b	.L163
 2115              	.LVL273:
 2116              	.L161:
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent != NULL && last_unsent->p != NULL);
 2117              		.loc 1 742 0 discriminator 3
 2118 04ba 1F4B     		ldr	r3, .L209
 2119 04bc 40F2E722 		movw	r2, #743
 2120 04c0 2149     		ldr	r1, .L209+16
 2121 04c2 1F48     		ldr	r0, .L209+8
 2122 04c4 FFF7FEFF 		bl	printf
 2123              	.LVL274:
 2124 04c8 F3E7     		b	.L162
 2125              	.LVL275:
 2126              	.L164:
 745:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
ARM GAS  /tmp/ccMjT2X9.s 			page 77


 2127              		.loc 1 745 0 discriminator 3
 2128 04ca 1A89     		ldrh	r2, [r3, #8]
 2129 04cc 0244     		add	r2, r2, r0
 2130 04ce 1A81     		strh	r2, [r3, #8]	@ movhi
 2131              	.LVL276:
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 2132              		.loc 1 744 0 discriminator 3
 2133 04d0 0B46     		mov	r3, r1
 2134              	.LVL277:
 2135              	.L163:
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 2136              		.loc 1 744 0 is_stmt 0 discriminator 1
 2137 04d2 1968     		ldr	r1, [r3]
 2138 04d4 0029     		cmp	r1, #0
 2139 04d6 F8D1     		bne	.L164
 747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->len += extendlen;
 2140              		.loc 1 747 0 is_stmt 1
 2141 04d8 1A89     		ldrh	r2, [r3, #8]
 2142 04da 0C98     		ldr	r0, [sp, #48]
 2143 04dc 0244     		add	r2, r2, r0
 2144 04de 1A81     		strh	r2, [r3, #8]	@ movhi
 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += extendlen;
 2145              		.loc 1 748 0
 2146 04e0 5A89     		ldrh	r2, [r3, #10]
 2147 04e2 0244     		add	r2, r2, r0
 2148 04e4 5A81     		strh	r2, [r3, #10]	@ movhi
 749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2149              		.loc 1 749 0
 2150 04e6 BBF80830 		ldrh	r3, [fp, #8]
 2151              	.LVL278:
 2152 04ea 0344     		add	r3, r3, r0
 2153 04ec ABF80830 		strh	r3, [fp, #8]	@ movhi
 2154 04f0 A5E7     		b	.L160
 2155              	.L205:
 2156              	.LBE25:
 771:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 2157              		.loc 1 771 0
 2158 04f2 C9F86C70 		str	r7, [r9, #108]
 2159 04f6 A7E7     		b	.L166
 2160              	.L206:
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 2161              		.loc 1 786 0 discriminator 1
 2162 04f8 D9F86C30 		ldr	r3, [r9, #108]
 2163 04fc 002B     		cmp	r3, #0
 2164 04fe B5D1     		bne	.L167
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 2165              		.loc 1 786 0 is_stmt 0 discriminator 2
 2166 0500 0D4B     		ldr	r3, .L209
 2167 0502 40F21332 		movw	r2, #787
 2168 0506 1149     		ldr	r1, .L209+20
 2169 0508 0D48     		ldr	r0, .L209+8
 2170 050a FFF7FEFF 		bl	printf
 2171              	.LVL279:
 2172 050e ADE7     		b	.L167
 2173              	.LVL280:
 2174              	.L202:
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent != NULL);
ARM GAS  /tmp/ccMjT2X9.s 			page 78


 2175              		.loc 1 807 0 is_stmt 1 discriminator 2
 2176 0510 094B     		ldr	r3, .L209
 2177 0512 4FF44A72 		mov	r2, #808
 2178 0516 0D49     		ldr	r1, .L209+20
 2179 0518 0948     		ldr	r0, .L209+8
 2180 051a FFF7FEFF 		bl	printf
 2181              	.LVL281:
 811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2182              		.loc 1 811 0 discriminator 2
 2183 051e 4FF0FF33 		mov	r3, #-1
 2184 0522 0A93     		str	r3, [sp, #40]
 2185 0524 46E7     		b	.L126
 2186              	.L179:
 811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2187              		.loc 1 811 0 is_stmt 0
 2188 0526 4FF0FF33 		mov	r3, #-1
 2189 052a 0A93     		str	r3, [sp, #40]
 2190 052c 42E7     		b	.L126
 2191              	.L180:
 2192 052e 4FF0FF33 		mov	r3, #-1
 2193 0532 0A93     		str	r3, [sp, #40]
 2194 0534 3EE7     		b	.L126
 2195              	.L210:
 2196 0536 00BF     		.align	2
 2197              	.L209:
 2198 0538 00000000 		.word	.LC0
 2199 053c 50010000 		.word	.LC29
 2200 0540 50000000 		.word	.LC2
 2201 0544 64010000 		.word	.LC30
 2202 0548 9C010000 		.word	.LC31
 2203 054c D4010000 		.word	.LC32
 2204              		.cfi_endproc
 2205              	.LFE162:
 2207              		.section	.text.tcp_split_unsent_seg,"ax",%progbits
 2208              		.align	1
 2209              		.global	tcp_split_unsent_seg
 2210              		.syntax unified
 2211              		.thumb
 2212              		.thumb_func
 2213              		.fpu fpv5-d16
 2215              	tcp_split_unsent_seg:
 2216              	.LFB163:
 828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg = NULL, *useg = NULL;
 2217              		.loc 1 828 0 is_stmt 1
 2218              		.cfi_startproc
 2219              		@ args = 0, pretend = 0, frame = 0
 2220              		@ frame_needed = 0, uses_anonymous_args = 0
 2221              	.LVL282:
 2222 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2223              	.LCFI23:
 2224              		.cfi_def_cfa_offset 36
 2225              		.cfi_offset 4, -36
 2226              		.cfi_offset 5, -32
 2227              		.cfi_offset 6, -28
 2228              		.cfi_offset 7, -24
 2229              		.cfi_offset 8, -20
 2230              		.cfi_offset 9, -16
ARM GAS  /tmp/ccMjT2X9.s 			page 79


 2231              		.cfi_offset 10, -12
 2232              		.cfi_offset 11, -8
 2233              		.cfi_offset 14, -4
 2234 0004 83B0     		sub	sp, sp, #12
 2235              	.LCFI24:
 2236              		.cfi_def_cfa_offset 48
 2237 0006 0D46     		mov	r5, r1
 2238              	.LVL283:
 843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2239              		.loc 1 843 0
 2240 0008 0746     		mov	r7, r0
 2241 000a 0028     		cmp	r0, #0
 2242 000c 49D0     		beq	.L231
 2243              	.LVL284:
 2244              	.L212:
 845:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg == NULL) {
 2245              		.loc 1 845 0
 2246 000e FC6E     		ldr	r4, [r7, #108]
 2247              	.LVL285:
 846:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 2248              		.loc 1 846 0
 2249 0010 002C     		cmp	r4, #0
 2250 0012 00F0CA80 		beq	.L222
 850:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("Can't split segment into length 0", 0);
 2251              		.loc 1 850 0
 2252 0016 002D     		cmp	r5, #0
 2253 0018 4BD0     		beq	.L232
 855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 2254              		.loc 1 855 0
 2255 001a 2389     		ldrh	r3, [r4, #8]
 2256 001c 9D42     		cmp	r5, r3
 2257 001e 80F0C780 		bcs	.L223
 859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("useg->len > 0", useg->len > 0);
 2258              		.loc 1 859 0
 2259 0022 7B8E     		ldrh	r3, [r7, #50]
 2260 0024 9D42     		cmp	r5, r3
 2261 0026 4ED8     		bhi	.L233
 2262              	.L215:
 860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2263              		.loc 1 860 0
 2264 0028 2389     		ldrh	r3, [r4, #8]
 2265 002a 002B     		cmp	r3, #0
 2266 002c 53D0     		beq	.L234
 2267              	.L216:
 868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 2268              		.loc 1 868 0
 2269 002e 94F80AA0 		ldrb	r10, [r4, #10]	@ zero_extendqisi2
 2270              	.LVL286:
 873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder = useg->len - split;
 2271              		.loc 1 873 0
 2272 0032 1AF0010F 		tst	r10, #1
 2273 0036 56D0     		beq	.L224
 2274 0038 4FF00409 		mov	r9, #4
 2275              	.L217:
 2276              	.LVL287:
 874:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2277              		.loc 1 874 0 discriminator 4
ARM GAS  /tmp/ccMjT2X9.s 			page 80


 2278 003c 2689     		ldrh	r6, [r4, #8]
 2279 003e 761B     		subs	r6, r6, r5
 2280 0040 B6B2     		uxth	r6, r6
 2281              	.LVL288:
 877:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 2282              		.loc 1 877 0 discriminator 4
 2283 0042 06EB0901 		add	r1, r6, r9
 2284 0046 4FF42072 		mov	r2, #640
 2285 004a 89B2     		uxth	r1, r1
 2286 004c 3620     		movs	r0, #54
 2287 004e FFF7FEFF 		bl	pbuf_alloc
 2288              	.LVL289:
 878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 2289              		.loc 1 878 0 discriminator 4
 2290 0052 8046     		mov	r8, r0
 2291 0054 0028     		cmp	r0, #0
 2292 0056 00F0A680 		beq	.L225
 885:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Copy remainder into new pbuf, headers and options will not be filled out */
 2293              		.loc 1 885 0
 2294 005a 6068     		ldr	r0, [r4, #4]
 2295              	.LVL290:
 2296 005c 0389     		ldrh	r3, [r0, #8]
 2297 005e 2289     		ldrh	r2, [r4, #8]
 2298 0060 9B1A     		subs	r3, r3, r2
 2299 0062 15FA83F3 		uxtah	r3, r5, r3
 2300              	.LVL291:
 887:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 2301              		.loc 1 887 0
 2302 0066 D8F80410 		ldr	r1, [r8, #4]
 2303 006a 9BB2     		uxth	r3, r3
 2304 006c 3246     		mov	r2, r6
 2305 006e 4944     		add	r1, r1, r9
 2306 0070 FFF7FEFF 		bl	pbuf_copy_partial
 2307              	.LVL292:
 2308 0074 8642     		cmp	r6, r0
 2309 0076 39D0     		beq	.L235
 829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p = NULL;
 2310              		.loc 1 829 0
 2311 0078 0025     		movs	r5, #0
 2312              	.LVL293:
 2313              	.L218:
 984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 2314              		.loc 1 984 0
 2315 007a 35B1     		cbz	r5, .L221
 984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 2316              		.loc 1 984 0 is_stmt 0 discriminator 1
 2317 007c 4F4B     		ldr	r3, .L237
 2318 007e 4FF47672 		mov	r2, #984
 2319 0082 4F49     		ldr	r1, .L237+4
 2320 0084 4F48     		ldr	r0, .L237+8
 2321 0086 FFF7FEFF 		bl	printf
 2322              	.LVL294:
 2323              	.L221:
 985:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(p);
 2324              		.loc 1 985 0 is_stmt 1
 2325 008a B8F1000F 		cmp	r8, #0
 2326 008e 00F09180 		beq	.L229
ARM GAS  /tmp/ccMjT2X9.s 			page 81


 986:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2327              		.loc 1 986 0
 2328 0092 4046     		mov	r0, r8
 2329 0094 FFF7FEFF 		bl	pbuf_free
 2330              	.LVL295:
 989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2331              		.loc 1 989 0
 2332 0098 4FF0FF30 		mov	r0, #-1
 2333              	.LVL296:
 2334              	.L213:
 990:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2335              		.loc 1 990 0
 2336 009c 03B0     		add	sp, sp, #12
 2337              	.LCFI25:
 2338              		.cfi_remember_state
 2339              		.cfi_def_cfa_offset 36
 2340              		@ sp needed
 2341 009e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2342              	.LVL297:
 2343              	.L231:
 2344              	.LCFI26:
 2345              		.cfi_restore_state
 843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2346              		.loc 1 843 0 discriminator 1
 2347 00a2 464B     		ldr	r3, .L237
 2348 00a4 40F24B32 		movw	r2, #843
 2349 00a8 4749     		ldr	r1, .L237+12
 2350              	.LVL298:
 2351 00aa 4648     		ldr	r0, .L237+8
 2352              	.LVL299:
 2353 00ac FFF7FEFF 		bl	printf
 2354              	.LVL300:
 2355 00b0 ADE7     		b	.L212
 2356              	.LVL301:
 2357              	.L232:
 851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 2358              		.loc 1 851 0 discriminator 1
 2359 00b2 424B     		ldr	r3, .L237
 2360 00b4 40F25332 		movw	r2, #851
 2361 00b8 4449     		ldr	r1, .L237+16
 2362 00ba 4248     		ldr	r0, .L237+8
 2363 00bc FFF7FEFF 		bl	printf
 2364              	.LVL302:
 852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2365              		.loc 1 852 0 discriminator 1
 2366 00c0 6FF00500 		mvn	r0, #5
 2367 00c4 EAE7     		b	.L213
 2368              	.L233:
 859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("useg->len > 0", useg->len > 0);
 2369              		.loc 1 859 0 discriminator 1
 2370 00c6 3D4B     		ldr	r3, .L237
 2371 00c8 40F25B32 		movw	r2, #859
 2372 00cc 4049     		ldr	r1, .L237+20
 2373 00ce 3D48     		ldr	r0, .L237+8
 2374 00d0 FFF7FEFF 		bl	printf
 2375              	.LVL303:
 2376 00d4 A8E7     		b	.L215
ARM GAS  /tmp/ccMjT2X9.s 			page 82


 2377              	.L234:
 860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2378              		.loc 1 860 0 discriminator 1
 2379 00d6 394B     		ldr	r3, .L237
 2380 00d8 4FF45772 		mov	r2, #860
 2381 00dc 3D49     		ldr	r1, .L237+24
 2382 00de 3948     		ldr	r0, .L237+8
 2383 00e0 FFF7FEFF 		bl	printf
 2384              	.LVL304:
 2385 00e4 A3E7     		b	.L216
 2386              	.LVL305:
 2387              	.L224:
 873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder = useg->len - split;
 2388              		.loc 1 873 0
 2389 00e6 4FF00009 		mov	r9, #0
 2390 00ea A7E7     		b	.L217
 2391              	.LVL306:
 2392              	.L235:
 901:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder_flags = 0; /* ACK added in tcp_output() */
 2393              		.loc 1 901 0
 2394 00ec E368     		ldr	r3, [r4, #12]
 2395 00ee 9889     		ldrh	r0, [r3, #12]	@ unaligned
 2396 00f0 FFF7FEFF 		bl	lwip_htons
 2397              	.LVL307:
 2398 00f4 C0B2     		uxtb	r0, r0
 2399 00f6 00F03F09 		and	r9, r0, #63
 2400              	.LVL308:
 904:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     split_flags &= ~TCP_PSH;
 2401              		.loc 1 904 0
 2402 00fa 10F0080F 		tst	r0, #8
 2403 00fe 4BD0     		beq	.L227
 905:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remainder_flags |= TCP_PSH;
 2404              		.loc 1 905 0
 2405 0100 00F03709 		and	r9, r0, #55
 2406              	.LVL309:
 906:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2407              		.loc 1 906 0
 2408 0104 4FF0080B 		mov	fp, #8
 2409              	.LVL310:
 2410              	.L219:
 908:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     split_flags &= ~TCP_FIN;
 2411              		.loc 1 908 0
 2412 0108 19F0010F 		tst	r9, #1
 2413 010c 03D0     		beq	.L220
 909:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remainder_flags |= TCP_FIN;
 2414              		.loc 1 909 0
 2415 010e 09F0FE09 		and	r9, r9, #254
 2416              	.LVL311:
 910:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2417              		.loc 1 910 0
 2418 0112 4BF0010B 		orr	fp, fp, #1
 2419              	.LVL312:
 2420              	.L220:
 914:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 2421              		.loc 1 914 0
 2422 0116 E368     		ldr	r3, [r4, #12]
 2423 0118 5868     		ldr	r0, [r3, #4]	@ unaligned
ARM GAS  /tmp/ccMjT2X9.s 			page 83


 2424 011a FFF7FEFF 		bl	lwip_htonl
 2425              	.LVL313:
 2426 011e CDF800A0 		str	r10, [sp]
 2427 0122 2B18     		adds	r3, r5, r0
 2428 0124 5A46     		mov	r2, fp
 2429 0126 4146     		mov	r1, r8
 2430 0128 3846     		mov	r0, r7
 2431 012a FFF7FEFF 		bl	tcp_create_segment
 2432              	.LVL314:
 915:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 2433              		.loc 1 915 0
 2434 012e 0546     		mov	r5, r0
 2435 0130 0028     		cmp	r0, #0
 2436 0132 A2D0     		beq	.L218
 928:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2437              		.loc 1 928 0
 2438 0134 6068     		ldr	r0, [r4, #4]
 2439              	.LVL315:
 2440 0136 FFF7FEFF 		bl	pbuf_clen
 2441              	.LVL316:
 2442 013a B7F86630 		ldrh	r3, [r7, #102]
 2443 013e 181A     		subs	r0, r3, r0
 2444 0140 A7F86600 		strh	r0, [r7, #102]	@ movhi
 932:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->len -= remainder;
 2445              		.loc 1 932 0
 2446 0144 6068     		ldr	r0, [r4, #4]
 2447 0146 0189     		ldrh	r1, [r0, #8]
 2448 0148 891B     		subs	r1, r1, r6
 2449 014a 89B2     		uxth	r1, r1
 2450 014c FFF7FEFF 		bl	pbuf_realloc
 2451              	.LVL317:
 933:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_SET_FLAG(useg->tcphdr, split_flags);
 2452              		.loc 1 933 0
 2453 0150 2389     		ldrh	r3, [r4, #8]
 2454 0152 9E1B     		subs	r6, r3, r6
 2455              	.LVL318:
 2456 0154 2681     		strh	r6, [r4, #8]	@ movhi
 934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 2457              		.loc 1 934 0
 2458 0156 D4F80C80 		ldr	r8, [r4, #12]
 2459              	.LVL319:
 2460 015a B8F80C60 		ldrh	r6, [r8, #12]	@ unaligned
 2461 015e 4846     		mov	r0, r9
 2462 0160 FFF7FEFF 		bl	lwip_htons
 2463              	.LVL320:
 2464 0164 3043     		orrs	r0, r0, r6
 2465 0166 A8F80C00 		strh	r0, [r8, #12]	@ unaligned
 941:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2466              		.loc 1 941 0
 2467 016a 6068     		ldr	r0, [r4, #4]
 2468 016c FFF7FEFF 		bl	pbuf_clen
 2469              	.LVL321:
 2470 0170 B7F86630 		ldrh	r3, [r7, #102]
 2471 0174 1844     		add	r0, r0, r3
 2472 0176 A7F86600 		strh	r0, [r7, #102]	@ movhi
 966:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2473              		.loc 1 966 0
ARM GAS  /tmp/ccMjT2X9.s 			page 84


 2474 017a 6868     		ldr	r0, [r5, #4]
 2475 017c FFF7FEFF 		bl	pbuf_clen
 2476              	.LVL322:
 2477 0180 B7F86630 		ldrh	r3, [r7, #102]
 2478 0184 1844     		add	r0, r0, r3
 2479 0186 A7F86600 		strh	r0, [r7, #102]	@ movhi
 969:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->next = seg;
 2480              		.loc 1 969 0
 2481 018a 2368     		ldr	r3, [r4]
 2482 018c 2B60     		str	r3, [r5]
 970:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2483              		.loc 1 970 0
 2484 018e 2560     		str	r5, [r4]
 975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
 2485              		.loc 1 975 0
 2486 0190 2B68     		ldr	r3, [r5]
 2487 0192 23B1     		cbz	r3, .L236
 980:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** memerr:
 2488              		.loc 1 980 0
 2489 0194 0020     		movs	r0, #0
 2490 0196 81E7     		b	.L213
 2491              	.LVL323:
 2492              	.L227:
 902:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2493              		.loc 1 902 0
 2494 0198 4FF0000B 		mov	fp, #0
 2495 019c B4E7     		b	.L219
 2496              	.LVL324:
 2497              	.L236:
 976:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2498              		.loc 1 976 0
 2499 019e 0020     		movs	r0, #0
 2500 01a0 A7F86800 		strh	r0, [r7, #104]	@ movhi
 2501 01a4 7AE7     		b	.L213
 2502              	.LVL325:
 2503              	.L225:
 829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p = NULL;
 2504              		.loc 1 829 0
 2505 01a6 0025     		movs	r5, #0
 2506 01a8 67E7     		b	.L218
 2507              	.LVL326:
 2508              	.L222:
 847:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2509              		.loc 1 847 0
 2510 01aa 4FF0FF30 		mov	r0, #-1
 2511 01ae 75E7     		b	.L213
 2512              	.L223:
 856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2513              		.loc 1 856 0
 2514 01b0 0020     		movs	r0, #0
 2515 01b2 73E7     		b	.L213
 2516              	.LVL327:
 2517              	.L229:
 989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2518              		.loc 1 989 0
 2519 01b4 4FF0FF30 		mov	r0, #-1
 2520 01b8 70E7     		b	.L213
ARM GAS  /tmp/ccMjT2X9.s 			page 85


 2521              	.L238:
 2522 01ba 00BF     		.align	2
 2523              	.L237:
 2524 01bc 00000000 		.word	.LC0
 2525 01c0 68000000 		.word	.LC37
 2526 01c4 50000000 		.word	.LC2
 2527 01c8 00000000 		.word	.LC33
 2528 01cc 24000000 		.word	.LC34
 2529 01d0 48000000 		.word	.LC35
 2530 01d4 58000000 		.word	.LC36
 2531              		.cfi_endproc
 2532              	.LFE163:
 2534              		.section	.text.tcp_enqueue_flags,"ax",%progbits
 2535              		.align	1
 2536              		.global	tcp_enqueue_flags
 2537              		.syntax unified
 2538              		.thumb
 2539              		.thumb_func
 2540              		.fpu fpv5-d16
 2542              	tcp_enqueue_flags:
 2543              	.LFB165:
1033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 2544              		.loc 1 1033 0
 2545              		.cfi_startproc
 2546              		@ args = 0, pretend = 0, frame = 0
 2547              		@ frame_needed = 0, uses_anonymous_args = 0
 2548              	.LVL328:
 2549 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2550              	.LCFI27:
 2551              		.cfi_def_cfa_offset 28
 2552              		.cfi_offset 4, -28
 2553              		.cfi_offset 5, -24
 2554              		.cfi_offset 6, -20
 2555              		.cfi_offset 7, -16
 2556              		.cfi_offset 8, -12
 2557              		.cfi_offset 9, -8
 2558              		.cfi_offset 14, -4
 2559 0004 83B0     		sub	sp, sp, #12
 2560              	.LCFI28:
 2561              		.cfi_def_cfa_offset 40
 2562 0006 0446     		mov	r4, r0
 2563 0008 0D46     		mov	r5, r1
 2564              	.LVL329:
1041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
 2565              		.loc 1 1041 0
 2566 000a 11F00307 		ands	r7, r1, #3
 2567 000e 2ED0     		beq	.L261
 2568              	.LVL330:
 2569              	.L240:
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2570              		.loc 1 1043 0
 2571 0010 002C     		cmp	r4, #0
 2572 0012 34D0     		beq	.L262
 2573              	.L241:
1049:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_MSS;
 2574              		.loc 1 1049 0
 2575 0014 15F0020F 		tst	r5, #2
ARM GAS  /tmp/ccMjT2X9.s 			page 86


 2576 0018 39D1     		bne	.L254
1036:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
 2577              		.loc 1 1036 0
 2578 001a 4FF00009 		mov	r9, #0
 2579              	.L242:
 2580              	.LVL331:
1073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2581              		.loc 1 1073 0
 2582 001e B9F1000F 		cmp	r9, #0
 2583 0022 37D0     		beq	.L255
 2584 0024 0426     		movs	r6, #4
 2585              	.L243:
 2586              	.LVL332:
1076:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 2587              		.loc 1 1076 0 discriminator 4
 2588 0026 B6B2     		uxth	r6, r6
 2589              	.LVL333:
 2590 0028 4FF42072 		mov	r2, #640
 2591 002c 3146     		mov	r1, r6
 2592 002e 3620     		movs	r0, #54
 2593 0030 FFF7FEFF 		bl	pbuf_alloc
 2594              	.LVL334:
 2595 0034 8046     		mov	r8, r0
 2596 0036 0028     		cmp	r0, #0
 2597 0038 2ED0     		beq	.L263
1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
 2598              		.loc 1 1081 0
 2599 003a 4389     		ldrh	r3, [r0, #10]
 2600 003c 9E42     		cmp	r6, r3
 2601 003e 32D8     		bhi	.L264
 2602              	.LVL335:
 2603              	.L246:
1085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 2604              		.loc 1 1085 0
 2605 0040 CDF80090 		str	r9, [sp]
 2606 0044 E36D     		ldr	r3, [r4, #92]
 2607 0046 2A46     		mov	r2, r5
 2608 0048 4146     		mov	r1, r8
 2609 004a 2046     		mov	r0, r4
 2610 004c FFF7FEFF 		bl	tcp_create_segment
 2611              	.LVL336:
 2612 0050 0646     		mov	r6, r0
 2613 0052 0028     		cmp	r0, #0
 2614 0054 2FD0     		beq	.L265
1090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
 2615              		.loc 1 1090 0
 2616 0056 C368     		ldr	r3, [r0, #12]
 2617 0058 13F0030F 		tst	r3, #3
 2618 005c 32D1     		bne	.L266
 2619              	.LVL337:
 2620              	.L248:
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2621              		.loc 1 1091 0
 2622 005e 3389     		ldrh	r3, [r6, #8]
 2623 0060 002B     		cmp	r3, #0
 2624 0062 37D1     		bne	.L267
 2625              	.L249:
ARM GAS  /tmp/ccMjT2X9.s 			page 87


1100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg;
 2626              		.loc 1 1100 0
 2627 0064 E26E     		ldr	r2, [r4, #108]
 2628 0066 002A     		cmp	r2, #0
 2629 0068 3DD1     		bne	.L250
1101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 2630              		.loc 1 1101 0
 2631 006a E666     		str	r6, [r4, #108]
 2632 006c 3FE0     		b	.L251
 2633              	.LVL338:
 2634              	.L261:
1041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
 2635              		.loc 1 1041 0 discriminator 1
 2636 006e 364B     		ldr	r3, .L270
 2637 0070 40F21242 		movw	r2, #1042
 2638 0074 3549     		ldr	r1, .L270+4
 2639              	.LVL339:
 2640 0076 3648     		ldr	r0, .L270+8
 2641              	.LVL340:
 2642 0078 FFF7FEFF 		bl	printf
 2643              	.LVL341:
 2644 007c C8E7     		b	.L240
 2645              	.L262:
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2646              		.loc 1 1043 0 discriminator 1
 2647 007e 324B     		ldr	r3, .L270
 2648 0080 40F21342 		movw	r2, #1043
 2649 0084 3349     		ldr	r1, .L270+12
 2650 0086 3248     		ldr	r0, .L270+8
 2651 0088 FFF7FEFF 		bl	printf
 2652              	.LVL342:
 2653 008c C2E7     		b	.L241
 2654              	.L254:
1050:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
 2655              		.loc 1 1050 0
 2656 008e 4FF00109 		mov	r9, #1
 2657 0092 C4E7     		b	.L242
 2658              	.LVL343:
 2659              	.L255:
1073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2660              		.loc 1 1073 0
 2661 0094 0026     		movs	r6, #0
 2662 0096 C6E7     		b	.L243
 2663              	.LVL344:
 2664              	.L263:
1077:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 2665              		.loc 1 1077 0
 2666 0098 638B     		ldrh	r3, [r4, #26]
 2667 009a 43F08003 		orr	r3, r3, #128
 2668 009e 6383     		strh	r3, [r4, #26]	@ movhi
1079:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2669              		.loc 1 1079 0
 2670 00a0 4FF0FF30 		mov	r0, #-1
 2671              	.LVL345:
 2672 00a4 3EE0     		b	.L245
 2673              	.LVL346:
 2674              	.L264:
ARM GAS  /tmp/ccMjT2X9.s 			page 88


1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
 2675              		.loc 1 1081 0 discriminator 1
 2676 00a6 284B     		ldr	r3, .L270
 2677 00a8 40F23A42 		movw	r2, #1082
 2678 00ac 2A49     		ldr	r1, .L270+16
 2679 00ae 2848     		ldr	r0, .L270+8
 2680              	.LVL347:
 2681 00b0 FFF7FEFF 		bl	printf
 2682              	.LVL348:
 2683 00b4 C4E7     		b	.L246
 2684              	.LVL349:
 2685              	.L265:
1086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 2686              		.loc 1 1086 0
 2687 00b6 638B     		ldrh	r3, [r4, #26]
 2688 00b8 43F08003 		orr	r3, r3, #128
 2689 00bc 6383     		strh	r3, [r4, #26]	@ movhi
1088:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2690              		.loc 1 1088 0
 2691 00be 4FF0FF30 		mov	r0, #-1
 2692              	.LVL350:
 2693 00c2 2FE0     		b	.L245
 2694              	.LVL351:
 2695              	.L266:
1090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
 2696              		.loc 1 1090 0 discriminator 1
 2697 00c4 204B     		ldr	r3, .L270
 2698 00c6 40F24242 		movw	r2, #1090
 2699 00ca 2449     		ldr	r1, .L270+20
 2700 00cc 2048     		ldr	r0, .L270+8
 2701              	.LVL352:
 2702 00ce FFF7FEFF 		bl	printf
 2703              	.LVL353:
 2704 00d2 C4E7     		b	.L248
 2705              	.L267:
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2706              		.loc 1 1091 0 discriminator 1
 2707 00d4 1C4B     		ldr	r3, .L270
 2708 00d6 40F24342 		movw	r2, #1091
 2709 00da 2149     		ldr	r1, .L270+24
 2710 00dc 1C48     		ldr	r0, .L270+8
 2711 00de FFF7FEFF 		bl	printf
 2712              	.LVL354:
 2713 00e2 BFE7     		b	.L249
 2714              	.LVL355:
 2715              	.L256:
 2716              	.LBB26:
1104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
 2717              		.loc 1 1104 0
 2718 00e4 1A46     		mov	r2, r3
 2719              	.LVL356:
 2720              	.L250:
1104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
 2721              		.loc 1 1104 0 is_stmt 0 discriminator 1
 2722 00e6 1368     		ldr	r3, [r2]
 2723 00e8 002B     		cmp	r3, #0
 2724 00ea FBD1     		bne	.L256
ARM GAS  /tmp/ccMjT2X9.s 			page 89


1105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2725              		.loc 1 1105 0 is_stmt 1
 2726 00ec 1660     		str	r6, [r2]
 2727              	.LVL357:
 2728              	.L251:
 2729              	.LBE26:
1109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 2730              		.loc 1 1109 0
 2731 00ee 0023     		movs	r3, #0
 2732 00f0 A4F86830 		strh	r3, [r4, #104]	@ movhi
1113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_lbb++;
 2733              		.loc 1 1113 0
 2734 00f4 17B1     		cbz	r7, .L252
1114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* optlen does not influence snd_buf */
 2735              		.loc 1 1114 0
 2736 00f6 E36D     		ldr	r3, [r4, #92]
 2737 00f8 0133     		adds	r3, r3, #1
 2738 00fa E365     		str	r3, [r4, #92]
 2739              	.L252:
1117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_FIN);
 2740              		.loc 1 1117 0
 2741 00fc 15F0010F 		tst	r5, #1
 2742 0100 03D0     		beq	.L253
1118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2743              		.loc 1 1118 0
 2744 0102 638B     		ldrh	r3, [r4, #26]
 2745 0104 43F02003 		orr	r3, r3, #32
 2746 0108 6383     		strh	r3, [r4, #26]	@ movhi
 2747              	.L253:
1122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: %"S16_F" (after enqueued)\n", pcb->snd_queuelen)
 2748              		.loc 1 1122 0
 2749 010a 7068     		ldr	r0, [r6, #4]
 2750 010c FFF7FEFF 		bl	pbuf_clen
 2751              	.LVL358:
 2752 0110 B4F86630 		ldrh	r3, [r4, #102]
 2753 0114 1844     		add	r0, r0, r3
 2754 0116 80B2     		uxth	r0, r0
 2755 0118 A4F86600 		strh	r0, [r4, #102]	@ movhi
1124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_enqueue_flags: invalid queue length",
 2756              		.loc 1 1124 0
 2757 011c 90B1     		cbz	r0, .L257
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 2758              		.loc 1 1125 0
 2759 011e 236F     		ldr	r3, [r4, #112]
 2760 0120 1BB1     		cbz	r3, .L268
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2761              		.loc 1 1129 0
 2762 0122 0020     		movs	r0, #0
 2763              	.LVL359:
 2764              	.L245:
1130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2765              		.loc 1 1130 0
 2766 0124 03B0     		add	sp, sp, #12
 2767              	.LCFI29:
 2768              		.cfi_remember_state
 2769              		.cfi_def_cfa_offset 28
 2770              		@ sp needed
ARM GAS  /tmp/ccMjT2X9.s 			page 90


 2771 0126 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2772              	.LVL360:
 2773              	.L268:
 2774              	.LCFI30:
 2775              		.cfi_restore_state
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 2776              		.loc 1 1125 0 discriminator 1
 2777 012a E36E     		ldr	r3, [r4, #108]
 2778 012c 0BB1     		cbz	r3, .L269
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2779              		.loc 1 1129 0
 2780 012e 0020     		movs	r0, #0
 2781 0130 F8E7     		b	.L245
 2782              	.L269:
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 2783              		.loc 1 1125 0 discriminator 2
 2784 0132 054B     		ldr	r3, .L270
 2785 0134 40F26642 		movw	r2, #1126
 2786 0138 0A49     		ldr	r1, .L270+28
 2787 013a 0548     		ldr	r0, .L270+8
 2788 013c FFF7FEFF 		bl	printf
 2789              	.LVL361:
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2790              		.loc 1 1129 0 discriminator 2
 2791 0140 0020     		movs	r0, #0
 2792 0142 EFE7     		b	.L245
 2793              	.L257:
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2794              		.loc 1 1129 0 is_stmt 0
 2795 0144 0020     		movs	r0, #0
 2796 0146 EDE7     		b	.L245
 2797              	.L271:
 2798              		.align	2
 2799              	.L270:
 2800 0148 00000000 		.word	.LC0
 2801 014c 00000000 		.word	.LC38
 2802 0150 50000000 		.word	.LC2
 2803 0154 58000000 		.word	.LC39
 2804 0158 78000000 		.word	.LC40
 2805 015c B4000000 		.word	.LC41
 2806 0160 CC000000 		.word	.LC42
 2807 0164 F8000000 		.word	.LC43
 2808              		.cfi_endproc
 2809              	.LFE165:
 2811              		.section	.text.tcp_send_fin,"ax",%progbits
 2812              		.align	1
 2813              		.global	tcp_send_fin
 2814              		.syntax unified
 2815              		.thumb
 2816              		.thumb_func
 2817              		.fpu fpv5-d16
 2819              	tcp_send_fin:
 2820              	.LFB164:
1002:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_send_fin: invalid pcb", pcb != NULL);
 2821              		.loc 1 1002 0 is_stmt 1
 2822              		.cfi_startproc
 2823              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccMjT2X9.s 			page 91


 2824              		@ frame_needed = 0, uses_anonymous_args = 0
 2825              	.LVL362:
 2826 0000 70B5     		push	{r4, r5, r6, lr}
 2827              	.LCFI31:
 2828              		.cfi_def_cfa_offset 16
 2829              		.cfi_offset 4, -16
 2830              		.cfi_offset 5, -12
 2831              		.cfi_offset 6, -8
 2832              		.cfi_offset 14, -4
1003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2833              		.loc 1 1003 0
 2834 0002 0546     		mov	r5, r0
 2835 0004 10B1     		cbz	r0, .L279
 2836              	.LVL363:
 2837              	.L273:
1006:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *last_unsent;
 2838              		.loc 1 1006 0
 2839 0006 EC6E     		ldr	r4, [r5, #108]
 2840 0008 4CB9     		cbnz	r4, .L275
 2841 000a 12E0     		b	.L274
 2842              	.LVL364:
 2843              	.L279:
1003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2844              		.loc 1 1003 0 discriminator 1
 2845 000c 124B     		ldr	r3, .L281
 2846 000e 40F2EB32 		movw	r2, #1003
 2847 0012 1249     		ldr	r1, .L281+4
 2848 0014 1248     		ldr	r0, .L281+8
 2849              	.LVL365:
 2850 0016 FFF7FEFF 		bl	printf
 2851              	.LVL366:
 2852 001a F4E7     		b	.L273
 2853              	.LVL367:
 2854              	.L277:
 2855              	.LBB27:
1009:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2856              		.loc 1 1009 0
 2857 001c 1C46     		mov	r4, r3
 2858              	.LVL368:
 2859              	.L275:
1008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 2860              		.loc 1 1008 0 discriminator 1
 2861 001e 2368     		ldr	r3, [r4]
 2862 0020 002B     		cmp	r3, #0
 2863 0022 FBD1     		bne	.L277
1011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* no SYN/FIN/RST flag in the header, we can add the FIN flag */
 2864              		.loc 1 1011 0
 2865 0024 E368     		ldr	r3, [r4, #12]
 2866 0026 9889     		ldrh	r0, [r3, #12]	@ unaligned
 2867 0028 FFF7FEFF 		bl	lwip_htons
 2868              	.LVL369:
 2869 002c 10F0070F 		tst	r0, #7
 2870 0030 04D0     		beq	.L280
 2871              	.LVL370:
 2872              	.L274:
 2873              	.LBE27:
1019:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
ARM GAS  /tmp/ccMjT2X9.s 			page 92


 2874              		.loc 1 1019 0
 2875 0032 0121     		movs	r1, #1
 2876 0034 2846     		mov	r0, r5
 2877 0036 FFF7FEFF 		bl	tcp_enqueue_flags
 2878              	.LVL371:
1020:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2879              		.loc 1 1020 0
 2880 003a 70BD     		pop	{r4, r5, r6, pc}
 2881              	.LVL372:
 2882              	.L280:
 2883              	.LBB28:
1013:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_FIN);
 2884              		.loc 1 1013 0
 2885 003c E668     		ldr	r6, [r4, #12]
 2886 003e B489     		ldrh	r4, [r6, #12]	@ unaligned
 2887              	.LVL373:
 2888 0040 0120     		movs	r0, #1
 2889 0042 FFF7FEFF 		bl	lwip_htons
 2890              	.LVL374:
 2891 0046 2043     		orrs	r0, r0, r4
 2892 0048 B081     		strh	r0, [r6, #12]	@ unaligned
1014:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_OK;
 2893              		.loc 1 1014 0
 2894 004a 6B8B     		ldrh	r3, [r5, #26]
 2895 004c 43F02003 		orr	r3, r3, #32
 2896 0050 6B83     		strh	r3, [r5, #26]	@ movhi
1015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2897              		.loc 1 1015 0
 2898 0052 0020     		movs	r0, #0
 2899 0054 70BD     		pop	{r4, r5, r6, pc}
 2900              	.LVL375:
 2901              	.L282:
 2902 0056 00BF     		.align	2
 2903              	.L281:
 2904 0058 00000000 		.word	.LC0
 2905 005c 00000000 		.word	.LC44
 2906 0060 50000000 		.word	.LC2
 2907              	.LBE28:
 2908              		.cfi_endproc
 2909              	.LFE164:
 2911              		.section	.text.tcp_rexmit_rto_prepare,"ax",%progbits
 2912              		.align	1
 2913              		.global	tcp_rexmit_rto_prepare
 2914              		.syntax unified
 2915              		.thumb
 2916              		.thumb_func
 2917              		.fpu fpv5-d16
 2919              	tcp_rexmit_rto_prepare:
 2920              	.LFB169:
1632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 2921              		.loc 1 1632 0
 2922              		.cfi_startproc
 2923              		@ args = 0, pretend = 0, frame = 0
 2924              		@ frame_needed = 0, uses_anonymous_args = 0
 2925              	.LVL376:
 2926 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2927              	.LCFI32:
ARM GAS  /tmp/ccMjT2X9.s 			page 93


 2928              		.cfi_def_cfa_offset 24
 2929              		.cfi_offset 3, -24
 2930              		.cfi_offset 4, -20
 2931              		.cfi_offset 5, -16
 2932              		.cfi_offset 6, -12
 2933              		.cfi_offset 7, -8
 2934              		.cfi_offset 14, -4
1635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2935              		.loc 1 1635 0
 2936 0002 0546     		mov	r5, r0
 2937 0004 58B1     		cbz	r0, .L294
 2938              	.LVL377:
 2939              	.L284:
1637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 2940              		.loc 1 1637 0
 2941 0006 2C6F     		ldr	r4, [r5, #112]
 2942 0008 002C     		cmp	r4, #0
 2943 000a 34D0     		beq	.L295
 2944              	.L286:
 2945              	.LVL378:
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
 2946              		.loc 1 1645 0 discriminator 1
 2947 000c 2368     		ldr	r3, [r4]
 2948 000e 73B1     		cbz	r3, .L296
1646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit_rto: segment busy\n"));
 2949              		.loc 1 1646 0
 2950 0010 2046     		mov	r0, r4
 2951 0012 FFF7FEFF 		bl	tcp_output_segment_busy
 2952              	.LVL379:
 2953 0016 0028     		cmp	r0, #0
 2954 0018 30D1     		bne	.L290
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
 2955              		.loc 1 1645 0 discriminator 2
 2956 001a 2468     		ldr	r4, [r4]
 2957              	.LVL380:
 2958 001c F6E7     		b	.L286
 2959              	.LVL381:
 2960              	.L294:
1635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2961              		.loc 1 1635 0 discriminator 1
 2962 001e 1A4B     		ldr	r3, .L297
 2963 0020 40F26362 		movw	r2, #1635
 2964 0024 1949     		ldr	r1, .L297+4
 2965 0026 1A48     		ldr	r0, .L297+8
 2966              	.LVL382:
 2967 0028 FFF7FEFF 		bl	printf
 2968              	.LVL383:
 2969 002c EBE7     		b	.L284
 2970              	.LVL384:
 2971              	.L296:
1651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit_rto: segment busy\n"));
 2972              		.loc 1 1651 0
 2973 002e 2046     		mov	r0, r4
 2974 0030 FFF7FEFF 		bl	tcp_output_segment_busy
 2975              	.LVL385:
 2976 0034 28BB     		cbnz	r0, .L291
1656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
ARM GAS  /tmp/ccMjT2X9.s 			page 94


 2977              		.loc 1 1656 0
 2978 0036 EB6E     		ldr	r3, [r5, #108]
 2979 0038 2360     		str	r3, [r4]
1664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unacked queue is now empty */
 2980              		.loc 1 1664 0
 2981 003a 2B6F     		ldr	r3, [r5, #112]
 2982 003c EB66     		str	r3, [r5, #108]
1666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2983              		.loc 1 1666 0
 2984 003e 0023     		movs	r3, #0
 2985 0040 2B67     		str	r3, [r5, #112]
1669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Record the next byte following retransmit */
 2986              		.loc 1 1669 0
 2987 0042 6B8B     		ldrh	r3, [r5, #26]
 2988 0044 43F40063 		orr	r3, r3, #2048
 2989 0048 6B83     		strh	r3, [r5, #26]	@ movhi
1671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any RTT measurements after retransmitting. */
 2990              		.loc 1 1671 0
 2991 004a E368     		ldr	r3, [r4, #12]
 2992 004c 5868     		ldr	r0, [r3, #4]	@ unaligned
 2993 004e FFF7FEFF 		bl	lwip_htonl
 2994              	.LVL386:
 2995 0052 0646     		mov	r6, r0
 2996 0054 2789     		ldrh	r7, [r4, #8]
 2997 0056 E368     		ldr	r3, [r4, #12]
 2998 0058 9889     		ldrh	r0, [r3, #12]	@ unaligned
 2999 005a FFF7FEFF 		bl	lwip_htons
 3000              	.LVL387:
 3001 005e 10F0030F 		tst	r0, #3
 3002 0062 06D0     		beq	.L292
 3003 0064 0123     		movs	r3, #1
 3004              	.L288:
1671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any RTT measurements after retransmitting. */
 3005              		.loc 1 1671 0 is_stmt 0 discriminator 4
 3006 0066 3B44     		add	r3, r3, r7
 3007 0068 1E44     		add	r6, r6, r3
 3008 006a EE64     		str	r6, [r5, #76]
1673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3009              		.loc 1 1673 0 is_stmt 1 discriminator 4
 3010 006c 0020     		movs	r0, #0
 3011 006e 6863     		str	r0, [r5, #52]
1675:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3012              		.loc 1 1675 0 discriminator 4
 3013 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3014              	.LVL388:
 3015              	.L292:
1671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any RTT measurements after retransmitting. */
 3016              		.loc 1 1671 0
 3017 0072 0023     		movs	r3, #0
 3018 0074 F7E7     		b	.L288
 3019              	.LVL389:
 3020              	.L295:
1638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3021              		.loc 1 1638 0
 3022 0076 6FF00500 		mvn	r0, #5
 3023 007a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3024              	.LVL390:
ARM GAS  /tmp/ccMjT2X9.s 			page 95


 3025              	.L290:
1648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3026              		.loc 1 1648 0
 3027 007c 6FF00500 		mvn	r0, #5
 3028 0080 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3029              	.LVL391:
 3030              	.L291:
1653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3031              		.loc 1 1653 0
 3032 0082 6FF00500 		mvn	r0, #5
1676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3033              		.loc 1 1676 0
 3034 0086 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3035              	.LVL392:
 3036              	.L298:
 3037              		.align	2
 3038              	.L297:
 3039 0088 00000000 		.word	.LC0
 3040 008c 00000000 		.word	.LC45
 3041 0090 50000000 		.word	.LC2
 3042              		.cfi_endproc
 3043              	.LFE169:
 3045              		.section	.text.tcp_rexmit,"ax",%progbits
 3046              		.align	1
 3047              		.global	tcp_rexmit
 3048              		.syntax unified
 3049              		.thumb
 3050              		.thumb_func
 3051              		.fpu fpv5-d16
 3053              	tcp_rexmit:
 3054              	.LFB172:
1725:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 3055              		.loc 1 1725 0
 3056              		.cfi_startproc
 3057              		@ args = 0, pretend = 0, frame = 0
 3058              		@ frame_needed = 0, uses_anonymous_args = 0
 3059              	.LVL393:
 3060 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3061              	.LCFI33:
 3062              		.cfi_def_cfa_offset 24
 3063              		.cfi_offset 3, -24
 3064              		.cfi_offset 4, -20
 3065              		.cfi_offset 5, -16
 3066              		.cfi_offset 6, -12
 3067              		.cfi_offset 7, -8
 3068              		.cfi_offset 14, -4
1729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3069              		.loc 1 1729 0
 3070 0002 0746     		mov	r7, r0
 3071 0004 60B1     		cbz	r0, .L310
 3072              	.LVL394:
 3073              	.L300:
1731:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 3074              		.loc 1 1731 0
 3075 0006 3E6F     		ldr	r6, [r7, #112]
 3076 0008 002E     		cmp	r6, #0
 3077 000a 32D0     		beq	.L307
ARM GAS  /tmp/ccMjT2X9.s 			page 96


 3078              	.LVL395:
1739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit busy\n"));
 3079              		.loc 1 1739 0
 3080 000c 3046     		mov	r0, r6
 3081 000e FFF7FEFF 		bl	tcp_output_segment_busy
 3082              	.LVL396:
 3083 0012 0028     		cmp	r0, #0
 3084 0014 30D1     		bne	.L308
1746:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3085              		.loc 1 1746 0
 3086 0016 3368     		ldr	r3, [r6]
 3087 0018 3B67     		str	r3, [r7, #112]
1748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 3088              		.loc 1 1748 0
 3089 001a 07F16C05 		add	r5, r7, #108
 3090              	.LVL397:
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 3091              		.loc 1 1749 0
 3092 001e 08E0     		b	.L302
 3093              	.LVL398:
 3094              	.L310:
1729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3095              		.loc 1 1729 0 discriminator 1
 3096 0020 174B     		ldr	r3, .L312
 3097 0022 40F2C162 		movw	r2, #1729
 3098 0026 1749     		ldr	r1, .L312+4
 3099 0028 1748     		ldr	r0, .L312+8
 3100              	.LVL399:
 3101 002a FFF7FEFF 		bl	printf
 3102              	.LVL400:
 3103 002e EAE7     		b	.L300
 3104              	.LVL401:
 3105              	.L304:
1751:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3106              		.loc 1 1751 0
 3107 0030 2D68     		ldr	r5, [r5]
 3108              	.LVL402:
 3109              	.L302:
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 3110              		.loc 1 1749 0
 3111 0032 2B68     		ldr	r3, [r5]
 3112 0034 5BB1     		cbz	r3, .L303
1750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     cur_seg = &((*cur_seg)->next );
 3113              		.loc 1 1750 0 discriminator 1
 3114 0036 DB68     		ldr	r3, [r3, #12]
 3115 0038 5868     		ldr	r0, [r3, #4]	@ unaligned
 3116 003a FFF7FEFF 		bl	lwip_htonl
 3117              	.LVL403:
 3118 003e 0446     		mov	r4, r0
 3119 0040 F368     		ldr	r3, [r6, #12]
 3120 0042 5868     		ldr	r0, [r3, #4]	@ unaligned
 3121 0044 FFF7FEFF 		bl	lwip_htonl
 3122              	.LVL404:
 3123 0048 201A     		subs	r0, r4, r0
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 3124              		.loc 1 1749 0 discriminator 1
 3125 004a 0028     		cmp	r0, #0
ARM GAS  /tmp/ccMjT2X9.s 			page 97


 3126 004c F0DB     		blt	.L304
 3127              	.L303:
1753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *cur_seg = seg;
 3128              		.loc 1 1753 0
 3129 004e 2B68     		ldr	r3, [r5]
 3130 0050 3360     		str	r3, [r6]
1754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 3131              		.loc 1 1754 0
 3132 0052 2E60     		str	r6, [r5]
1756:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* the retransmitted segment is last in unsent, so reset unsent_oversize */
 3133              		.loc 1 1756 0
 3134 0054 3368     		ldr	r3, [r6]
 3135 0056 4BB1     		cbz	r3, .L311
 3136              	.L305:
1762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
 3137              		.loc 1 1762 0
 3138 0058 97F84230 		ldrb	r3, [r7, #66]	@ zero_extendqisi2
 3139 005c FF2B     		cmp	r3, #255
 3140 005e 02D0     		beq	.L306
1763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3141              		.loc 1 1763 0
 3142 0060 0133     		adds	r3, r3, #1
 3143 0062 87F84230 		strb	r3, [r7, #66]
 3144              	.L306:
1767:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3145              		.loc 1 1767 0
 3146 0066 0020     		movs	r0, #0
 3147 0068 7863     		str	r0, [r7, #52]
1773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3148              		.loc 1 1773 0
 3149 006a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3150              	.LVL405:
 3151              	.L311:
1758:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3152              		.loc 1 1758 0
 3153 006c A7F86830 		strh	r3, [r7, #104]	@ movhi
 3154 0070 F2E7     		b	.L305
 3155              	.LVL406:
 3156              	.L307:
1732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3157              		.loc 1 1732 0
 3158 0072 6FF00500 		mvn	r0, #5
 3159 0076 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3160              	.LVL407:
 3161              	.L308:
1741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3162              		.loc 1 1741 0
 3163 0078 6FF00500 		mvn	r0, #5
1774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3164              		.loc 1 1774 0
 3165 007c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3166              	.LVL408:
 3167              	.L313:
 3168 007e 00BF     		.align	2
 3169              	.L312:
 3170 0080 00000000 		.word	.LC0
 3171 0084 00000000 		.word	.LC46
ARM GAS  /tmp/ccMjT2X9.s 			page 98


 3172 0088 50000000 		.word	.LC2
 3173              		.cfi_endproc
 3174              	.LFE172:
 3176              		.section	.text.tcp_rexmit_fast,"ax",%progbits
 3177              		.align	1
 3178              		.global	tcp_rexmit_fast
 3179              		.syntax unified
 3180              		.thumb
 3181              		.thumb_func
 3182              		.fpu fpv5-d16
 3184              	tcp_rexmit_fast:
 3185              	.LFB173:
1784:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_fast: invalid pcb", pcb != NULL);
 3186              		.loc 1 1784 0
 3187              		.cfi_startproc
 3188              		@ args = 0, pretend = 0, frame = 0
 3189              		@ frame_needed = 0, uses_anonymous_args = 0
 3190              	.LVL409:
 3191 0000 10B5     		push	{r4, lr}
 3192              	.LCFI34:
 3193              		.cfi_def_cfa_offset 8
 3194              		.cfi_offset 4, -8
 3195              		.cfi_offset 14, -4
1785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3196              		.loc 1 1785 0
 3197 0002 0446     		mov	r4, r0
 3198 0004 30B1     		cbz	r0, .L323
 3199              	.LVL410:
 3200              	.L315:
1787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This is fast retransmit. Retransmit the first unacked segment. */
 3201              		.loc 1 1787 0
 3202 0006 236F     		ldr	r3, [r4, #112]
 3203 0008 1BB1     		cbz	r3, .L314
1787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This is fast retransmit. Retransmit the first unacked segment. */
 3204              		.loc 1 1787 0 is_stmt 0 discriminator 1
 3205 000a 638B     		ldrh	r3, [r4, #26]
 3206 000c 13F0040F 		tst	r3, #4
 3207 0010 08D0     		beq	.L324
 3208              	.L314:
 3209 0012 10BD     		pop	{r4, pc}
 3210              	.LVL411:
 3211              	.L323:
1785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3212              		.loc 1 1785 0 is_stmt 1 discriminator 1
 3213 0014 174B     		ldr	r3, .L325
 3214 0016 40F2F962 		movw	r2, #1785
 3215 001a 1749     		ldr	r1, .L325+4
 3216 001c 1748     		ldr	r0, .L325+8
 3217              	.LVL412:
 3218 001e FFF7FEFF 		bl	printf
 3219              	.LVL413:
 3220 0022 F0E7     		b	.L315
 3221              	.L324:
1794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Set ssthresh to half of the minimum of the current
 3222              		.loc 1 1794 0
 3223 0024 2046     		mov	r0, r4
 3224 0026 FFF7FEFF 		bl	tcp_rexmit
ARM GAS  /tmp/ccMjT2X9.s 			page 99


 3225              	.LVL414:
 3226 002a 0028     		cmp	r0, #0
 3227 002c F1D1     		bne	.L314
1797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3228              		.loc 1 1797 0
 3229 002e B4F84830 		ldrh	r3, [r4, #72]
 3230 0032 B4F86020 		ldrh	r2, [r4, #96]
 3231 0036 9342     		cmp	r3, r2
 3232 0038 19D2     		bcs	.L317
1797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3233              		.loc 1 1797 0 is_stmt 0 discriminator 1
 3234 003a C3F34F02 		ubfx	r2, r3, #1, #16
 3235              	.L319:
1797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3236              		.loc 1 1797 0 discriminator 4
 3237 003e A4F84A20 		strh	r2, [r4, #74]	@ movhi
1800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_FR_DEBUG,
 3238              		.loc 1 1800 0 is_stmt 1 discriminator 4
 3239 0042 638E     		ldrh	r3, [r4, #50]
 3240 0044 B2EB430F 		cmp	r2, r3, lsl #1
 3241 0048 02D2     		bcs	.L321
1805:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 3242              		.loc 1 1805 0
 3243 004a 5A00     		lsls	r2, r3, #1
 3244 004c A4F84A20 		strh	r2, [r4, #74]	@ movhi
 3245              	.L321:
1808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_INFR);
 3246              		.loc 1 1808 0
 3247 0050 B4F84A20 		ldrh	r2, [r4, #74]
 3248 0054 03EB4303 		add	r3, r3, r3, lsl #1
 3249 0058 12FA83F3 		uxtah	r3, r2, r3
 3250 005c A4F84830 		strh	r3, [r4, #72]	@ movhi
1809:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3251              		.loc 1 1809 0
 3252 0060 638B     		ldrh	r3, [r4, #26]
 3253 0062 43F00403 		orr	r3, r3, #4
 3254 0066 6383     		strh	r3, [r4, #26]	@ movhi
1812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3255              		.loc 1 1812 0
 3256 0068 0023     		movs	r3, #0
 3257 006a 2386     		strh	r3, [r4, #48]	@ movhi
1815:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3258              		.loc 1 1815 0
 3259 006c D1E7     		b	.L314
 3260              	.L317:
1797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3261              		.loc 1 1797 0 discriminator 2
 3262 006e C2F34F02 		ubfx	r2, r2, #1, #16
 3263 0072 E4E7     		b	.L319
 3264              	.L326:
 3265              		.align	2
 3266              	.L325:
 3267 0074 00000000 		.word	.LC0
 3268 0078 00000000 		.word	.LC47
 3269 007c 50000000 		.word	.LC2
 3270              		.cfi_endproc
 3271              	.LFE173:
ARM GAS  /tmp/ccMjT2X9.s 			page 100


 3273              		.section	.text.tcp_rst,"ax",%progbits
 3274              		.align	1
 3275              		.global	tcp_rst
 3276              		.syntax unified
 3277              		.thumb
 3278              		.thumb_func
 3279              		.fpu fpv5-d16
 3281              	tcp_rst:
 3282              	.LFB178:
1957:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1958:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1959:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send a TCP RESET packet (empty segment with RST flag set) either to
1960:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * abort a connection or to show that there is no matching local connection
1961:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * for a received segment.
1962:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1963:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_abort() (to abort a local connection), tcp_input() (if no
1964:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * matching local pcb was found), tcp_listen_input() (if incoming segment
1965:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * has ACK flag set) and tcp_process() (received segment in the wrong state)
1966:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1967:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Since a RST segment is in most cases not sent for an active connection,
1968:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * tcp_rst() has a number of arguments that are taken from a tcp_pcb for
1969:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * most other segment output functions.
1970:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1971:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb TCP pcb (may be NULL if no pcb is available)
1972:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno the sequence number to use for the outgoing segment
1973:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param ackno the acknowledge number to use for the outgoing segment
1974:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param local_ip the local IP address to send the segment from
1975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param remote_ip the remote IP address to send the segment to
1976:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param local_port the local TCP port to send the segment from
1977:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param remote_port the remote TCP port to send the segment to
1978:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1979:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1980:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rst(const struct tcp_pcb *pcb, u32_t seqno, u32_t ackno,
1981:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         const ip_addr_t *local_ip, const ip_addr_t *remote_ip,
1982:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         u16_t local_port, u16_t remote_port)
1983:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3283              		.loc 1 1983 0
 3284              		.cfi_startproc
 3285              		@ args = 12, pretend = 0, frame = 0
 3286              		@ frame_needed = 0, uses_anonymous_args = 0
 3287              	.LVL415:
 3288 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3289              	.LCFI35:
 3290              		.cfi_def_cfa_offset 24
 3291              		.cfi_offset 4, -24
 3292              		.cfi_offset 5, -20
 3293              		.cfi_offset 6, -16
 3294              		.cfi_offset 7, -12
 3295              		.cfi_offset 8, -8
 3296              		.cfi_offset 14, -4
 3297 0004 84B0     		sub	sp, sp, #16
 3298              	.LCFI36:
 3299              		.cfi_def_cfa_offset 40
 3300 0006 0546     		mov	r5, r0
 3301 0008 8846     		mov	r8, r1
 3302 000a 1646     		mov	r6, r2
 3303 000c 0A9C     		ldr	r4, [sp, #40]
ARM GAS  /tmp/ccMjT2X9.s 			page 101


1984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1985:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t wnd;
1986:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
1987:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1988:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rst: invalid local_ip", local_ip != NULL);
 3304              		.loc 1 1988 0
 3305 000e 1F46     		mov	r7, r3
 3306 0010 2BB3     		cbz	r3, .L332
 3307              	.LVL416:
 3308              	.L328:
1989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rst: invalid remote_ip", remote_ip != NULL);
 3309              		.loc 1 1989 0
 3310 0012 64B3     		cbz	r4, .L333
 3311              	.L329:
 3312              	.LVL417:
1990:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1991:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
1992:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1993:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1994:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = PP_HTONS(((TCP_WND >> TCP_RCV_SCALE) & 0xFFFF));
1995:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
1996:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = PP_HTONS(TCP_WND);
1997:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1998:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1999:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header_common(ackno, optlen, 0, lwip_htonl(seqno), local_port,
 3313              		.loc 1 1999 0
 3314 0014 4046     		mov	r0, r8
 3315 0016 FFF7FEFF 		bl	lwip_htonl
 3316              	.LVL418:
 3317 001a 46F20803 		movw	r3, #24584
 3318 001e 0393     		str	r3, [sp, #12]
 3319 0020 1423     		movs	r3, #20
 3320 0022 0293     		str	r3, [sp, #8]
 3321 0024 BDF83030 		ldrh	r3, [sp, #48]
 3322 0028 0193     		str	r3, [sp, #4]
 3323 002a BDF82C30 		ldrh	r3, [sp, #44]
 3324 002e 0093     		str	r3, [sp]
 3325 0030 0346     		mov	r3, r0
 3326 0032 0022     		movs	r2, #0
 3327 0034 1146     		mov	r1, r2
 3328 0036 3046     		mov	r0, r6
 3329 0038 FFF7FEFF 		bl	tcp_output_alloc_header_common
 3330              	.LVL419:
2000:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remote_port, TCP_RST | TCP_ACK, wnd);
2001:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 3331              		.loc 1 2001 0
 3332 003c 0646     		mov	r6, r0
 3333              	.LVL420:
 3334 003e 58B1     		cbz	r0, .L327
2002:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG, ("tcp_rst: could not allocate memory for pbuf\n"));
2003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return;
2004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2005:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, 0, optlen);
 3335              		.loc 1 2005 0
 3336 0040 0023     		movs	r3, #0
 3337 0042 1A46     		mov	r2, r3
 3338 0044 0146     		mov	r1, r0
ARM GAS  /tmp/ccMjT2X9.s 			page 102


 3339 0046 2846     		mov	r0, r5
 3340              	.LVL421:
 3341 0048 FFF7FEFF 		bl	tcp_output_fill_options
 3342              	.LVL422:
2006:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2007:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   MIB2_STATS_INC(mib2.tcpoutrsts);
2008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2009:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_control_segment(pcb, p, local_ip, remote_ip);
 3343              		.loc 1 2009 0
 3344 004c 2346     		mov	r3, r4
 3345 004e 3A46     		mov	r2, r7
 3346 0050 3146     		mov	r1, r6
 3347 0052 2846     		mov	r0, r5
 3348 0054 FFF7FEFF 		bl	tcp_output_control_segment
 3349              	.LVL423:
 3350              	.L327:
2010:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_RST_DEBUG, ("tcp_rst: seqno %"U32_F" ackno %"U32_F".\n", seqno, ackno));
2011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3351              		.loc 1 2011 0
 3352 0058 04B0     		add	sp, sp, #16
 3353              	.LCFI37:
 3354              		.cfi_remember_state
 3355              		.cfi_def_cfa_offset 24
 3356              		@ sp needed
 3357 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3358              	.LVL424:
 3359              	.L332:
 3360              	.LCFI38:
 3361              		.cfi_restore_state
1988:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rst: invalid remote_ip", remote_ip != NULL);
 3362              		.loc 1 1988 0 discriminator 1
 3363 005e 084B     		ldr	r3, .L334
 3364              	.LVL425:
 3365 0060 40F2C472 		movw	r2, #1988
 3366              	.LVL426:
 3367 0064 0749     		ldr	r1, .L334+4
 3368              	.LVL427:
 3369 0066 0848     		ldr	r0, .L334+8
 3370              	.LVL428:
 3371 0068 FFF7FEFF 		bl	printf
 3372              	.LVL429:
 3373 006c D1E7     		b	.L328
 3374              	.L333:
1989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3375              		.loc 1 1989 0 discriminator 1
 3376 006e 044B     		ldr	r3, .L334
 3377 0070 40F2C572 		movw	r2, #1989
 3378 0074 0549     		ldr	r1, .L334+12
 3379 0076 0448     		ldr	r0, .L334+8
 3380 0078 FFF7FEFF 		bl	printf
 3381              	.LVL430:
 3382 007c CAE7     		b	.L329
 3383              	.L335:
 3384 007e 00BF     		.align	2
 3385              	.L334:
 3386 0080 00000000 		.word	.LC0
 3387 0084 00000000 		.word	.LC48
ARM GAS  /tmp/ccMjT2X9.s 			page 103


 3388 0088 50000000 		.word	.LC2
 3389 008c 1C000000 		.word	.LC49
 3390              		.cfi_endproc
 3391              	.LFE178:
 3393              		.section	.text.tcp_send_empty_ack,"ax",%progbits
 3394              		.align	1
 3395              		.global	tcp_send_empty_ack
 3396              		.syntax unified
 3397              		.thumb
 3398              		.thumb_func
 3399              		.fpu fpv5-d16
 3401              	tcp_send_empty_ack:
 3402              	.LFB179:
2012:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2013:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
2014:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send an ACK without data.
2015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2016:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to send the ACK
2017:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
2018:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
2019:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_send_empty_ack(struct tcp_pcb *pcb)
2020:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3403              		.loc 1 2020 0
 3404              		.cfi_startproc
 3405              		@ args = 0, pretend = 0, frame = 0
 3406              		@ frame_needed = 0, uses_anonymous_args = 0
 3407              	.LVL431:
 3408 0000 38B5     		push	{r3, r4, r5, lr}
 3409              	.LCFI39:
 3410              		.cfi_def_cfa_offset 16
 3411              		.cfi_offset 3, -16
 3412              		.cfi_offset 4, -12
 3413              		.cfi_offset 5, -8
 3414              		.cfi_offset 14, -4
 3415              	.LVL432:
2021:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
2022:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
2023:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen, optflags = 0;
2024:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t num_sacks = 0;
2025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_send_empty_ack: invalid pcb", pcb != NULL);
 3416              		.loc 1 2026 0
 3417 0002 0446     		mov	r4, r0
 3418 0004 F0B1     		cbz	r0, .L342
 3419              	.LVL433:
 3420              	.L337:
2027:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2028:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
2029:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_TIMESTAMP) {
2030:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_TS;
2031:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2032:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
2033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(optflags, pcb);
2034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2035:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
2036:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* For now, SACKs are only sent with empty ACKs */
2037:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((num_sacks = tcp_get_num_sacks(pcb, optlen)) > 0) {
ARM GAS  /tmp/ccMjT2X9.s 			page 104


2038:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen += 4 + num_sacks * 8; /* 4 bytes for header (including 2*NOP), plus 8B for each SACK */
2039:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2040:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
2041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2042:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, 0, lwip_htonl(pcb->snd_nxt));
 3421              		.loc 1 2042 0
 3422 0006 206D     		ldr	r0, [r4, #80]
 3423 0008 FFF7FEFF 		bl	lwip_htonl
 3424              	.LVL434:
 3425 000c 0346     		mov	r3, r0
 3426 000e 0022     		movs	r2, #0
 3427 0010 1146     		mov	r1, r2
 3428 0012 2046     		mov	r0, r4
 3429 0014 FFF7FEFF 		bl	tcp_output_alloc_header
 3430              	.LVL435:
2043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 3431              		.loc 1 2043 0
 3432 0018 0546     		mov	r5, r0
 3433 001a D8B1     		cbz	r0, .L343
2044:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
2045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
2046:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: (ACK) could not allocate pbuf\n"));
2047:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_BUF;
2048:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2049:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, optflags, num_sacks);
 3434              		.loc 1 2049 0
 3435 001c 0023     		movs	r3, #0
 3436 001e 1A46     		mov	r2, r3
 3437 0020 0146     		mov	r1, r0
 3438 0022 2046     		mov	r0, r4
 3439              	.LVL436:
 3440 0024 FFF7FEFF 		bl	tcp_output_fill_options
 3441              	.LVL437:
2050:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2051:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
2052:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->ts_lastacksent = pcb->rcv_nxt;
2053:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
2054:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2055:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG,
2056:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_output: sending ACK for %"U32_F"\n", pcb->rcv_nxt));
2057:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_output_control_segment(pcb, p, &pcb->local_ip, &pcb->remote_ip);
 3442              		.loc 1 2057 0
 3443 0028 231D     		adds	r3, r4, #4
 3444 002a 2246     		mov	r2, r4
 3445 002c 2946     		mov	r1, r5
 3446 002e 2046     		mov	r0, r4
 3447 0030 FFF7FEFF 		bl	tcp_output_control_segment
 3448              	.LVL438:
2058:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 3449              		.loc 1 2058 0
 3450 0034 0246     		mov	r2, r0
 3451 0036 A0B9     		cbnz	r0, .L344
2059:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
2060:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
2061:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
2062:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* remove ACK flags from the PCB, as we sent an empty ACK now */
2063:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_clear_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
ARM GAS  /tmp/ccMjT2X9.s 			page 105


 3452              		.loc 1 2063 0
 3453 0038 638B     		ldrh	r3, [r4, #26]
 3454 003a 23F00303 		bic	r3, r3, #3
 3455 003e 6383     		strh	r3, [r4, #26]	@ movhi
 3456              	.LVL439:
 3457              	.L339:
2064:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2065:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2066:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
2067:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3458              		.loc 1 2067 0
 3459 0040 1046     		mov	r0, r2
 3460 0042 38BD     		pop	{r3, r4, r5, pc}
 3461              	.LVL440:
 3462              	.L342:
2026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3463              		.loc 1 2026 0 discriminator 1
 3464 0044 094B     		ldr	r3, .L345
 3465 0046 40F2EA72 		movw	r2, #2026
 3466 004a 0949     		ldr	r1, .L345+4
 3467 004c 0948     		ldr	r0, .L345+8
 3468              	.LVL441:
 3469 004e FFF7FEFF 		bl	printf
 3470              	.LVL442:
 3471 0052 D8E7     		b	.L337
 3472              	.LVL443:
 3473              	.L343:
2045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: (ACK) could not allocate pbuf\n"));
 3474              		.loc 1 2045 0
 3475 0054 638B     		ldrh	r3, [r4, #26]
 3476 0056 43F00303 		orr	r3, r3, #3
 3477 005a 6383     		strh	r3, [r4, #26]	@ movhi
2047:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3478              		.loc 1 2047 0
 3479 005c 6FF00102 		mvn	r2, #1
 3480 0060 EEE7     		b	.L339
 3481              	.LVL444:
 3482              	.L344:
2060:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 3483              		.loc 1 2060 0
 3484 0062 638B     		ldrh	r3, [r4, #26]
 3485 0064 43F00303 		orr	r3, r3, #3
 3486 0068 6383     		strh	r3, [r4, #26]	@ movhi
 3487 006a E9E7     		b	.L339
 3488              	.L346:
 3489              		.align	2
 3490              	.L345:
 3491 006c 00000000 		.word	.LC0
 3492 0070 00000000 		.word	.LC50
 3493 0074 50000000 		.word	.LC2
 3494              		.cfi_endproc
 3495              	.LFE179:
 3497              		.section	.text.tcp_output,"ax",%progbits
 3498              		.align	1
 3499              		.global	tcp_output
 3500              		.syntax unified
 3501              		.thumb
ARM GAS  /tmp/ccMjT2X9.s 			page 106


 3502              		.thumb_func
 3503              		.fpu fpv5-d16
 3505              	tcp_output:
 3506              	.LFB166:
1238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg, *useg;
 3507              		.loc 1 1238 0
 3508              		.cfi_startproc
 3509              		@ args = 0, pretend = 0, frame = 0
 3510              		@ frame_needed = 0, uses_anonymous_args = 0
 3511              	.LVL445:
 3512 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3513              	.LCFI40:
 3514              		.cfi_def_cfa_offset 32
 3515              		.cfi_offset 4, -32
 3516              		.cfi_offset 5, -28
 3517              		.cfi_offset 6, -24
 3518              		.cfi_offset 7, -20
 3519              		.cfi_offset 8, -16
 3520              		.cfi_offset 9, -12
 3521              		.cfi_offset 10, -8
 3522              		.cfi_offset 14, -4
1249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* pcb->state LISTEN not allowed here */
 3523              		.loc 1 1249 0
 3524 0004 0546     		mov	r5, r0
 3525 0006 0028     		cmp	r0, #0
 3526 0008 3ED0     		beq	.L394
 3527              	.LVL446:
 3528              	.L348:
1251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               pcb->state != LISTEN);
 3529              		.loc 1 1251 0
 3530 000a 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 3531 000c 012B     		cmp	r3, #1
 3532 000e 43D0     		beq	.L395
 3533              	.L349:
1258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 3534              		.loc 1 1258 0
 3535 0010 A94B     		ldr	r3, .L405
 3536 0012 1B68     		ldr	r3, [r3]
 3537 0014 9D42     		cmp	r5, r3
 3538 0016 00F04681 		beq	.L381
1262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3539              		.loc 1 1262 0
 3540 001a B5F86030 		ldrh	r3, [r5, #96]
 3541 001e B5F84870 		ldrh	r7, [r5, #72]
 3542 0022 BB42     		cmp	r3, r7
 3543 0024 00D2     		bcs	.L352
1262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3544              		.loc 1 1262 0 is_stmt 0 discriminator 1
 3545 0026 1F46     		mov	r7, r3
 3546              	.L352:
 3547              	.LVL447:
1264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3548              		.loc 1 1264 0 is_stmt 1 discriminator 4
 3549 0028 EC6E     		ldr	r4, [r5, #108]
 3550              	.LVL448:
1266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: nothing to send (%p)\n",
 3551              		.loc 1 1266 0 discriminator 4
ARM GAS  /tmp/ccMjT2X9.s 			page 107


 3552 002a 002C     		cmp	r4, #0
 3553 002c 3CD0     		beq	.L396
1290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 3554              		.loc 1 1290 0
 3555 002e 2A1D     		adds	r2, r5, #4
 3556 0030 2946     		mov	r1, r5
 3557 0032 2846     		mov	r0, r5
 3558 0034 FFF7FEFF 		bl	tcp_route
 3559              	.LVL449:
1291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_RTE;
 3560              		.loc 1 1291 0
 3561 0038 8046     		mov	r8, r0
 3562 003a 0028     		cmp	r0, #0
 3563 003c 00F03581 		beq	.L382
1296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
 3564              		.loc 1 1296 0
 3565 0040 0DB1     		cbz	r5, .L355
1296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
 3566              		.loc 1 1296 0 is_stmt 0 discriminator 1
 3567 0042 2B68     		ldr	r3, [r5]
 3568 0044 33B9     		cbnz	r3, .L356
 3569              	.L355:
 3570              	.LVL450:
 3571              	.LBB29:
1298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_RTE;
 3572              		.loc 1 1298 0 is_stmt 1 discriminator 1
 3573 0046 18F1040F 		cmn	r8, #4
 3574 004a 00F03181 		beq	.L383
1301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3575              		.loc 1 1301 0
 3576 004e D8F80430 		ldr	r3, [r8, #4]
 3577 0052 2B60     		str	r3, [r5]
 3578              	.LVL451:
 3579              	.L356:
 3580              	.LBE29:
1305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* We need to start the persistent timer when the next unsent segment does not fit
 3581              		.loc 1 1305 0
 3582 0054 E368     		ldr	r3, [r4, #12]
 3583 0056 5868     		ldr	r0, [r3, #4]	@ unaligned
 3584              	.LVL452:
 3585 0058 FFF7FEFF 		bl	lwip_htonl
 3586              	.LVL453:
 3587 005c 6B6C     		ldr	r3, [r5, #68]
 3588 005e C01A     		subs	r0, r0, r3
 3589 0060 2389     		ldrh	r3, [r4, #8]
 3590 0062 1844     		add	r0, r0, r3
 3591 0064 8742     		cmp	r7, r0
 3592 0066 3CD2     		bcs	.L357
1312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
 3593              		.loc 1 1312 0
 3594 0068 B5F86030 		ldrh	r3, [r5, #96]
 3595 006c 9F42     		cmp	r7, r3
 3596 006e 24D0     		beq	.L397
 3597              	.L358:
1318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return tcp_send_empty_ack(pcb);
 3598              		.loc 1 1318 0
 3599 0070 6B8B     		ldrh	r3, [r5, #26]
ARM GAS  /tmp/ccMjT2X9.s 			page 108


 3600 0072 13F0020F 		tst	r3, #2
 3601 0076 2FD1     		bne	.L398
 3602              	.LVL454:
 3603              	.L354:
1418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 3604              		.loc 1 1418 0
 3605 0078 6B8B     		ldrh	r3, [r5, #26]
 3606 007a 23F08003 		bic	r3, r3, #128
 3607 007e 6B83     		strh	r3, [r5, #26]	@ movhi
1419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3608              		.loc 1 1419 0
 3609 0080 0023     		movs	r3, #0
 3610              	.LVL455:
 3611              	.L350:
1420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3612              		.loc 1 1420 0
 3613 0082 1846     		mov	r0, r3
 3614 0084 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3615              	.LVL456:
 3616              	.L394:
1249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* pcb->state LISTEN not allowed here */
 3617              		.loc 1 1249 0 discriminator 1
 3618 0088 8C4B     		ldr	r3, .L405+4
 3619 008a 40F2E142 		movw	r2, #1249
 3620 008e 8C49     		ldr	r1, .L405+8
 3621 0090 8C48     		ldr	r0, .L405+12
 3622              	.LVL457:
 3623 0092 FFF7FEFF 		bl	printf
 3624              	.LVL458:
 3625 0096 B8E7     		b	.L348
 3626              	.L395:
1251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               pcb->state != LISTEN);
 3627              		.loc 1 1251 0 discriminator 1
 3628 0098 884B     		ldr	r3, .L405+4
 3629 009a 40F2E442 		movw	r2, #1252
 3630 009e 8A49     		ldr	r1, .L405+16
 3631 00a0 8848     		ldr	r0, .L405+12
 3632 00a2 FFF7FEFF 		bl	printf
 3633              	.LVL459:
 3634 00a6 B3E7     		b	.L349
 3635              	.LVL460:
 3636              	.L396:
1276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return tcp_send_empty_ack(pcb);
 3637              		.loc 1 1276 0
 3638 00a8 6B8B     		ldrh	r3, [r5, #26]
 3639 00aa 13F0020F 		tst	r3, #2
 3640 00ae E3D0     		beq	.L354
1277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3641              		.loc 1 1277 0
 3642 00b0 2846     		mov	r0, r5
 3643 00b2 FFF7FEFF 		bl	tcp_send_empty_ack
 3644              	.LVL461:
 3645 00b6 0346     		mov	r3, r0
 3646 00b8 E3E7     		b	.L350
 3647              	.LVL462:
 3648              	.L397:
1312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
ARM GAS  /tmp/ccMjT2X9.s 			page 109


 3649              		.loc 1 1312 0 discriminator 1
 3650 00ba 2B6F     		ldr	r3, [r5, #112]
 3651 00bc 002B     		cmp	r3, #0
 3652 00be D7D1     		bne	.L358
1312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
 3653              		.loc 1 1312 0 is_stmt 0 discriminator 2
 3654 00c0 95F89930 		ldrb	r3, [r5, #153]	@ zero_extendqisi2
 3655 00c4 002B     		cmp	r3, #0
 3656 00c6 D3D1     		bne	.L358
1313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_backoff = 1;
 3657              		.loc 1 1313 0 is_stmt 1
 3658 00c8 85F89830 		strb	r3, [r5, #152]
1314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_probe = 0;
 3659              		.loc 1 1314 0
 3660 00cc 0122     		movs	r2, #1
 3661 00ce 85F89920 		strb	r2, [r5, #153]
1315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3662              		.loc 1 1315 0
 3663 00d2 85F89A30 		strb	r3, [r5, #154]
 3664 00d6 CBE7     		b	.L358
 3665              	.L398:
1319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3666              		.loc 1 1319 0
 3667 00d8 2846     		mov	r0, r5
 3668 00da FFF7FEFF 		bl	tcp_send_empty_ack
 3669              	.LVL463:
 3670 00de 0346     		mov	r3, r0
 3671 00e0 CFE7     		b	.L350
 3672              	.L357:
1324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 3673              		.loc 1 1324 0
 3674 00e2 0023     		movs	r3, #0
 3675 00e4 85F89930 		strb	r3, [r5, #153]
1327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg != NULL) {
 3676              		.loc 1 1327 0
 3677 00e8 2E6F     		ldr	r6, [r5, #112]
 3678              	.LVL464:
1328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (; useg->next != NULL; useg = useg->next);
 3679              		.loc 1 1328 0
 3680 00ea 0EB9     		cbnz	r6, .L360
 3681 00ec 7CE0     		b	.L361
 3682              	.L384:
1329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3683              		.loc 1 1329 0
 3684 00ee 1E46     		mov	r6, r3
 3685              	.LVL465:
 3686              	.L360:
1329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3687              		.loc 1 1329 0 is_stmt 0 discriminator 1
 3688 00f0 3368     		ldr	r3, [r6]
 3689 00f2 002B     		cmp	r3, #0
 3690 00f4 FBD1     		bne	.L384
 3691 00f6 77E0     		b	.L361
 3692              	.L403:
1334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
 3693              		.loc 1 1334 0 is_stmt 1 discriminator 1
 3694 00f8 704B     		ldr	r3, .L405+4
ARM GAS  /tmp/ccMjT2X9.s 			page 110


 3695 00fa 40F23752 		movw	r2, #1335
 3696 00fe 7349     		ldr	r1, .L405+20
 3697 0100 7048     		ldr	r0, .L405+12
 3698 0102 FFF7FEFF 		bl	printf
 3699              	.LVL466:
 3700 0106 83E0     		b	.L362
 3701              	.L404:
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3702              		.loc 1 1343 0 discriminator 8
 3703 0108 1A89     		ldrh	r2, [r3, #8]
 3704 010a 6B8E     		ldrh	r3, [r5, #50]
 3705 010c 9A42     		cmp	r2, r3
 3706 010e 80F09080 		bcs	.L388
 3707              	.L364:
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3708              		.loc 1 1343 0 is_stmt 0 discriminator 10
 3709 0112 B5F86430 		ldrh	r3, [r5, #100]
 3710 0116 002B     		cmp	r3, #0
 3711 0118 00F08D80 		beq	.L389
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3712              		.loc 1 1343 0 discriminator 12
 3713 011c B5F86630 		ldrh	r3, [r5, #102]
 3714 0120 082B     		cmp	r3, #8
 3715 0122 40F28A80 		bls	.L390
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3716              		.loc 1 1343 0
 3717 0126 0123     		movs	r3, #1
 3718 0128 02E0     		b	.L363
 3719              	.L385:
 3720 012a 0123     		movs	r3, #1
 3721 012c 00E0     		b	.L363
 3722              	.L386:
 3723 012e 0123     		movs	r3, #1
 3724              	.L363:
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3725              		.loc 1 1343 0 discriminator 16
 3726 0130 23B9     		cbnz	r3, .L365
1344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       break;
 3727              		.loc 1 1344 0 is_stmt 1 discriminator 17
 3728 0132 6B8B     		ldrh	r3, [r5, #26]
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3729              		.loc 1 1343 0 discriminator 17
 3730 0134 13F0A00F 		tst	r3, #160
 3731 0138 00F0AE80 		beq	.L366
 3732              	.L365:
1356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(seg->tcphdr, TCP_ACK);
 3733              		.loc 1 1356 0
 3734 013c 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 3735 013e 022B     		cmp	r3, #2
 3736 0140 0AD0     		beq	.L367
1357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3737              		.loc 1 1357 0
 3738 0142 D4F80CA0 		ldr	r10, [r4, #12]
 3739 0146 BAF80C90 		ldrh	r9, [r10, #12]	@ unaligned
 3740 014a 1020     		movs	r0, #16
 3741 014c FFF7FEFF 		bl	lwip_htons
 3742              	.LVL467:
ARM GAS  /tmp/ccMjT2X9.s 			page 111


 3743 0150 49EA0000 		orr	r0, r9, r0
 3744 0154 AAF80C00 		strh	r0, [r10, #12]	@ unaligned
 3745              	.L367:
1360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (err != ERR_OK) {
 3746              		.loc 1 1360 0
 3747 0158 4246     		mov	r2, r8
 3748 015a 2946     		mov	r1, r5
 3749 015c 2046     		mov	r0, r4
 3750 015e FFF7FEFF 		bl	tcp_output_segment
 3751              	.LVL468:
1361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* segment could not be sent, for whatever reason */
 3752              		.loc 1 1361 0
 3753 0162 0346     		mov	r3, r0
 3754 0164 0028     		cmp	r0, #0
 3755 0166 6AD1     		bne	.L399
1369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
 3756              		.loc 1 1369 0
 3757 0168 2368     		ldr	r3, [r4]
 3758 016a EB66     		str	r3, [r5, #108]
1370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_clear_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
 3759              		.loc 1 1370 0
 3760 016c 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 3761 016e 022B     		cmp	r3, #2
 3762 0170 03D0     		beq	.L369
1371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3763              		.loc 1 1371 0
 3764 0172 6B8B     		ldrh	r3, [r5, #26]
 3765 0174 23F00303 		bic	r3, r3, #3
 3766 0178 6B83     		strh	r3, [r5, #26]	@ movhi
 3767              	.L369:
1373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 3768              		.loc 1 1373 0
 3769 017a E368     		ldr	r3, [r4, #12]
 3770 017c 5868     		ldr	r0, [r3, #4]	@ unaligned
 3771              	.LVL469:
 3772 017e FFF7FEFF 		bl	lwip_htonl
 3773              	.LVL470:
 3774 0182 8146     		mov	r9, r0
 3775 0184 B4F808A0 		ldrh	r10, [r4, #8]
 3776 0188 E368     		ldr	r3, [r4, #12]
 3777 018a 9889     		ldrh	r0, [r3, #12]	@ unaligned
 3778 018c FFF7FEFF 		bl	lwip_htons
 3779              	.LVL471:
 3780 0190 10F0030F 		tst	r0, #3
 3781 0194 58D0     		beq	.L391
 3782 0196 0120     		movs	r0, #1
 3783              	.L370:
1373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 3784              		.loc 1 1373 0 is_stmt 0 discriminator 4
 3785 0198 5044     		add	r0, r0, r10
 3786 019a 4844     		add	r0, r0, r9
 3787              	.LVL472:
1374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->snd_nxt = snd_nxt;
 3788              		.loc 1 1374 0 is_stmt 1 discriminator 4
 3789 019c 2B6D     		ldr	r3, [r5, #80]
 3790 019e 1B1A     		subs	r3, r3, r0
 3791 01a0 002B     		cmp	r3, #0
ARM GAS  /tmp/ccMjT2X9.s 			page 112


 3792 01a2 53DB     		blt	.L400
 3793              	.L371:
1378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 3794              		.loc 1 1378 0
 3795 01a4 B4F80890 		ldrh	r9, [r4, #8]
 3796 01a8 E368     		ldr	r3, [r4, #12]
 3797 01aa 9889     		ldrh	r0, [r3, #12]	@ unaligned
 3798              	.LVL473:
 3799 01ac FFF7FEFF 		bl	lwip_htons
 3800              	.LVL474:
 3801 01b0 10F0030F 		tst	r0, #3
 3802 01b4 4CD0     		beq	.L392
 3803 01b6 0123     		movs	r3, #1
 3804              	.L372:
1378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 3805              		.loc 1 1378 0 is_stmt 0 discriminator 4
 3806 01b8 13EB090F 		cmn	r3, r9
 3807 01bc 68D0     		beq	.L373
1379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is empty? */
 3808              		.loc 1 1379 0 is_stmt 1
 3809 01be 0023     		movs	r3, #0
 3810 01c0 2360     		str	r3, [r4]
1381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->unacked = seg;
 3811              		.loc 1 1381 0
 3812 01c2 2B6F     		ldr	r3, [r5, #112]
 3813 01c4 002B     		cmp	r3, #0
 3814 01c6 45D0     		beq	.L401
1389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to before tail of unacked list, keeping the list sorted */
 3815              		.loc 1 1389 0
 3816 01c8 E368     		ldr	r3, [r4, #12]
 3817 01ca 5868     		ldr	r0, [r3, #4]	@ unaligned
 3818 01cc FFF7FEFF 		bl	lwip_htonl
 3819              	.LVL475:
 3820 01d0 8146     		mov	r9, r0
 3821 01d2 F368     		ldr	r3, [r6, #12]
 3822 01d4 5868     		ldr	r0, [r3, #4]	@ unaligned
 3823 01d6 FFF7FEFF 		bl	lwip_htonl
 3824              	.LVL476:
 3825 01da A9EB0000 		sub	r0, r9, r0
 3826 01de 0028     		cmp	r0, #0
 3827 01e0 3BDB     		blt	.L402
1400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg = useg->next;
 3828              		.loc 1 1400 0
 3829 01e2 3460     		str	r4, [r6]
 3830              	.LVL477:
1401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 3831              		.loc 1 1401 0
 3832 01e4 2646     		mov	r6, r4
 3833              	.LVL478:
 3834              	.L375:
1408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3835              		.loc 1 1408 0
 3836 01e6 EC6E     		ldr	r4, [r5, #108]
 3837              	.LVL479:
 3838              	.L361:
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
 3839              		.loc 1 1332 0
ARM GAS  /tmp/ccMjT2X9.s 			page 113


 3840 01e8 002C     		cmp	r4, #0
 3841 01ea 55D0     		beq	.L366
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 3842              		.loc 1 1333 0 discriminator 1
 3843 01ec E368     		ldr	r3, [r4, #12]
 3844 01ee 5868     		ldr	r0, [r3, #4]	@ unaligned
 3845 01f0 FFF7FEFF 		bl	lwip_htonl
 3846              	.LVL480:
 3847 01f4 6B6C     		ldr	r3, [r5, #68]
 3848 01f6 C01A     		subs	r0, r0, r3
 3849 01f8 2389     		ldrh	r3, [r4, #8]
 3850 01fa 1844     		add	r0, r0, r3
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
 3851              		.loc 1 1332 0 discriminator 1
 3852 01fc 8742     		cmp	r7, r0
 3853 01fe 4BD3     		bcc	.L366
1334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
 3854              		.loc 1 1334 0
 3855 0200 E368     		ldr	r3, [r4, #12]
 3856 0202 9889     		ldrh	r0, [r3, #12]	@ unaligned
 3857 0204 FFF7FEFF 		bl	lwip_htons
 3858              	.LVL481:
 3859 0208 10F0040F 		tst	r0, #4
 3860 020c 7FF474AF 		bne	.L403
 3861              	.L362:
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3862              		.loc 1 1343 0
 3863 0210 2B6F     		ldr	r3, [r5, #112]
 3864 0212 002B     		cmp	r3, #0
 3865 0214 89D0     		beq	.L385
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3866              		.loc 1 1343 0 is_stmt 0 discriminator 2
 3867 0216 6B8B     		ldrh	r3, [r5, #26]
 3868 0218 13F0440F 		tst	r3, #68
 3869 021c 87D1     		bne	.L386
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3870              		.loc 1 1343 0 discriminator 4
 3871 021e EB6E     		ldr	r3, [r5, #108]
 3872 0220 002B     		cmp	r3, #0
 3873 0222 3FF476AF 		beq	.L364
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3874              		.loc 1 1343 0 discriminator 5
 3875 0226 1A68     		ldr	r2, [r3]
 3876 0228 002A     		cmp	r2, #0
 3877 022a 3FF46DAF 		beq	.L404
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 3878              		.loc 1 1343 0
 3879 022e 0123     		movs	r3, #1
 3880 0230 7EE7     		b	.L363
 3881              	.L388:
 3882 0232 0123     		movs	r3, #1
 3883 0234 7CE7     		b	.L363
 3884              	.L389:
 3885 0236 0123     		movs	r3, #1
 3886 0238 7AE7     		b	.L363
 3887              	.L390:
 3888 023a 0023     		movs	r3, #0
ARM GAS  /tmp/ccMjT2X9.s 			page 114


 3889 023c 78E7     		b	.L363
 3890              	.LVL482:
 3891              	.L399:
1363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return err;
 3892              		.loc 1 1363 0 is_stmt 1
 3893 023e 6A8B     		ldrh	r2, [r5, #26]
 3894 0240 42F08002 		orr	r2, r2, #128
 3895 0244 6A83     		strh	r2, [r5, #26]	@ movhi
1364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3896              		.loc 1 1364 0
 3897 0246 1CE7     		b	.L350
 3898              	.LVL483:
 3899              	.L391:
1373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 3900              		.loc 1 1373 0
 3901 0248 0020     		movs	r0, #0
 3902 024a A5E7     		b	.L370
 3903              	.LVL484:
 3904              	.L400:
1375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3905              		.loc 1 1375 0
 3906 024c 2865     		str	r0, [r5, #80]
 3907 024e A9E7     		b	.L371
 3908              	.LVL485:
 3909              	.L392:
1378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 3910              		.loc 1 1378 0
 3911 0250 0023     		movs	r3, #0
 3912 0252 B1E7     		b	.L372
 3913              	.L401:
1382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         useg = seg;
 3914              		.loc 1 1382 0
 3915 0254 2C67     		str	r4, [r5, #112]
 3916              	.LVL486:
1383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* unacked list is not empty? */
 3917              		.loc 1 1383 0
 3918 0256 2646     		mov	r6, r4
 3919 0258 C5E7     		b	.L375
 3920              	.LVL487:
 3921              	.L402:
 3922              	.LBB30:
1391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
 3923              		.loc 1 1391 0
 3924 025a 05F1700A 		add	r10, r5, #112
 3925              	.LVL488:
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno)))
 3926              		.loc 1 1392 0
 3927 025e 01E0     		b	.L377
 3928              	.L379:
1394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
 3929              		.loc 1 1394 0
 3930 0260 DAF800A0 		ldr	r10, [r10]
 3931              	.LVL489:
 3932              	.L377:
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno)))
 3933              		.loc 1 1392 0
 3934 0264 DAF80030 		ldr	r3, [r10]
ARM GAS  /tmp/ccMjT2X9.s 			page 115


 3935 0268 63B1     		cbz	r3, .L378
1393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             cur_seg = &((*cur_seg)->next );
 3936              		.loc 1 1393 0 discriminator 1
 3937 026a DB68     		ldr	r3, [r3, #12]
 3938 026c 5868     		ldr	r0, [r3, #4]	@ unaligned
 3939 026e FFF7FEFF 		bl	lwip_htonl
 3940              	.LVL490:
 3941 0272 8146     		mov	r9, r0
 3942 0274 E368     		ldr	r3, [r4, #12]
 3943 0276 5868     		ldr	r0, [r3, #4]	@ unaligned
 3944 0278 FFF7FEFF 		bl	lwip_htonl
 3945              	.LVL491:
 3946 027c A9EB0000 		sub	r0, r9, r0
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno)))
 3947              		.loc 1 1392 0 discriminator 1
 3948 0280 0028     		cmp	r0, #0
 3949 0282 EDDB     		blt	.L379
 3950              	.L378:
1396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           (*cur_seg) = seg;
 3951              		.loc 1 1396 0
 3952 0284 DAF80030 		ldr	r3, [r10]
 3953 0288 2360     		str	r3, [r4]
1397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 3954              		.loc 1 1397 0
 3955 028a CAF80040 		str	r4, [r10]
 3956              	.LBE30:
 3957 028e AAE7     		b	.L375
 3958              	.LVL492:
 3959              	.L373:
1406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3960              		.loc 1 1406 0
 3961 0290 2046     		mov	r0, r4
 3962 0292 FFF7FEFF 		bl	tcp_seg_free
 3963              	.LVL493:
 3964 0296 A6E7     		b	.L375
 3965              	.L366:
1411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* last unsent has been removed, reset unsent_oversize */
 3966              		.loc 1 1411 0
 3967 0298 EB6E     		ldr	r3, [r5, #108]
 3968 029a 002B     		cmp	r3, #0
 3969 029c 7FF4ECAE 		bne	.L354
1413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3970              		.loc 1 1413 0
 3971 02a0 A5F86830 		strh	r3, [r5, #104]	@ movhi
 3972 02a4 E8E6     		b	.L354
 3973              	.LVL494:
 3974              	.L381:
1259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3975              		.loc 1 1259 0
 3976 02a6 0023     		movs	r3, #0
 3977 02a8 EBE6     		b	.L350
 3978              	.LVL495:
 3979              	.L382:
1292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3980              		.loc 1 1292 0
 3981 02aa 6FF00303 		mvn	r3, #3
 3982 02ae E8E6     		b	.L350
ARM GAS  /tmp/ccMjT2X9.s 			page 116


 3983              	.LVL496:
 3984              	.L383:
 3985              	.LBB31:
1299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3986              		.loc 1 1299 0
 3987 02b0 6FF00303 		mvn	r3, #3
 3988 02b4 E5E6     		b	.L350
 3989              	.L406:
 3990 02b6 00BF     		.align	2
 3991              	.L405:
 3992 02b8 00000000 		.word	tcp_input_pcb
 3993 02bc 00000000 		.word	.LC0
 3994 02c0 00000000 		.word	.LC51
 3995 02c4 50000000 		.word	.LC2
 3996 02c8 18000000 		.word	.LC52
 3997 02cc 40000000 		.word	.LC53
 3998              	.LBE31:
 3999              		.cfi_endproc
 4000              	.LFE166:
 4002              		.section	.text.tcp_rexmit_rto_commit,"ax",%progbits
 4003              		.align	1
 4004              		.global	tcp_rexmit_rto_commit
 4005              		.syntax unified
 4006              		.thumb
 4007              		.thumb_func
 4008              		.fpu fpv5-d16
 4010              	tcp_rexmit_rto_commit:
 4011              	.LFB170:
1687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto_commit: invalid pcb", pcb != NULL);
 4012              		.loc 1 1687 0
 4013              		.cfi_startproc
 4014              		@ args = 0, pretend = 0, frame = 0
 4015              		@ frame_needed = 0, uses_anonymous_args = 0
 4016              	.LVL497:
 4017 0000 10B5     		push	{r4, lr}
 4018              	.LCFI41:
 4019              		.cfi_def_cfa_offset 8
 4020              		.cfi_offset 4, -8
 4021              		.cfi_offset 14, -4
1688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4022              		.loc 1 1688 0
 4023 0002 0446     		mov	r4, r0
 4024 0004 50B1     		cbz	r0, .L411
 4025              	.LVL498:
 4026              	.L408:
1691:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
 4027              		.loc 1 1691 0
 4028 0006 94F84230 		ldrb	r3, [r4, #66]	@ zero_extendqisi2
 4029 000a FF2B     		cmp	r3, #255
 4030 000c 02D0     		beq	.L409
1692:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4031              		.loc 1 1692 0
 4032 000e 0133     		adds	r3, r3, #1
 4033 0010 84F84230 		strb	r3, [r4, #66]
 4034              	.L409:
1695:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4035              		.loc 1 1695 0
ARM GAS  /tmp/ccMjT2X9.s 			page 117


 4036 0014 2046     		mov	r0, r4
 4037 0016 FFF7FEFF 		bl	tcp_output
 4038              	.LVL499:
 4039 001a 10BD     		pop	{r4, pc}
 4040              	.LVL500:
 4041              	.L411:
1688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4042              		.loc 1 1688 0 discriminator 1
 4043 001c 034B     		ldr	r3, .L412
 4044 001e 4FF4D362 		mov	r2, #1688
 4045 0022 0349     		ldr	r1, .L412+4
 4046 0024 0348     		ldr	r0, .L412+8
 4047              	.LVL501:
 4048 0026 FFF7FEFF 		bl	printf
 4049              	.LVL502:
 4050 002a ECE7     		b	.L408
 4051              	.L413:
 4052              		.align	2
 4053              	.L412:
 4054 002c 00000000 		.word	.LC0
 4055 0030 00000000 		.word	.LC54
 4056 0034 50000000 		.word	.LC2
 4057              		.cfi_endproc
 4058              	.LFE170:
 4060              		.section	.text.tcp_rexmit_rto,"ax",%progbits
 4061              		.align	1
 4062              		.global	tcp_rexmit_rto
 4063              		.syntax unified
 4064              		.thumb
 4065              		.thumb_func
 4066              		.fpu fpv5-d16
 4068              	tcp_rexmit_rto:
 4069              	.LFB171:
1708:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto: invalid pcb", pcb != NULL);
 4070              		.loc 1 1708 0
 4071              		.cfi_startproc
 4072              		@ args = 0, pretend = 0, frame = 0
 4073              		@ frame_needed = 0, uses_anonymous_args = 0
 4074              	.LVL503:
 4075 0000 10B5     		push	{r4, lr}
 4076              	.LCFI42:
 4077              		.cfi_def_cfa_offset 8
 4078              		.cfi_offset 4, -8
 4079              		.cfi_offset 14, -4
1709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4080              		.loc 1 1709 0
 4081 0002 0446     		mov	r4, r0
 4082 0004 20B1     		cbz	r0, .L418
 4083              	.LVL504:
 4084              	.L415:
1711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_rexmit_rto_commit(pcb);
 4085              		.loc 1 1711 0
 4086 0006 2046     		mov	r0, r4
 4087 0008 FFF7FEFF 		bl	tcp_rexmit_rto_prepare
 4088              	.LVL505:
 4089 000c 40B1     		cbz	r0, .L419
 4090              	.L414:
ARM GAS  /tmp/ccMjT2X9.s 			page 118


 4091 000e 10BD     		pop	{r4, pc}
 4092              	.LVL506:
 4093              	.L418:
1709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4094              		.loc 1 1709 0 discriminator 1
 4095 0010 054B     		ldr	r3, .L420
 4096 0012 40F2AD62 		movw	r2, #1709
 4097 0016 0549     		ldr	r1, .L420+4
 4098 0018 0548     		ldr	r0, .L420+8
 4099              	.LVL507:
 4100 001a FFF7FEFF 		bl	printf
 4101              	.LVL508:
 4102 001e F2E7     		b	.L415
 4103              	.L419:
1712:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4104              		.loc 1 1712 0
 4105 0020 2046     		mov	r0, r4
 4106 0022 FFF7FEFF 		bl	tcp_rexmit_rto_commit
 4107              	.LVL509:
1714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4108              		.loc 1 1714 0
 4109 0026 F2E7     		b	.L414
 4110              	.L421:
 4111              		.align	2
 4112              	.L420:
 4113 0028 00000000 		.word	.LC0
 4114 002c 00000000 		.word	.LC55
 4115 0030 50000000 		.word	.LC2
 4116              		.cfi_endproc
 4117              	.LFE171:
 4119              		.section	.text.tcp_keepalive,"ax",%progbits
 4120              		.align	1
 4121              		.global	tcp_keepalive
 4122              		.syntax unified
 4123              		.thumb
 4124              		.thumb_func
 4125              		.fpu fpv5-d16
 4127              	tcp_keepalive:
 4128              	.LFB180:
2068:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2069:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
2070:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send keepalive packets to keep a connection active although
2071:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * no data is sent over it.
2072:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr()
2074:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2075:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to send a keepalive packet
2076:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
2077:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
2078:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_keepalive(struct tcp_pcb *pcb)
2079:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4129              		.loc 1 2079 0
 4130              		.cfi_startproc
 4131              		@ args = 0, pretend = 0, frame = 0
 4132              		@ frame_needed = 0, uses_anonymous_args = 0
 4133              	.LVL510:
 4134 0000 38B5     		push	{r3, r4, r5, lr}
ARM GAS  /tmp/ccMjT2X9.s 			page 119


 4135              	.LCFI43:
 4136              		.cfi_def_cfa_offset 16
 4137              		.cfi_offset 3, -16
 4138              		.cfi_offset 4, -12
 4139              		.cfi_offset 5, -8
 4140              		.cfi_offset 14, -4
 4141              	.LVL511:
2080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
2081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
2082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
2083:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_keepalive: invalid pcb", pcb != NULL);
 4142              		.loc 1 2084 0
 4143 0002 0446     		mov	r4, r0
 4144 0004 C0B1     		cbz	r0, .L427
 4145              	.LVL512:
 4146              	.L423:
2085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: sending KEEPALIVE probe to "));
2087:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   ip_addr_debug_print_val(TCP_DEBUG, pcb->remote_ip);
2088:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("\n"));
2089:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: tcp_ticks %"U32_F"   pcb->tmr %"U32_F" pcb->keep_cnt_sent
2091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           tcp_ticks, pcb->tmr, (u16_t)pcb->keep_cnt_sent));
2092:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, 0, lwip_htonl(pcb->snd_nxt - 1));
 4147              		.loc 1 2093 0
 4148 0006 206D     		ldr	r0, [r4, #80]
 4149 0008 0138     		subs	r0, r0, #1
 4150 000a FFF7FEFF 		bl	lwip_htonl
 4151              	.LVL513:
 4152 000e 0346     		mov	r3, r0
 4153 0010 0022     		movs	r2, #0
 4154 0012 1146     		mov	r1, r2
 4155 0014 2046     		mov	r0, r4
 4156 0016 FFF7FEFF 		bl	tcp_output_alloc_header
 4157              	.LVL514:
2094:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 4158              		.loc 1 2094 0
 4159 001a 0546     		mov	r5, r0
 4160 001c A0B1     		cbz	r0, .L425
2095:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG,
2096:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_keepalive: could not allocate memory for pbuf\n"));
2097:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
2098:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2099:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, 0, optlen);
 4161              		.loc 1 2099 0
 4162 001e 0023     		movs	r3, #0
 4163 0020 1A46     		mov	r2, r3
 4164 0022 0146     		mov	r1, r0
 4165 0024 2046     		mov	r0, r4
 4166              	.LVL515:
 4167 0026 FFF7FEFF 		bl	tcp_output_fill_options
 4168              	.LVL516:
2100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_output_control_segment(pcb, p, &pcb->local_ip, &pcb->remote_ip);
 4169              		.loc 1 2100 0
 4170 002a 231D     		adds	r3, r4, #4
ARM GAS  /tmp/ccMjT2X9.s 			page 120


 4171 002c 2246     		mov	r2, r4
 4172 002e 2946     		mov	r1, r5
 4173 0030 2046     		mov	r0, r4
 4174 0032 FFF7FEFF 		bl	tcp_output_control_segment
 4175              	.LVL517:
2101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: seqno %"U32_F" ackno %"U32_F" err %d.\n",
2103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           pcb->snd_nxt - 1, pcb->rcv_nxt, (int)err));
2104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 4176              		.loc 1 2104 0
 4177 0036 38BD     		pop	{r3, r4, r5, pc}
 4178              	.LVL518:
 4179              	.L427:
2084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4180              		.loc 1 2084 0 discriminator 1
 4181 0038 054B     		ldr	r3, .L428
 4182 003a 40F62402 		movw	r2, #2084
 4183 003e 0549     		ldr	r1, .L428+4
 4184 0040 0548     		ldr	r0, .L428+8
 4185              	.LVL519:
 4186 0042 FFF7FEFF 		bl	printf
 4187              	.LVL520:
 4188 0046 DEE7     		b	.L423
 4189              	.LVL521:
 4190              	.L425:
2097:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4191              		.loc 1 2097 0
 4192 0048 4FF0FF30 		mov	r0, #-1
 4193              	.LVL522:
2105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4194              		.loc 1 2105 0
 4195 004c 38BD     		pop	{r3, r4, r5, pc}
 4196              	.LVL523:
 4197              	.L429:
 4198 004e 00BF     		.align	2
 4199              	.L428:
 4200 0050 00000000 		.word	.LC0
 4201 0054 00000000 		.word	.LC56
 4202 0058 50000000 		.word	.LC2
 4203              		.cfi_endproc
 4204              	.LFE180:
 4206              		.section	.text.tcp_zero_window_probe,"ax",%progbits
 4207              		.align	1
 4208              		.global	tcp_zero_window_probe
 4209              		.syntax unified
 4210              		.thumb
 4211              		.thumb_func
 4212              		.fpu fpv5-d16
 4214              	tcp_zero_window_probe:
 4215              	.LFB181:
2106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
2108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send persist timer zero-window probes to keep a connection active
2109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * when a window update is lost.
2110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr()
2112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
ARM GAS  /tmp/ccMjT2X9.s 			page 121


2113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to send a zero-window probe packet
2114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
2115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
2116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_zero_window_probe(struct tcp_pcb *pcb)
2117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4216              		.loc 1 2117 0
 4217              		.cfi_startproc
 4218              		@ args = 0, pretend = 0, frame = 0
 4219              		@ frame_needed = 0, uses_anonymous_args = 0
 4220              	.LVL524:
 4221 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4222              	.LCFI44:
 4223              		.cfi_def_cfa_offset 24
 4224              		.cfi_offset 4, -24
 4225              		.cfi_offset 5, -20
 4226              		.cfi_offset 6, -16
 4227              		.cfi_offset 7, -12
 4228              		.cfi_offset 8, -8
 4229              		.cfi_offset 14, -4
 4230              	.LVL525:
2118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
2119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
2120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
2121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
2122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t len;
2123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t is_fin;
2124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t snd_nxt;
2125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
2126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_zero_window_probe: invalid pcb", pcb != NULL);
 4231              		.loc 1 2127 0
 4232 0004 0446     		mov	r4, r0
 4233 0006 A8B1     		cbz	r0, .L443
 4234              	.LVL526:
 4235              	.L431:
2128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: sending ZERO WINDOW probe to "));
2130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   ip_addr_debug_print_val(TCP_DEBUG, pcb->remote_ip);
2131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("\n"));
2132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG,
2134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_zero_window_probe: tcp_ticks %"U32_F
2135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                "   pcb->tmr %"U32_F" pcb->keep_cnt_sent %"U16_F"\n",
2136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                tcp_ticks, pcb->tmr, (u16_t)pcb->keep_cnt_sent));
2137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Only consider unsent, persist timer should be off when there is data in-flight */
2139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unsent;
 4236              		.loc 1 2139 0
 4237 0008 E56E     		ldr	r5, [r4, #108]
 4238              	.LVL527:
2140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 4239              		.loc 1 2140 0
 4240 000a 002D     		cmp	r5, #0
 4241 000c 5BD0     		beq	.L438
2141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Not expected, persist timer should be off when the send buffer is empty */
2142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
2143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
ARM GAS  /tmp/ccMjT2X9.s 			page 122


2144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* increment probe count. NOTE: we record probe even if it fails
2146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      to actually transmit due to an error. This ensures memory exhaustion/
2147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      routing problem doesn't leave a zero-window pcb as an indefinite zombie.
2148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      RTO mechanism has similar behavior, see pcb->nrtx */
2149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->persist_probe < 0xFF) {
 4242              		.loc 1 2149 0
 4243 000e 94F89A30 		ldrb	r3, [r4, #154]	@ zero_extendqisi2
 4244 0012 FF2B     		cmp	r3, #255
 4245 0014 02D0     		beq	.L433
2150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->persist_probe;
 4246              		.loc 1 2150 0
 4247 0016 0133     		adds	r3, r3, #1
 4248 0018 84F89A30 		strb	r3, [r4, #154]
 4249              	.L433:
2151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   is_fin = ((TCPH_FLAGS(seg->tcphdr) & TCP_FIN) != 0) && (seg->len == 0);
 4250              		.loc 1 2153 0
 4251 001c EB68     		ldr	r3, [r5, #12]
 4252 001e 9889     		ldrh	r0, [r3, #12]	@ unaligned
 4253 0020 FFF7FEFF 		bl	lwip_htons
 4254              	.LVL528:
 4255 0024 10F0010F 		tst	r0, #1
 4256 0028 0CD0     		beq	.L439
 4257              		.loc 1 2153 0 is_stmt 0 discriminator 1
 4258 002a 2B89     		ldrh	r3, [r5, #8]
 4259 002c 002B     		cmp	r3, #0
 4260 002e 3BD0     		beq	.L440
 4261              		.loc 1 2153 0
 4262 0030 0022     		movs	r2, #0
 4263 0032 08E0     		b	.L434
 4264              	.LVL529:
 4265              	.L443:
2127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 4266              		.loc 1 2127 0 is_stmt 1 discriminator 1
 4267 0034 274B     		ldr	r3, .L445
 4268 0036 40F64F02 		movw	r2, #2127
 4269 003a 2749     		ldr	r1, .L445+4
 4270 003c 2748     		ldr	r0, .L445+8
 4271              	.LVL530:
 4272 003e FFF7FEFF 		bl	printf
 4273              	.LVL531:
 4274 0042 E1E7     		b	.L431
 4275              	.LVL532:
 4276              	.L439:
 4277              		.loc 1 2153 0
 4278 0044 0022     		movs	r2, #0
 4279              	.L434:
 4280              	.LVL533:
2154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* we want to send one seqno: either FIN or data (no options) */
2155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   len = is_fin ? 0 : 1;
 4281              		.loc 1 2155 0 discriminator 6
 4282 0046 02F0FF07 		and	r7, r2, #255
 4283              	.LVL534:
2156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, len, seg->tcphdr->seqno);
ARM GAS  /tmp/ccMjT2X9.s 			page 123


 4284              		.loc 1 2157 0 discriminator 6
 4285 004a EB68     		ldr	r3, [r5, #12]
 4286 004c 5B68     		ldr	r3, [r3, #4]	@ unaligned
 4287 004e 82F00102 		eor	r2, r2, #1
 4288              	.LVL535:
 4289 0052 0021     		movs	r1, #0
 4290 0054 2046     		mov	r0, r4
 4291 0056 FFF7FEFF 		bl	tcp_output_alloc_header
 4292              	.LVL536:
2158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 4293              		.loc 1 2158 0 discriminator 6
 4294 005a 0646     		mov	r6, r0
 4295 005c B0B3     		cbz	r0, .L441
2159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: no memory for pbuf\n"));
2160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
2161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 4296              		.loc 1 2162 0
 4297 005e D0F80480 		ldr	r8, [r0, #4]
 4298              	.LVL537:
2163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (is_fin) {
 4299              		.loc 1 2164 0
 4300 0062 1FB3     		cbz	r7, .L435
2165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* FIN segment, no data */
2166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_FLAGS_SET(tcphdr, TCP_ACK | TCP_FIN);
 4301              		.loc 1 2166 0
 4302 0064 B8F90C70 		ldrsh	r7, [r8, #12]	@ unaligned
 4303 0068 27F47C57 		bic	r7, r7, #16128
 4304 006c 1120     		movs	r0, #17
 4305              	.LVL538:
 4306 006e FFF7FEFF 		bl	lwip_htons
 4307              	.LVL539:
 4308 0072 00B2     		sxth	r0, r0
 4309 0074 0743     		orrs	r7, r7, r0
 4310 0076 A8F80C70 		strh	r7, [r8, #12]	@ unaligned
 4311              	.L436:
2167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
2168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Data segment, copy in one byte from the head of the unacked queue */
2169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     char *d = ((char *)p->payload + TCP_HLEN);
2170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Depending on whether the segment has already been sent (unacked) or not
2171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        (unsent), seg->p->payload points to the IP header or TCP header.
2172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        Ensure we copy the first TCP data byte: */
2173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_copy_partial(seg->p, d, 1, seg->p->tot_len - seg->len);
2174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The byte may be acknowledged without the window being opened. */
2177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   snd_nxt = lwip_ntohl(seg->tcphdr->seqno) + 1;
 4312              		.loc 1 2177 0
 4313 007a EB68     		ldr	r3, [r5, #12]
 4314 007c 5868     		ldr	r0, [r3, #4]	@ unaligned
 4315 007e FFF7FEFF 		bl	lwip_htonl
 4316              	.LVL540:
 4317 0082 0130     		adds	r0, r0, #1
 4318              	.LVL541:
2178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 4319              		.loc 1 2178 0
ARM GAS  /tmp/ccMjT2X9.s 			page 124


 4320 0084 236D     		ldr	r3, [r4, #80]
 4321 0086 1B1A     		subs	r3, r3, r0
 4322 0088 002B     		cmp	r3, #0
 4323 008a 1ADB     		blt	.L444
 4324              	.L437:
2179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_nxt = snd_nxt;
2180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, 0, optlen);
 4325              		.loc 1 2181 0
 4326 008c 0023     		movs	r3, #0
 4327 008e 1A46     		mov	r2, r3
 4328 0090 3146     		mov	r1, r6
 4329 0092 2046     		mov	r0, r4
 4330              	.LVL542:
 4331 0094 FFF7FEFF 		bl	tcp_output_fill_options
 4332              	.LVL543:
2182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_output_control_segment(pcb, p, &pcb->local_ip, &pcb->remote_ip);
 4333              		.loc 1 2183 0
 4334 0098 231D     		adds	r3, r4, #4
 4335 009a 2246     		mov	r2, r4
 4336 009c 3146     		mov	r1, r6
 4337 009e 2046     		mov	r0, r4
 4338 00a0 FFF7FEFF 		bl	tcp_output_control_segment
 4339              	.LVL544:
2184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: seqno %"U32_F
2186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           " ackno %"U32_F" err %d.\n",
2187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           pcb->snd_nxt - 1, pcb->rcv_nxt, (int)err));
2188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 4340              		.loc 1 2188 0
 4341 00a4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4342              	.LVL545:
 4343              	.L440:
2153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* we want to send one seqno: either FIN or data (no options) */
 4344              		.loc 1 2153 0
 4345 00a8 0122     		movs	r2, #1
 4346 00aa CCE7     		b	.L434
 4347              	.LVL546:
 4348              	.L435:
 4349              	.LBB32:
2173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4350              		.loc 1 2173 0
 4351 00ac 6868     		ldr	r0, [r5, #4]
 4352              	.LVL547:
 4353 00ae 0389     		ldrh	r3, [r0, #8]
 4354 00b0 2A89     		ldrh	r2, [r5, #8]
 4355 00b2 9B1A     		subs	r3, r3, r2
 4356 00b4 9BB2     		uxth	r3, r3
 4357 00b6 0122     		movs	r2, #1
 4358 00b8 08F11401 		add	r1, r8, #20
 4359              	.LVL548:
 4360 00bc FFF7FEFF 		bl	pbuf_copy_partial
 4361              	.LVL549:
 4362 00c0 DBE7     		b	.L436
 4363              	.LVL550:
 4364              	.L444:
ARM GAS  /tmp/ccMjT2X9.s 			page 125


 4365              	.LBE32:
2179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4366              		.loc 1 2179 0
 4367 00c2 2065     		str	r0, [r4, #80]
 4368 00c4 E2E7     		b	.L437
 4369              	.LVL551:
 4370              	.L438:
2142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4371              		.loc 1 2142 0
 4372 00c6 0020     		movs	r0, #0
 4373 00c8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4374              	.LVL552:
 4375              	.L441:
2160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4376              		.loc 1 2160 0
 4377 00cc 4FF0FF30 		mov	r0, #-1
 4378              	.LVL553:
2189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4379              		.loc 1 2189 0
 4380 00d0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4381              	.LVL554:
 4382              	.L446:
 4383              		.align	2
 4384              	.L445:
 4385 00d4 00000000 		.word	.LC0
 4386 00d8 00000000 		.word	.LC57
 4387 00dc 50000000 		.word	.LC2
 4388              		.cfi_endproc
 4389              	.LFE181:
 4391              		.section	.rodata.tcp_create_segment.str1.4,"aMS",%progbits,1
 4392              		.align	2
 4393              	.LC11:
 4394 0000 7463705F 		.ascii	"tcp_create_segment: invalid pcb\000"
 4394      63726561 
 4394      74655F73 
 4394      65676D65 
 4394      6E743A20 
 4395              	.LC12:
 4396 0020 7463705F 		.ascii	"tcp_create_segment: invalid pbuf\000"
 4396      63726561 
 4396      74655F73 
 4396      65676D65 
 4396      6E743A20 
 4397 0041 000000   		.space	3
 4398              	.LC13:
 4399 0044 702D3E74 		.ascii	"p->tot_len >= optlen\000"
 4399      6F745F6C 
 4399      656E203E 
 4399      3D206F70 
 4399      746C656E 
 4400              		.section	.rodata.tcp_enqueue_flags.str1.4,"aMS",%progbits,1
 4401              		.align	2
 4402              	.LC38:
 4403 0000 7463705F 		.ascii	"tcp_enqueue_flags: need either TCP_SYN or TCP_FIN i"
 4403      656E7175 
 4403      6575655F 
 4403      666C6167 
ARM GAS  /tmp/ccMjT2X9.s 			page 126


 4403      733A206E 
 4404 0033 6E20666C 		.ascii	"n flags (programmer violates API)\000"
 4404      61677320 
 4404      2870726F 
 4404      6772616D 
 4404      6D657220 
 4405 0055 000000   		.space	3
 4406              	.LC39:
 4407 0058 7463705F 		.ascii	"tcp_enqueue_flags: invalid pcb\000"
 4407      656E7175 
 4407      6575655F 
 4407      666C6167 
 4407      733A2069 
 4408 0077 00       		.space	1
 4409              	.LC40:
 4410 0078 7463705F 		.ascii	"tcp_enqueue_flags: check that first pbuf can hold o"
 4410      656E7175 
 4410      6575655F 
 4410      666C6167 
 4410      733A2063 
 4411 00ab 70746C65 		.ascii	"ptlen\000"
 4411      6E00
 4412 00b1 000000   		.space	3
 4413              	.LC41:
 4414 00b4 7365672D 		.ascii	"seg->tcphdr not aligned\000"
 4414      3E746370 
 4414      68647220 
 4414      6E6F7420 
 4414      616C6967 
 4415              	.LC42:
 4416 00cc 7463705F 		.ascii	"tcp_enqueue_flags: invalid segment length\000"
 4416      656E7175 
 4416      6575655F 
 4416      666C6167 
 4416      733A2069 
 4417 00f6 0000     		.space	2
 4418              	.LC43:
 4419 00f8 7463705F 		.ascii	"tcp_enqueue_flags: invalid queue length\000"
 4419      656E7175 
 4419      6575655F 
 4419      666C6167 
 4419      733A2069 
 4420              		.section	.rodata.tcp_keepalive.str1.4,"aMS",%progbits,1
 4421              		.align	2
 4422              	.LC56:
 4423 0000 7463705F 		.ascii	"tcp_keepalive: invalid pcb\000"
 4423      6B656570 
 4423      616C6976 
 4423      653A2069 
 4423      6E76616C 
 4424              		.section	.rodata.tcp_output.str1.4,"aMS",%progbits,1
 4425              		.align	2
 4426              	.LC51:
 4427 0000 7463705F 		.ascii	"tcp_output: invalid pcb\000"
 4427      6F757470 
 4427      75743A20 
 4427      696E7661 
ARM GAS  /tmp/ccMjT2X9.s 			page 127


 4427      6C696420 
 4428              	.LC52:
 4429 0018 646F6E27 		.ascii	"don't call tcp_output for listen-pcbs\000"
 4429      74206361 
 4429      6C6C2074 
 4429      63705F6F 
 4429      75747075 
 4430 003e 0000     		.space	2
 4431              	.LC53:
 4432 0040 52535420 		.ascii	"RST not expected here!\000"
 4432      6E6F7420 
 4432      65787065 
 4432      63746564 
 4432      20686572 
 4433              		.section	.rodata.tcp_output_alloc_header.str1.4,"aMS",%progbits,1
 4434              		.align	2
 4435              	.LC15:
 4436 0000 7463705F 		.ascii	"tcp_output_alloc_header: invalid pcb\000"
 4436      6F757470 
 4436      75745F61 
 4436      6C6C6F63 
 4436      5F686561 
 4437              		.section	.rodata.tcp_output_alloc_header_common.str1.4,"aMS",%progbits,1
 4438              		.align	2
 4439              	.LC14:
 4440 0000 63686563 		.ascii	"check that first pbuf can hold struct tcp_hdr\000"
 4440      6B207468 
 4440      61742066 
 4440      69727374 
 4440      20706275 
 4441              		.section	.rodata.tcp_output_control_segment.str1.4,"aMS",%progbits,1
 4442              		.align	2
 4443              	.LC19:
 4444 0000 7463705F 		.ascii	"tcp_output_control_segment: invalid pbuf\000"
 4444      6F757470 
 4444      75745F63 
 4444      6F6E7472 
 4444      6F6C5F73 
 4445              		.section	.rodata.tcp_output_fill_options.str1.4,"aMS",%progbits,1
 4446              		.align	2
 4447              	.LC6:
 4448 0000 7463705F 		.ascii	"tcp_output_fill_options: invalid pbuf\000"
 4448      6F757470 
 4448      75745F66 
 4448      696C6C5F 
 4448      6F707469 
 4449 0026 0000     		.space	2
 4450              	.LC7:
 4451 0028 6F707469 		.ascii	"options not filled\000"
 4451      6F6E7320 
 4451      6E6F7420 
 4451      66696C6C 
 4451      656400
 4452              		.section	.rodata.tcp_output_segment.str1.4,"aMS",%progbits,1
 4453              		.align	2
 4454              	.LC16:
 4455 0000 7463705F 		.ascii	"tcp_output_segment: invalid seg\000"
ARM GAS  /tmp/ccMjT2X9.s 			page 128


 4455      6F757470 
 4455      75745F73 
 4455      65676D65 
 4455      6E743A20 
 4456              	.LC17:
 4457 0020 7463705F 		.ascii	"tcp_output_segment: invalid pcb\000"
 4457      6F757470 
 4457      75745F73 
 4457      65676D65 
 4457      6E743A20 
 4458              	.LC18:
 4459 0040 7463705F 		.ascii	"tcp_output_segment: invalid netif\000"
 4459      6F757470 
 4459      75745F73 
 4459      65676D65 
 4459      6E743A20 
 4460              		.section	.rodata.tcp_output_segment_busy.str1.4,"aMS",%progbits,1
 4461              		.align	2
 4462              	.LC5:
 4463 0000 7463705F 		.ascii	"tcp_output_segment_busy: invalid seg\000"
 4463      6F757470 
 4463      75745F73 
 4463      65676D65 
 4463      6E745F62 
 4464              		.section	.rodata.tcp_pbuf_prealloc.str1.4,"aMS",%progbits,1
 4465              		.align	2
 4466              	.LC8:
 4467 0000 7463705F 		.ascii	"tcp_pbuf_prealloc: invalid oversize\000"
 4467      70627566 
 4467      5F707265 
 4467      616C6C6F 
 4467      633A2069 
 4468              	.LC9:
 4469 0024 7463705F 		.ascii	"tcp_pbuf_prealloc: invalid pcb\000"
 4469      70627566 
 4469      5F707265 
 4469      616C6C6F 
 4469      633A2069 
 4470 0043 00       		.space	1
 4471              	.LC10:
 4472 0044 6E656564 		.ascii	"need unchained pbuf\000"
 4472      20756E63 
 4472      6861696E 
 4472      65642070 
 4472      62756600 
 4473              		.section	.rodata.tcp_rexmit.str1.4,"aMS",%progbits,1
 4474              		.align	2
 4475              	.LC46:
 4476 0000 7463705F 		.ascii	"tcp_rexmit: invalid pcb\000"
 4476      7265786D 
 4476      69743A20 
 4476      696E7661 
 4476      6C696420 
 4477              		.section	.rodata.tcp_rexmit_fast.str1.4,"aMS",%progbits,1
 4478              		.align	2
 4479              	.LC47:
 4480 0000 7463705F 		.ascii	"tcp_rexmit_fast: invalid pcb\000"
ARM GAS  /tmp/ccMjT2X9.s 			page 129


 4480      7265786D 
 4480      69745F66 
 4480      6173743A 
 4480      20696E76 
 4481              		.section	.rodata.tcp_rexmit_rto.str1.4,"aMS",%progbits,1
 4482              		.align	2
 4483              	.LC55:
 4484 0000 7463705F 		.ascii	"tcp_rexmit_rto: invalid pcb\000"
 4484      7265786D 
 4484      69745F72 
 4484      746F3A20 
 4484      696E7661 
 4485              		.section	.rodata.tcp_rexmit_rto_commit.str1.4,"aMS",%progbits,1
 4486              		.align	2
 4487              	.LC54:
 4488 0000 7463705F 		.ascii	"tcp_rexmit_rto_commit: invalid pcb\000"
 4488      7265786D 
 4488      69745F72 
 4488      746F5F63 
 4488      6F6D6D69 
 4489              		.section	.rodata.tcp_rexmit_rto_prepare.str1.4,"aMS",%progbits,1
 4490              		.align	2
 4491              	.LC45:
 4492 0000 7463705F 		.ascii	"tcp_rexmit_rto_prepare: invalid pcb\000"
 4492      7265786D 
 4492      69745F72 
 4492      746F5F70 
 4492      72657061 
 4493              		.section	.rodata.tcp_rst.str1.4,"aMS",%progbits,1
 4494              		.align	2
 4495              	.LC48:
 4496 0000 7463705F 		.ascii	"tcp_rst: invalid local_ip\000"
 4496      7273743A 
 4496      20696E76 
 4496      616C6964 
 4496      206C6F63 
 4497 001a 0000     		.space	2
 4498              	.LC49:
 4499 001c 7463705F 		.ascii	"tcp_rst: invalid remote_ip\000"
 4499      7273743A 
 4499      20696E76 
 4499      616C6964 
 4499      2072656D 
 4500              		.section	.rodata.tcp_send_empty_ack.str1.4,"aMS",%progbits,1
 4501              		.align	2
 4502              	.LC50:
 4503 0000 7463705F 		.ascii	"tcp_send_empty_ack: invalid pcb\000"
 4503      73656E64 
 4503      5F656D70 
 4503      74795F61 
 4503      636B3A20 
 4504              		.section	.rodata.tcp_send_fin.str1.4,"aMS",%progbits,1
 4505              		.align	2
 4506              	.LC44:
 4507 0000 7463705F 		.ascii	"tcp_send_fin: invalid pcb\000"
 4507      73656E64 
 4507      5F66696E 
ARM GAS  /tmp/ccMjT2X9.s 			page 130


 4507      3A20696E 
 4507      76616C69 
 4508              		.section	.rodata.tcp_split_unsent_seg.str1.4,"aMS",%progbits,1
 4509              		.align	2
 4510              	.LC33:
 4511 0000 7463705F 		.ascii	"tcp_split_unsent_seg: invalid pcb\000"
 4511      73706C69 
 4511      745F756E 
 4511      73656E74 
 4511      5F736567 
 4512 0022 0000     		.space	2
 4513              	.LC34:
 4514 0024 43616E27 		.ascii	"Can't split segment into length 0\000"
 4514      74207370 
 4514      6C697420 
 4514      7365676D 
 4514      656E7420 
 4515 0046 0000     		.space	2
 4516              	.LC35:
 4517 0048 73706C69 		.ascii	"split <= mss\000"
 4517      74203C3D 
 4517      206D7373 
 4517      00
 4518 0055 000000   		.space	3
 4519              	.LC36:
 4520 0058 75736567 		.ascii	"useg->len > 0\000"
 4520      2D3E6C65 
 4520      6E203E20 
 4520      3000
 4521 0066 0000     		.space	2
 4522              	.LC37:
 4523 0068 73656720 		.ascii	"seg == NULL\000"
 4523      3D3D204E 
 4523      554C4C00 
 4524              		.section	.rodata.tcp_write.str1.4,"aMS",%progbits,1
 4525              		.align	2
 4526              	.LC20:
 4527 0000 7463705F 		.ascii	"tcp_write: invalid pcb\000"
 4527      77726974 
 4527      653A2069 
 4527      6E76616C 
 4527      69642070 
 4528 0017 00       		.space	1
 4529              	.LC21:
 4530 0018 7463705F 		.ascii	"tcp_write: arg == NULL (programmer violates API)\000"
 4530      77726974 
 4530      653A2061 
 4530      7267203D 
 4530      3D204E55 
 4531 0049 000000   		.space	3
 4532              	.LC22:
 4533 004c 6D73735F 		.ascii	"mss_local is too small\000"
 4533      6C6F6361 
 4533      6C206973 
 4533      20746F6F 
 4533      20736D61 
 4534 0063 00       		.space	1
ARM GAS  /tmp/ccMjT2X9.s 			page 131


 4535              	.LC23:
 4536 0064 696E636F 		.ascii	"inconsistent oversize vs. space\000"
 4536      6E736973 
 4536      74656E74 
 4536      206F7665 
 4536      7273697A 
 4537              	.LC24:
 4538 0084 696E636F 		.ascii	"inconsistent oversize vs. len\000"
 4538      6E736973 
 4538      74656E74 
 4538      206F7665 
 4538      7273697A 
 4539 00a2 0000     		.space	2
 4540              	.LC25:
 4541 00a4 7463705F 		.ascii	"tcp_write: ROM pbufs cannot be oversized\000"
 4541      77726974 
 4541      653A2052 
 4541      4F4D2070 
 4541      62756673 
 4542 00cd 000000   		.space	3
 4543              	.LC26:
 4544 00d0 756E7365 		.ascii	"unsent_oversize mismatch (pcb->unsent is NULL)\000"
 4544      6E745F6F 
 4544      76657273 
 4544      697A6520 
 4544      6D69736D 
 4545 00ff 00       		.space	1
 4546              	.LC27:
 4547 0100 7463705F 		.ascii	"tcp_write: check that first pbuf can hold the compl"
 4547      77726974 
 4547      653A2063 
 4547      6865636B 
 4547      20746861 
 4548 0133 65746520 		.ascii	"ete seglen\000"
 4548      7365676C 
 4548      656E00
 4549 013e 0000     		.space	2
 4550              	.LC28:
 4551 0140 6F766572 		.ascii	"oversize == 0\000"
 4551      73697A65 
 4551      203D3D20 
 4551      3000
 4552 014e 0000     		.space	2
 4553              	.LC29:
 4554 0150 70726576 		.ascii	"prev_seg != NULL\000"
 4554      5F736567 
 4554      20213D20 
 4554      4E554C4C 
 4554      00
 4555 0161 000000   		.space	3
 4556              	.LC30:
 4557 0164 7463705F 		.ascii	"tcp_write: cannot concatenate when pcb->unsent is e"
 4557      77726974 
 4557      653A2063 
 4557      616E6E6F 
 4557      7420636F 
 4558 0197 6D707479 		.ascii	"mpty\000"
ARM GAS  /tmp/ccMjT2X9.s 			page 132


 4558      00
 4559              	.LC31:
 4560 019c 7463705F 		.ascii	"tcp_write: extension of reference requires referenc"
 4560      77726974 
 4560      653A2065 
 4560      7874656E 
 4560      73696F6E 
 4561 01cf 6500     		.ascii	"e\000"
 4562 01d1 000000   		.space	3
 4563              	.LC32:
 4564 01d4 7463705F 		.ascii	"tcp_write: valid queue length\000"
 4564      77726974 
 4564      653A2076 
 4564      616C6964 
 4564      20717565 
 4565              		.section	.rodata.tcp_write_checks.str1.4,"aMS",%progbits,1
 4566              		.align	2
 4567              	.LC0:
 4568 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/core/tcp_out.c\000"
 4568      6C657761 
 4568      7265732F 
 4568      54686972 
 4568      645F5061 
 4569              	.LC1:
 4570 0030 7463705F 		.ascii	"tcp_write_checks: invalid pcb\000"
 4570      77726974 
 4570      655F6368 
 4570      65636B73 
 4570      3A20696E 
 4571 004e 0000     		.space	2
 4572              	.LC2:
 4573 0050 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 4573      7274696F 
 4573      6E202225 
 4573      73222066 
 4573      61696C65 
 4574              	.LC3:
 4575 0078 7463705F 		.ascii	"tcp_write: pbufs on queue => at least one queue non"
 4575      77726974 
 4575      653A2070 
 4575      62756673 
 4575      206F6E20 
 4576 00ab 2D656D70 		.ascii	"-empty\000"
 4576      747900
 4577 00b2 0000     		.space	2
 4578              	.LC4:
 4579 00b4 7463705F 		.ascii	"tcp_write: no pbufs on queue => both queues empty\000"
 4579      77726974 
 4579      653A206E 
 4579      6F207062 
 4579      75667320 
 4580              		.section	.rodata.tcp_zero_window_probe.str1.4,"aMS",%progbits,1
 4581              		.align	2
 4582              	.LC57:
 4583 0000 7463705F 		.ascii	"tcp_zero_window_probe: invalid pcb\000"
 4583      7A65726F 
 4583      5F77696E 
ARM GAS  /tmp/ccMjT2X9.s 			page 133


 4583      646F775F 
 4583      70726F62 
 4584              		.text
 4585              	.Letext0:
 4586              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 4587              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 4588              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 4589              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 4590              		.file 6 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal.h"
 4591              		.file 7 "/usr/include/newlib/sys/lock.h"
 4592              		.file 8 "/usr/include/newlib/sys/_types.h"
 4593              		.file 9 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 4594              		.file 10 "/usr/include/newlib/sys/reent.h"
 4595              		.file 11 "/usr/include/newlib/stdlib.h"
 4596              		.file 12 "/usr/include/newlib/time.h"
 4597              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 4598              		.file 14 "/usr/include/newlib/ctype.h"
 4599              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpbase.h"
 4600              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 4601              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 4602              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 4603              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 4604              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 4605              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 4606              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 4607              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 4608              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 4609              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 4610              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/tcp_priv.h"
 4611              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/tcp.h"
 4612              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
 4613              		.file 29 "/usr/include/newlib/stdio.h"
 4614              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4.h"
ARM GAS  /tmp/ccMjT2X9.s 			page 134


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tcp_out.c
     /tmp/ccMjT2X9.s:17     .text.tcp_write_checks:0000000000000000 $t
     /tmp/ccMjT2X9.s:23     .text.tcp_write_checks:0000000000000000 tcp_write_checks
     /tmp/ccMjT2X9.s:165    .text.tcp_write_checks:00000000000000a8 $d
     /tmp/ccMjT2X9.s:174    .text.tcp_output_segment_busy:0000000000000000 $t
     /tmp/ccMjT2X9.s:180    .text.tcp_output_segment_busy:0000000000000000 tcp_output_segment_busy
     /tmp/ccMjT2X9.s:225    .text.tcp_output_segment_busy:0000000000000028 $d
     /tmp/ccMjT2X9.s:232    .text.tcp_output_fill_options:0000000000000000 $t
     /tmp/ccMjT2X9.s:238    .text.tcp_output_fill_options:0000000000000000 tcp_output_fill_options
     /tmp/ccMjT2X9.s:308    .text.tcp_output_fill_options:0000000000000044 $d
     /tmp/ccMjT2X9.s:316    .text.tcp_pbuf_prealloc:0000000000000000 $t
     /tmp/ccMjT2X9.s:322    .text.tcp_pbuf_prealloc:0000000000000000 tcp_pbuf_prealloc
     /tmp/ccMjT2X9.s:458    .text.tcp_pbuf_prealloc:00000000000000a4 $d
     /tmp/ccMjT2X9.s:467    .text.tcp_create_segment:0000000000000000 $t
     /tmp/ccMjT2X9.s:473    .text.tcp_create_segment:0000000000000000 tcp_create_segment
     /tmp/ccMjT2X9.s:644    .text.tcp_create_segment:00000000000000dc $d
     /tmp/ccMjT2X9.s:653    .text.tcp_output_alloc_header_common:0000000000000000 $t
     /tmp/ccMjT2X9.s:659    .text.tcp_output_alloc_header_common:0000000000000000 tcp_output_alloc_header_common
     /tmp/ccMjT2X9.s:761    .text.tcp_output_alloc_header_common:000000000000008c $d
     /tmp/ccMjT2X9.s:768    .text.tcp_output_alloc_header:0000000000000000 $t
     /tmp/ccMjT2X9.s:774    .text.tcp_output_alloc_header:0000000000000000 tcp_output_alloc_header
     /tmp/ccMjT2X9.s:852    .text.tcp_output_alloc_header:000000000000004c $d
     /tmp/ccMjT2X9.s:859    .text.tcp_route:0000000000000000 $t
     /tmp/ccMjT2X9.s:865    .text.tcp_route:0000000000000000 tcp_route
     /tmp/ccMjT2X9.s:900    .text.tcp_output_segment:0000000000000000 $t
     /tmp/ccMjT2X9.s:906    .text.tcp_output_segment:0000000000000000 tcp_output_segment
     /tmp/ccMjT2X9.s:1127   .text.tcp_output_segment:0000000000000128 $d
     /tmp/ccMjT2X9.s:1138   .text.tcp_output_control_segment:0000000000000000 $t
     /tmp/ccMjT2X9.s:1144   .text.tcp_output_control_segment:0000000000000000 tcp_output_control_segment
     /tmp/ccMjT2X9.s:1250   .text.tcp_output_control_segment:0000000000000060 $d
     /tmp/ccMjT2X9.s:1257   .text.tcp_write:0000000000000000 $t
     /tmp/ccMjT2X9.s:1264   .text.tcp_write:0000000000000000 tcp_write
     /tmp/ccMjT2X9.s:1879   .text.tcp_write:0000000000000338 $d
     /tmp/ccMjT2X9.s:1893   .text.tcp_write:0000000000000364 $t
     /tmp/ccMjT2X9.s:2198   .text.tcp_write:0000000000000538 $d
     /tmp/ccMjT2X9.s:2208   .text.tcp_split_unsent_seg:0000000000000000 $t
     /tmp/ccMjT2X9.s:2215   .text.tcp_split_unsent_seg:0000000000000000 tcp_split_unsent_seg
     /tmp/ccMjT2X9.s:2524   .text.tcp_split_unsent_seg:00000000000001bc $d
     /tmp/ccMjT2X9.s:2535   .text.tcp_enqueue_flags:0000000000000000 $t
     /tmp/ccMjT2X9.s:2542   .text.tcp_enqueue_flags:0000000000000000 tcp_enqueue_flags
     /tmp/ccMjT2X9.s:2800   .text.tcp_enqueue_flags:0000000000000148 $d
     /tmp/ccMjT2X9.s:2812   .text.tcp_send_fin:0000000000000000 $t
     /tmp/ccMjT2X9.s:2819   .text.tcp_send_fin:0000000000000000 tcp_send_fin
     /tmp/ccMjT2X9.s:2904   .text.tcp_send_fin:0000000000000058 $d
     /tmp/ccMjT2X9.s:2912   .text.tcp_rexmit_rto_prepare:0000000000000000 $t
     /tmp/ccMjT2X9.s:2919   .text.tcp_rexmit_rto_prepare:0000000000000000 tcp_rexmit_rto_prepare
     /tmp/ccMjT2X9.s:3039   .text.tcp_rexmit_rto_prepare:0000000000000088 $d
     /tmp/ccMjT2X9.s:3046   .text.tcp_rexmit:0000000000000000 $t
     /tmp/ccMjT2X9.s:3053   .text.tcp_rexmit:0000000000000000 tcp_rexmit
     /tmp/ccMjT2X9.s:3170   .text.tcp_rexmit:0000000000000080 $d
     /tmp/ccMjT2X9.s:3177   .text.tcp_rexmit_fast:0000000000000000 $t
     /tmp/ccMjT2X9.s:3184   .text.tcp_rexmit_fast:0000000000000000 tcp_rexmit_fast
     /tmp/ccMjT2X9.s:3267   .text.tcp_rexmit_fast:0000000000000074 $d
     /tmp/ccMjT2X9.s:3274   .text.tcp_rst:0000000000000000 $t
     /tmp/ccMjT2X9.s:3281   .text.tcp_rst:0000000000000000 tcp_rst
     /tmp/ccMjT2X9.s:3386   .text.tcp_rst:0000000000000080 $d
ARM GAS  /tmp/ccMjT2X9.s 			page 135


     /tmp/ccMjT2X9.s:3394   .text.tcp_send_empty_ack:0000000000000000 $t
     /tmp/ccMjT2X9.s:3401   .text.tcp_send_empty_ack:0000000000000000 tcp_send_empty_ack
     /tmp/ccMjT2X9.s:3491   .text.tcp_send_empty_ack:000000000000006c $d
     /tmp/ccMjT2X9.s:3498   .text.tcp_output:0000000000000000 $t
     /tmp/ccMjT2X9.s:3505   .text.tcp_output:0000000000000000 tcp_output
     /tmp/ccMjT2X9.s:3992   .text.tcp_output:00000000000002b8 $d
     /tmp/ccMjT2X9.s:4003   .text.tcp_rexmit_rto_commit:0000000000000000 $t
     /tmp/ccMjT2X9.s:4010   .text.tcp_rexmit_rto_commit:0000000000000000 tcp_rexmit_rto_commit
     /tmp/ccMjT2X9.s:4054   .text.tcp_rexmit_rto_commit:000000000000002c $d
     /tmp/ccMjT2X9.s:4061   .text.tcp_rexmit_rto:0000000000000000 $t
     /tmp/ccMjT2X9.s:4068   .text.tcp_rexmit_rto:0000000000000000 tcp_rexmit_rto
     /tmp/ccMjT2X9.s:4113   .text.tcp_rexmit_rto:0000000000000028 $d
     /tmp/ccMjT2X9.s:4120   .text.tcp_keepalive:0000000000000000 $t
     /tmp/ccMjT2X9.s:4127   .text.tcp_keepalive:0000000000000000 tcp_keepalive
     /tmp/ccMjT2X9.s:4200   .text.tcp_keepalive:0000000000000050 $d
     /tmp/ccMjT2X9.s:4207   .text.tcp_zero_window_probe:0000000000000000 $t
     /tmp/ccMjT2X9.s:4214   .text.tcp_zero_window_probe:0000000000000000 tcp_zero_window_probe
     /tmp/ccMjT2X9.s:4385   .text.tcp_zero_window_probe:00000000000000d4 $d
     /tmp/ccMjT2X9.s:4392   .rodata.tcp_create_segment.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4401   .rodata.tcp_enqueue_flags.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4421   .rodata.tcp_keepalive.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4425   .rodata.tcp_output.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4434   .rodata.tcp_output_alloc_header.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4438   .rodata.tcp_output_alloc_header_common.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4442   .rodata.tcp_output_control_segment.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4446   .rodata.tcp_output_fill_options.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4453   .rodata.tcp_output_segment.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4461   .rodata.tcp_output_segment_busy.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4465   .rodata.tcp_pbuf_prealloc.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4474   .rodata.tcp_rexmit.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4478   .rodata.tcp_rexmit_fast.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4482   .rodata.tcp_rexmit_rto.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4486   .rodata.tcp_rexmit_rto_commit.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4490   .rodata.tcp_rexmit_rto_prepare.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4494   .rodata.tcp_rst.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4501   .rodata.tcp_send_empty_ack.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4505   .rodata.tcp_send_fin.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4509   .rodata.tcp_split_unsent_seg.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4525   .rodata.tcp_write.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4566   .rodata.tcp_write_checks.str1.4:0000000000000000 $d
     /tmp/ccMjT2X9.s:4581   .rodata.tcp_zero_window_probe.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
printf
pbuf_alloc
memp_malloc
pbuf_add_header
lwip_htons
lwip_htonl
pbuf_free
tcp_seg_free
ip4_route
netif_get_by_index
ip4_output_if
tcp_eff_send_mss_netif
tcp_ticks
ARM GAS  /tmp/ccMjT2X9.s 			page 136


memcpy
pbuf_clen
pbuf_cat
tcp_segs_free
pbuf_copy_partial
pbuf_realloc
tcp_input_pcb
